{
    "openapi":  "3.0.0",
    "paths":  {
                  "/api/v1/auth/register":  {
                                                "post":  {
                                                             "operationId":  "register",
                                                             "summary":  "Register a new user",
                                                             "description":  "Creates a new user account in the system with Keycloak integration.\n\n    **Registration Process:**\n    - Validates email format and password strength\n    - Creates user in Keycloak identity provider\n    - Stores user profile in local database\n    - Optionally creates an organization\n    - Sends email verification (if configured)\n\n    **Password Requirements:**\n    - Minimum 8 characters\n    - At least one uppercase letter\n    - At least one lowercase letter\n    - At least one number\n    - At least one special character\n\n    **Post-Registration:**\n    - User receives verification email\n    - Account is created in \u0027pending\u0027 status\n    - User can login immediately but may have limited access\n    - Full access granted after email verification\n\n    **Organization Creation:**\n    - If organizationName provided, creates new organization\n    - User becomes organization admin\n    - Organization gets unique ID for team management",
                                                             "parameters":  [

                                                                            ],
                                                             "requestBody":  {
                                                                                 "required":  true,
                                                                                 "description":  "User registration details including email, password, and optional organization",
                                                                                 "content":  {
                                                                                                 "application/json":  {
                                                                                                                          "schema":  {
                                                                                                                                         "$ref":  "#/components/schemas/RegisterDto"
                                                                                                                                     }
                                                                                                                      }
                                                                                             }
                                                                             },
                                                             "responses":  {
                                                                               "201":  {
                                                                                           "description":  "User registered successfully - Returns user ID and optional organization ID",
                                                                                           "content":  {
                                                                                                           "application/json":  {
                                                                                                                                    "schema":  {
                                                                                                                                                   "type":  "object",
                                                                                                                                                   "properties":  {
                                                                                                                                                                      "message":  {
                                                                                                                                                                                      "type":  "string",
                                                                                                                                                                                      "example":  "User registered successfully"
                                                                                                                                                                                  },
                                                                                                                                                                      "userId":  {
                                                                                                                                                                                     "type":  "string",
                                                                                                                                                                                     "example":  "550e8400-e29b-41d4-a716-446655440000"
                                                                                                                                                                                 },
                                                                                                                                                                      "organizationId":  {
                                                                                                                                                                                             "type":  "string",
                                                                                                                                                                                             "nullable":  true,
                                                                                                                                                                                             "example":  "org-123e4567-e89b-12d3-a456-426614174000"
                                                                                                                                                                                         }
                                                                                                                                                                  }
                                                                                                                                               }
                                                                                                                                }
                                                                                                       }
                                                                                       },
                                                                               "400":  {
                                                                                           "description":  "Bad request - Invalid email format, weak password, or missing required fields"
                                                                                       },
                                                                               "409":  {
                                                                                           "description":  "Conflict - User with this email already exists"
                                                                                       },
                                                                               "500":  {
                                                                                           "description":  "Internal server error - Registration failed due to system error"
                                                                                       }
                                                                           },
                                                             "tags":  [
                                                                          "auth"
                                                                      ]
                                                         }
                                            },
                  "/api/v1/auth/login":  {
                                             "post":  {
                                                          "operationId":  "login",
                                                          "summary":  "Login user",
                                                          "description":  "Authenticates user credentials with Keycloak and returns access tokens.\n\n**To use the token in Swagger:**\n1. Copy the `access_token` from the response\n2. Click the \u0027Authorize\u0027 button at the top of this page\n3. Paste the token in the \u0027Bearer Token\u0027 field\n4. Click \u0027Authorize\u0027 - all endpoints will now use this token automatically\n\n**Note:** The token will persist in your browser session and be used for all authenticated endpoints.",
                                                          "parameters":  [

                                                                         ],
                                                          "requestBody":  {
                                                                              "required":  true,
                                                                              "content":  {
                                                                                              "application/json":  {
                                                                                                                       "schema":  {
                                                                                                                                      "$ref":  "#/components/schemas/LoginDto"
                                                                                                                                  }
                                                                                                                   }
                                                                                          }
                                                                          },
                                                          "responses":  {
                                                                            "200":  {
                                                                                        "description":  "Login successful - Copy the access_token to authorize other endpoints",
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "type":  "object",
                                                                                                                                                "properties":  {
                                                                                                                                                                   "access_token":  {
                                                                                                                                                                                        "type":  "string",
                                                                                                                                                                                        "description":  "JWT token to use for authentication (copy this to the Authorize button)",
                                                                                                                                                                                        "example":  "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9..."
                                                                                                                                                                                    },
                                                                                                                                                                   "refresh_token":  {
                                                                                                                                                                                         "type":  "string",
                                                                                                                                                                                         "description":  "Token for refreshing the access token"
                                                                                                                                                                                     },
                                                                                                                                                                   "expires_in":  {
                                                                                                                                                                                      "type":  "number",
                                                                                                                                                                                      "description":  "Token expiration time in seconds",
                                                                                                                                                                                      "example":  300
                                                                                                                                                                                  },
                                                                                                                                                                   "token_type":  {
                                                                                                                                                                                      "type":  "string",
                                                                                                                                                                                      "description":  "Type of token",
                                                                                                                                                                                      "example":  "bearer"
                                                                                                                                                                                  },
                                                                                                                                                                   "user":  {
                                                                                                                                                                                "type":  "object",
                                                                                                                                                                                "properties":  "@{id=; email=; firstName=; lastName=; emailVerified=}"
                                                                                                                                                                            },
                                                                                                                                                                   "organizations":  {
                                                                                                                                                                                         "type":  "array",
                                                                                                                                                                                         "description":  "Organizations the user belongs to"
                                                                                                                                                                                     }
                                                                                                                                                               }
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    },
                                                                            "401":  {
                                                                                        "description":  "Invalid credentials"
                                                                                    }
                                                                        },
                                                          "tags":  [
                                                                       "auth"
                                                                   ]
                                                      }
                                         },
                  "/api/v1/auth/refresh":  {
                                               "post":  {
                                                            "operationId":  "refreshToken",
                                                            "summary":  "Refresh access token",
                                                            "description":  "Exchanges a refresh token for a new access token",
                                                            "parameters":  [

                                                                           ],
                                                            "requestBody":  {
                                                                                "required":  true,
                                                                                "content":  {
                                                                                                "application/json":  {
                                                                                                                         "schema":  {
                                                                                                                                        "$ref":  "#/components/schemas/RefreshTokenDto"
                                                                                                                                    }
                                                                                                                     }
                                                                                            }
                                                                            },
                                                            "responses":  {
                                                                              "200":  {
                                                                                          "description":  "Token refreshed successfully",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "type":  "object",
                                                                                                                                                  "properties":  {
                                                                                                                                                                     "access_token":  {
                                                                                                                                                                                          "type":  "string"
                                                                                                                                                                                      },
                                                                                                                                                                     "refresh_token":  {
                                                                                                                                                                                           "type":  "string"
                                                                                                                                                                                       },
                                                                                                                                                                     "expires_in":  {
                                                                                                                                                                                        "type":  "number"
                                                                                                                                                                                    },
                                                                                                                                                                     "token_type":  {
                                                                                                                                                                                        "type":  "string"
                                                                                                                                                                                    }
                                                                                                                                                                 }
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      },
                                                                              "401":  {
                                                                                          "description":  "Invalid refresh token"
                                                                                      }
                                                                          },
                                                            "tags":  [
                                                                         "auth"
                                                                     ]
                                                        }
                                           },
                  "/api/v1/auth/logout":  {
                                              "post":  {
                                                           "operationId":  "logout",
                                                           "summary":  "Logout user",
                                                           "description":  "Invalidates the user session and refresh token in Keycloak",
                                                           "parameters":  [

                                                                          ],
                                                           "requestBody":  {
                                                                               "required":  true,
                                                                               "content":  {
                                                                                               "application/json":  {
                                                                                                                        "schema":  {
                                                                                                                                       "$ref":  "#/components/schemas/LogoutDto"
                                                                                                                                   }
                                                                                                                    }
                                                                                           }
                                                                           },
                                                           "responses":  {
                                                                             "200":  {
                                                                                         "description":  "Logout successful"
                                                                                     }
                                                                         },
                                                           "tags":  [
                                                                        "auth"
                                                                    ]
                                                       }
                                          },
                  "/api/v1/auth/forgot-password":  {
                                                       "post":  {
                                                                    "operationId":  "forgotPassword",
                                                                    "summary":  "Request password reset",
                                                                    "description":  "Initiates the password reset process by sending a reset link to the user\u0027s email.\n\n    **Reset Process:**\n    - Validates email exists in system\n    - Generates secure reset token (expires in 1 hour)\n    - Sends reset link to user\u0027s email\n    - Returns success regardless of email existence (security)\n\n    **Security Measures:**\n    - Rate limited to prevent abuse\n    - Tokens are single-use only\n    - Previous tokens invalidated on new request\n    - No user enumeration (always returns success)\n\n    **Email Contents:**\n    - Password reset link with token\n    - Expiration notice (1 hour)\n    - Security warning if not requested\n    - Support contact information",
                                                                    "parameters":  [

                                                                                   ],
                                                                    "requestBody":  {
                                                                                        "required":  true,
                                                                                        "description":  "Email address to send password reset link",
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "type":  "object",
                                                                                                                                                "properties":  {
                                                                                                                                                                   "email":  {
                                                                                                                                                                                 "type":  "string",
                                                                                                                                                                                 "format":  "email",
                                                                                                                                                                                 "example":  "user@example.com"
                                                                                                                                                                             }
                                                                                                                                                               },
                                                                                                                                                "required":  [
                                                                                                                                                                 "email"
                                                                                                                                                             ]
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    },
                                                                    "responses":  {
                                                                                      "200":  {
                                                                                                  "description":  "Password reset email sent if user exists - Always returns success for security",
                                                                                                  "content":  {
                                                                                                                  "application/json":  {
                                                                                                                                           "schema":  {
                                                                                                                                                          "type":  "object",
                                                                                                                                                          "properties":  {
                                                                                                                                                                             "message":  {
                                                                                                                                                                                             "type":  "string",
                                                                                                                                                                                             "example":  "Password reset email sent if user exists"
                                                                                                                                                                                         }
                                                                                                                                                                         }
                                                                                                                                                      }
                                                                                                                                       }
                                                                                                              }
                                                                                              },
                                                                                      "429":  {
                                                                                                  "description":  "Too many requests - Rate limit exceeded"
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "auth"
                                                                             ]
                                                                }
                                                   },
                  "/api/v1/auth/reset-password":  {
                                                      "post":  {
                                                                   "operationId":  "resetPassword",
                                                                   "summary":  "Reset password",
                                                                   "description":  "Complete the password reset process using the token received via email.\n\n    **Validation:**\n    - Token must be valid and not expired\n    - Token can only be used once\n    - New password must meet complexity requirements\n    - Cannot reuse recent passwords (if configured)\n\n    **Password Requirements:**\n    - Minimum 8 characters\n    - At least one uppercase letter\n    - At least one lowercase letter\n    - At least one number\n    - At least one special character\n\n    **Post-Reset:**\n    - All existing sessions terminated\n    - User must login with new password\n    - Security notification sent to email\n    - Audit log entry created",
                                                                   "parameters":  [

                                                                                  ],
                                                                   "requestBody":  {
                                                                                       "required":  true,
                                                                                       "description":  "Reset token and new password",
                                                                                       "content":  {
                                                                                                       "application/json":  {
                                                                                                                                "schema":  {
                                                                                                                                               "$ref":  "#/components/schemas/ResetPasswordDto"
                                                                                                                                           }
                                                                                                                            }
                                                                                                   }
                                                                                   },
                                                                   "responses":  {
                                                                                     "200":  {
                                                                                                 "description":  "Password reset successful - User can now login with new password",
                                                                                                 "content":  {
                                                                                                                 "application/json":  {
                                                                                                                                          "schema":  {
                                                                                                                                                         "type":  "object",
                                                                                                                                                         "properties":  {
                                                                                                                                                                            "message":  {
                                                                                                                                                                                            "type":  "string",
                                                                                                                                                                                            "example":  "Password reset successful"
                                                                                                                                                                                        }
                                                                                                                                                                        }
                                                                                                                                                     }
                                                                                                                                      }
                                                                                                             }
                                                                                             },
                                                                                     "400":  {
                                                                                                 "description":  "Bad request - Invalid token, expired token, or weak password"
                                                                                             },
                                                                                     "404":  {
                                                                                                 "description":  "Not found - Reset token not found"
                                                                                             },
                                                                                     "409":  {
                                                                                                 "description":  "Conflict - Password recently used"
                                                                                             }
                                                                                 },
                                                                   "tags":  [
                                                                                "auth"
                                                                            ]
                                                               }
                                                  },
                  "/api/v1/auth/change-password":  {
                                                       "post":  {
                                                                    "operationId":  "changePassword",
                                                                    "summary":  "Change password",
                                                                    "description":  "Change the password for the authenticated user.\n\n    **Requirements:**\n    - User must be authenticated\n    - Must provide correct current password\n    - New password must meet complexity requirements\n    - Cannot reuse recent passwords\n\n    **Password Requirements:**\n    - Minimum 8 characters\n    - At least one uppercase letter\n    - At least one lowercase letter\n    - At least one number\n    - At least one special character\n\n    **Security:**\n    - Current password verified before change\n    - All other sessions terminated after change\n    - Security notification sent to email\n    - Audit log entry created\n\n    **Best Practices:**\n    - Change password regularly (every 90 days)\n    - Don\u0027t reuse passwords across services\n    - Use a password manager\n    - Enable two-factor authentication",
                                                                    "parameters":  [

                                                                                   ],
                                                                    "requestBody":  {
                                                                                        "required":  true,
                                                                                        "description":  "Current password and new password",
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "$ref":  "#/components/schemas/ChangePasswordDto"
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    },
                                                                    "responses":  {
                                                                                      "200":  {
                                                                                                  "description":  "Password changed successfully - Other sessions terminated",
                                                                                                  "content":  {
                                                                                                                  "application/json":  {
                                                                                                                                           "schema":  {
                                                                                                                                                          "type":  "object",
                                                                                                                                                          "properties":  {
                                                                                                                                                                             "message":  {
                                                                                                                                                                                             "type":  "string",
                                                                                                                                                                                             "example":  "Password changed successfully"
                                                                                                                                                                                         }
                                                                                                                                                                         }
                                                                                                                                                      }
                                                                                                                                       }
                                                                                                              }
                                                                                              },
                                                                                      "400":  {
                                                                                                  "description":  "Bad request - Invalid current password or weak new password"
                                                                                              },
                                                                                      "401":  {
                                                                                                  "description":  "Unauthorized - Authentication required"
                                                                                              },
                                                                                      "409":  {
                                                                                                  "description":  "Conflict - New password same as current or recently used"
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "auth"
                                                                             ],
                                                                    "security":  [
                                                                                     {
                                                                                         "bearer":  [

                                                                                                    ]
                                                                                     }
                                                                                 ]
                                                                }
                                                   },
                  "/api/v1/auth/verify-email":  {
                                                    "get":  {
                                                                "operationId":  "verifyEmail",
                                                                "summary":  "Verify email address",
                                                                "description":  "Verify user\u0027s email address using the token received via email.\n\n    **Verification Process:**\n    - Token validated against database\n    - Email marked as verified\n    - User account activated (if pending)\n    - Welcome email sent (optional)\n\n    **Token Details:**\n    - Expires after 24 hours\n    - Single-use only\n    - Unique per user\n    - Cryptographically secure\n\n    **Post-Verification:**\n    - Full account access granted\n    - Can access all features\n    - Can register as agent\n    - Can create organizations\n\n    **Failed Verification:**\n    - Invalid token error\n    - User can request new verification email\n    - Account remains in pending state",
                                                                "parameters":  [
                                                                                   {
                                                                                       "name":  "token",
                                                                                       "required":  true,
                                                                                       "in":  "query",
                                                                                       "description":  "Email verification token from email link",
                                                                                       "schema":  {
                                                                                                      "example":  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                   }
                                                                               ],
                                                                "responses":  {
                                                                                  "200":  {
                                                                                              "description":  "Email verified successfully - Account fully activated",
                                                                                              "content":  {
                                                                                                              "application/json":  {
                                                                                                                                       "schema":  {
                                                                                                                                                      "type":  "object",
                                                                                                                                                      "properties":  {
                                                                                                                                                                         "message":  {
                                                                                                                                                                                         "type":  "string",
                                                                                                                                                                                         "example":  "Email verified successfully"
                                                                                                                                                                                     }
                                                                                                                                                                     }
                                                                                                                                                  }
                                                                                                                                   }
                                                                                                          }
                                                                                          },
                                                                                  "400":  {
                                                                                              "description":  "Bad request - Invalid, expired, or already used verification token"
                                                                                          },
                                                                                  "404":  {
                                                                                              "description":  "Not found - Token not found in system"
                                                                                          }
                                                                              },
                                                                "tags":  [
                                                                             "auth"
                                                                         ]
                                                            }
                                                },
                  "/api/v1/auth/resend-verification":  {
                                                           "post":  {
                                                                        "operationId":  "resendVerification",
                                                                        "summary":  "Resend email verification",
                                                                        "description":  "Request a new email verification link.\n\n    **Use Cases:**\n    - Original email not received\n    - Verification link expired\n    - Email accidentally deleted\n    - Changed email address\n\n    **Process:**\n    - Validates email exists\n    - Checks if already verified\n    - Generates new verification token\n    - Invalidates previous tokens\n    - Sends new verification email\n\n    **Rate Limiting:**\n    - Maximum 3 requests per hour\n    - 24-hour cooldown after limit\n    - Prevents email bombing\n\n    **Security:**\n    - Always returns success (prevents enumeration)\n    - Logs excessive requests\n    - May trigger security review",
                                                                        "parameters":  [

                                                                                       ],
                                                                        "requestBody":  {
                                                                                            "required":  true,
                                                                                            "description":  "Email address to resend verification",
                                                                                            "content":  {
                                                                                                            "application/json":  {
                                                                                                                                     "schema":  {
                                                                                                                                                    "type":  "object",
                                                                                                                                                    "properties":  {
                                                                                                                                                                       "email":  {
                                                                                                                                                                                     "type":  "string",
                                                                                                                                                                                     "format":  "email",
                                                                                                                                                                                     "example":  "user@example.com"
                                                                                                                                                                                 }
                                                                                                                                                                   },
                                                                                                                                                    "required":  [
                                                                                                                                                                     "email"
                                                                                                                                                                 ]
                                                                                                                                                }
                                                                                                                                 }
                                                                                                        }
                                                                                        },
                                                                        "responses":  {
                                                                                          "200":  {
                                                                                                      "description":  "Verification email sent if user exists and not already verified",
                                                                                                      "content":  {
                                                                                                                      "application/json":  {
                                                                                                                                               "schema":  {
                                                                                                                                                              "type":  "object",
                                                                                                                                                              "properties":  {
                                                                                                                                                                                 "message":  {
                                                                                                                                                                                                 "type":  "string",
                                                                                                                                                                                                 "example":  "Verification email sent if user exists"
                                                                                                                                                                                             }
                                                                                                                                                                             }
                                                                                                                                                          }
                                                                                                                                           }
                                                                                                                  }
                                                                                                  },
                                                                                          "429":  {
                                                                                                      "description":  "Too many requests - Rate limit exceeded"
                                                                                                  }
                                                                                      },
                                                                        "tags":  [
                                                                                     "auth"
                                                                                 ]
                                                                    }
                                                       },
                  "/api/v1/auth/users/search":  {
                                                    "get":  {
                                                                "operationId":  "searchUsers",
                                                                "summary":  "Search users",
                                                                "description":  "\n      Search users by various criteria with pagination support.\n      All search parameters are optional - when no filters are provided, returns all users with pagination.\n      Results are cached for 5 minutes to improve performance.\n\n      **Search Parameters (all optional):**\n      - userId: Exact UUID match\n      - email: Case-insensitive partial match\n      - keycloakId: Exact match on external_id field\n      - status: Exact match on user status (pending, active, suspended)\n\n      **Pagination:**\n      - page: Page number (starts from 1)\n      - limit: Items per page (max 100)\n      - sortBy: Sort field (createdAt, updatedAt, email, id)\n      - sortOrder: Sort direction (ASC, DESC)\n\n      **Examples:**\n      - GET /auth/users/search?page=1\u0026limit=20 - Get first 20 users\n      - GET /auth/users/search?sortBy=createdAt\u0026sortOrder=DESC - Get all users sorted by creation date\n      - GET /auth/users/search - Get all users with default pagination\n    ",
                                                                "parameters":  [
                                                                                   {
                                                                                       "name":  "userId",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "User ID (UUID)",
                                                                                       "schema":  {
                                                                                                      "example":  "123e4567-e89b-12d3-a456-426614174000",
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                   },
                                                                                   {
                                                                                       "name":  "email",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "Email address (partial match, case-insensitive)",
                                                                                       "schema":  {
                                                                                                      "example":  "john@example.com",
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                   },
                                                                                   {
                                                                                       "name":  "keycloakId",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "Keycloak ID (external_id)",
                                                                                       "schema":  {
                                                                                                      "example":  "keycloak-123e4567-e89b-12d3-a456-426614174000",
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                   },
                                                                                   {
                                                                                       "name":  "status",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "User status",
                                                                                       "schema":  {
                                                                                                      "enum":  [
                                                                                                                   "pending",
                                                                                                                   "active",
                                                                                                                   "suspended"
                                                                                                               ],
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                   },
                                                                                   {
                                                                                       "name":  "page",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "Page number (starts from 1)",
                                                                                       "schema":  {
                                                                                                      "minimum":  1,
                                                                                                      "default":  1,
                                                                                                      "example":  1,
                                                                                                      "type":  "number"
                                                                                                  }
                                                                                   },
                                                                                   {
                                                                                       "name":  "limit",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "Number of items per page (max 100)",
                                                                                       "schema":  {
                                                                                                      "minimum":  1,
                                                                                                      "maximum":  100,
                                                                                                      "default":  20,
                                                                                                      "example":  20,
                                                                                                      "type":  "number"
                                                                                                  }
                                                                                   },
                                                                                   {
                                                                                       "name":  "sortBy",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "Sort by field",
                                                                                       "schema":  {
                                                                                                      "enum":  [
                                                                                                                   "createdAt",
                                                                                                                   "updatedAt",
                                                                                                                   "email",
                                                                                                                   "id"
                                                                                                               ],
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                   },
                                                                                   {
                                                                                       "name":  "sortOrder",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "Sort order",
                                                                                       "schema":  {
                                                                                                      "enum":  [
                                                                                                                   "ASC",
                                                                                                                   "DESC"
                                                                                                               ],
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                   }
                                                                               ],
                                                                "responses":  {
                                                                                  "200":  {
                                                                                              "description":  "Users found successfully",
                                                                                              "content":  {
                                                                                                              "application/json":  {
                                                                                                                                       "schema":  {
                                                                                                                                                      "type":  "object",
                                                                                                                                                      "properties":  {
                                                                                                                                                                         "users":  {
                                                                                                                                                                                       "type":  "array",
                                                                                                                                                                                       "items":  "@{type=object; properties=}"
                                                                                                                                                                                   },
                                                                                                                                                                         "total":  {
                                                                                                                                                                                       "type":  "number",
                                                                                                                                                                                       "description":  "Total number of users matching criteria"
                                                                                                                                                                                   },
                                                                                                                                                                         "page":  {
                                                                                                                                                                                      "type":  "number",
                                                                                                                                                                                      "description":  "Current page number"
                                                                                                                                                                                  },
                                                                                                                                                                         "limit":  {
                                                                                                                                                                                       "type":  "number",
                                                                                                                                                                                       "description":  "Number of items per page"
                                                                                                                                                                                   },
                                                                                                                                                                         "totalPages":  {
                                                                                                                                                                                            "type":  "number",
                                                                                                                                                                                            "description":  "Total number of pages"
                                                                                                                                                                                        },
                                                                                                                                                                         "hasNextPage":  {
                                                                                                                                                                                             "type":  "boolean",
                                                                                                                                                                                             "description":  "Whether there is a next page"
                                                                                                                                                                                         },
                                                                                                                                                                         "hasPrevPage":  {
                                                                                                                                                                                             "type":  "boolean",
                                                                                                                                                                                             "description":  "Whether there is a previous page"
                                                                                                                                                                                         }
                                                                                                                                                                     }
                                                                                                                                                  }
                                                                                                                                   }
                                                                                                          }
                                                                                          },
                                                                                  "400":  {
                                                                                              "description":  "Invalid search parameters"
                                                                                          },
                                                                                  "401":  {
                                                                                              "description":  "Authentication required"
                                                                                          },
                                                                                  "500":  {
                                                                                              "description":  "Internal server error"
                                                                                          }
                                                                              },
                                                                "tags":  [
                                                                             "auth"
                                                                         ],
                                                                "security":  [
                                                                                 {
                                                                                     "bearer":  [

                                                                                                ]
                                                                                 }
                                                                             ]
                                                            }
                                                },
                  "/api/v1/auth/user-info":  {
                                                 "get":  {
                                                             "operationId":  "getUserInfo",
                                                             "summary":  "Get user information",
                                                             "description":  "Retrieve detailed information about the currently authenticated user.\n\n    **Information Included:**\n    - User ID and email\n    - Profile details (name, avatar, etc.)\n    - Email verification status\n    - Account status and creation date\n    - Roles and permissions\n    - Organization memberships\n    - Agent profile (if exists)\n    - Preferences and settings\n\n    **Use Cases:**\n    - Profile page display\n    - Permission checking\n    - Personalization features\n    - Account management\n\n    **Data Sources:**\n    - Primary data from Keycloak\n    - Extended profile from database\n    - Computed fields (e.g., completion percentage)\n\n    **Privacy:**\n    - Only returns own user data\n    - Sensitive fields may be masked\n    - Admin override available",
                                                             "parameters":  [

                                                                            ],
                                                             "responses":  {
                                                                               "200":  {
                                                                                           "description":  "User information retrieved successfully",
                                                                                           "content":  {
                                                                                                           "application/json":  {
                                                                                                                                    "schema":  {
                                                                                                                                                   "type":  "object",
                                                                                                                                                   "properties":  {
                                                                                                                                                                      "id":  {
                                                                                                                                                                                 "type":  "string",
                                                                                                                                                                                 "example":  "550e8400-e29b-41d4-a716-446655440000"
                                                                                                                                                                             },
                                                                                                                                                                      "email":  {
                                                                                                                                                                                    "type":  "string",
                                                                                                                                                                                    "example":  "user@example.com"
                                                                                                                                                                                },
                                                                                                                                                                      "firstName":  {
                                                                                                                                                                                        "type":  "string",
                                                                                                                                                                                        "example":  "John"
                                                                                                                                                                                    },
                                                                                                                                                                      "lastName":  {
                                                                                                                                                                                       "type":  "string",
                                                                                                                                                                                       "example":  "Doe"
                                                                                                                                                                                   },
                                                                                                                                                                      "emailVerified":  {
                                                                                                                                                                                            "type":  "boolean",
                                                                                                                                                                                            "example":  true
                                                                                                                                                                                        },
                                                                                                                                                                      "status":  {
                                                                                                                                                                                     "type":  "string",
                                                                                                                                                                                     "enum":  "pending active suspended",
                                                                                                                                                                                     "example":  "active"
                                                                                                                                                                                 },
                                                                                                                                                                      "createdAt":  {
                                                                                                                                                                                        "type":  "string",
                                                                                                                                                                                        "format":  "date-time",
                                                                                                                                                                                        "example":  "2024-01-15T10:30:00.000Z"
                                                                                                                                                                                    },
                                                                                                                                                                      "roles":  {
                                                                                                                                                                                    "type":  "array",
                                                                                                                                                                                    "items":  "@{type=string}",
                                                                                                                                                                                    "example":  "user agent"
                                                                                                                                                                                },
                                                                                                                                                                      "organizations":  {
                                                                                                                                                                                            "type":  "array",
                                                                                                                                                                                            "items":  "@{type=object; properties=}"
                                                                                                                                                                                        },
                                                                                                                                                                      "agentProfile":  {
                                                                                                                                                                                           "type":  "object",
                                                                                                                                                                                           "nullable":  true,
                                                                                                                                                                                           "description":  "Agent profile if user is an agent"
                                                                                                                                                                                       },
                                                                                                                                                                      "preferences":  {
                                                                                                                                                                                          "type":  "object",
                                                                                                                                                                                          "description":  "User preferences and settings"
                                                                                                                                                                                      }
                                                                                                                                                                  }
                                                                                                                                               }
                                                                                                                                }
                                                                                                       }
                                                                                       },
                                                                               "401":  {
                                                                                           "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                       },
                                                                               "500":  {
                                                                                           "description":  "Internal server error - Failed to retrieve user information"
                                                                                       }
                                                                           },
                                                             "tags":  [
                                                                          "auth"
                                                                      ],
                                                             "security":  [
                                                                              {
                                                                                  "bearer":  [

                                                                                             ]
                                                                              }
                                                                          ]
                                                         }
                                             },
                  "/api/v1/api-keys":  {
                                           "post":  {
                                                        "operationId":  "createApiKey",
                                                        "summary":  "Create a new API key",
                                                        "description":  "Creates a new API key for authentication. The full key is only returned once during creation and cannot be retrieved again.\n    \n    **Key Types:**\n    - USER: Personal API keys for individual users\n    - SERVICE: Service account keys (admin only)\n    - PARTNER: Partner integration keys (requires partner permissions)\n    \n    **Security Notes:**\n    - Store the returned key securely - it cannot be retrieved again\n    - Keys are hashed before storage using Argon2\n    - Optional IP restrictions and expiration can be set",
                                                        "parameters":  [

                                                                       ],
                                                        "requestBody":  {
                                                                            "required":  true,
                                                                            "content":  {
                                                                                            "application/json":  {
                                                                                                                     "schema":  {
                                                                                                                                    "$ref":  "#/components/schemas/CreateApiKeyDto"
                                                                                                                                }
                                                                                                                 }
                                                                                        }
                                                                        },
                                                        "responses":  {
                                                                          "201":  {
                                                                                      "description":  "API key created successfully",
                                                                                      "content":  {
                                                                                                      "application/json":  {
                                                                                                                               "schema":  {
                                                                                                                                              "$ref":  "#/components/schemas/ApiKeyResponseDto"
                                                                                                                                          }
                                                                                                                           }
                                                                                                  }
                                                                                  },
                                                                          "400":  {
                                                                                      "description":  "Invalid request data"
                                                                                  },
                                                                          "403":  {
                                                                                      "description":  "Insufficient permissions for requested key type"
                                                                                  }
                                                                      },
                                                        "tags":  [
                                                                     "api-keys"
                                                                 ],
                                                        "security":  [
                                                                         {
                                                                             "bearer":  [

                                                                                        ]
                                                                         }
                                                                     ]
                                                    },
                                           "get":  {
                                                       "operationId":  "listApiKeys",
                                                       "summary":  "List API keys",
                                                       "description":  "Lists all API keys accessible to the authenticated user.\n    \n    **Access Control:**\n    - Regular users see only their own keys\n    - Admins can list all keys with includeAll=true\n    - Service accounts see keys for their service\n    \n    **Note:** The full key value is never returned in list operations",
                                                       "parameters":  [
                                                                          {
                                                                              "name":  "type",
                                                                              "required":  false,
                                                                              "in":  "query",
                                                                              "description":  "Filter by key type",
                                                                              "schema":  {
                                                                                             "enum":  [
                                                                                                          "user",
                                                                                                          "service",
                                                                                                          "partner",
                                                                                                          "anonymous"
                                                                                                      ],
                                                                                             "type":  "string"
                                                                                         }
                                                                          },
                                                                          {
                                                                              "name":  "active",
                                                                              "required":  false,
                                                                              "in":  "query",
                                                                              "description":  "Filter by active status",
                                                                              "schema":  {
                                                                                             "type":  "boolean"
                                                                                         }
                                                                          },
                                                                          {
                                                                              "name":  "includeAll",
                                                                              "required":  false,
                                                                              "in":  "query",
                                                                              "description":  "Include all keys (admin only)",
                                                                              "schema":  {
                                                                                             "type":  "boolean"
                                                                                         }
                                                                          },
                                                                          {
                                                                              "name":  "page",
                                                                              "required":  false,
                                                                              "in":  "query",
                                                                              "description":  "Page number (default: 1)",
                                                                              "schema":  {
                                                                                             "type":  "number"
                                                                                         }
                                                                          },
                                                                          {
                                                                              "name":  "limit",
                                                                              "required":  false,
                                                                              "in":  "query",
                                                                              "description":  "Items per page (default: 20, max: 100)",
                                                                              "schema":  {
                                                                                             "type":  "number"
                                                                                         }
                                                                          }
                                                                      ],
                                                       "responses":  {
                                                                         "200":  {
                                                                                     "description":  "List of API keys",
                                                                                     "content":  {
                                                                                                     "application/json":  {
                                                                                                                              "schema":  {
                                                                                                                                             "$ref":  "#/components/schemas/ApiKeyListResponseDto"
                                                                                                                                         }
                                                                                                                          }
                                                                                                 }
                                                                                 }
                                                                     },
                                                       "tags":  [
                                                                    "api-keys"
                                                                ],
                                                       "security":  [
                                                                        {
                                                                            "bearer":  [

                                                                                       ]
                                                                        }
                                                                    ]
                                                   }
                                       },
                  "/api/v1/api-keys/{id}":  {
                                                "get":  {
                                                            "operationId":  "getApiKey",
                                                            "summary":  "Get API key details",
                                                            "description":  "Retrieves details of a specific API key.\n    \n    **Security:** Users can only access their own keys unless they have admin privileges.\n    \n    **Note:** The full key value is never returned after creation.",
                                                            "parameters":  [
                                                                               {
                                                                                   "name":  "id",
                                                                                   "required":  true,
                                                                                   "in":  "path",
                                                                                   "description":  "API key ID",
                                                                                   "schema":  {
                                                                                                  "type":  "string"
                                                                                              }
                                                                               }
                                                                           ],
                                                            "responses":  {
                                                                              "200":  {
                                                                                          "description":  "API key details",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "$ref":  "#/components/schemas/ApiKeyResponseDto"
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      },
                                                                              "403":  {
                                                                                          "description":  "Access denied"
                                                                                      },
                                                                              "404":  {
                                                                                          "description":  "API key not found"
                                                                                      }
                                                                          },
                                                            "tags":  [
                                                                         "api-keys"
                                                                     ],
                                                            "security":  [
                                                                             {
                                                                                 "bearer":  [

                                                                                            ]
                                                                             }
                                                                         ]
                                                        },
                                                "put":  {
                                                            "operationId":  "updateApiKey",
                                                            "summary":  "Update API key",
                                                            "description":  "Updates an existing API key\u0027s metadata and restrictions.\n    \n    **Updatable Fields:**\n    - Name and description\n    - Permissions (within allowed scope)\n    - IP restrictions\n    - Expiration date\n    \n    **Security:** Users can only update their own keys unless they have admin privileges.",
                                                            "parameters":  [
                                                                               {
                                                                                   "name":  "id",
                                                                                   "required":  true,
                                                                                   "in":  "path",
                                                                                   "description":  "API key ID",
                                                                                   "schema":  {
                                                                                                  "type":  "string"
                                                                                              }
                                                                               }
                                                                           ],
                                                            "requestBody":  {
                                                                                "required":  true,
                                                                                "content":  {
                                                                                                "application/json":  {
                                                                                                                         "schema":  {
                                                                                                                                        "$ref":  "#/components/schemas/UpdateApiKeyDto"
                                                                                                                                    }
                                                                                                                     }
                                                                                            }
                                                                            },
                                                            "responses":  {
                                                                              "200":  {
                                                                                          "description":  "API key updated successfully",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "$ref":  "#/components/schemas/ApiKeyResponseDto"
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      },
                                                                              "403":  {
                                                                                          "description":  "Access denied"
                                                                                      },
                                                                              "404":  {
                                                                                          "description":  "API key not found"
                                                                                      }
                                                                          },
                                                            "tags":  [
                                                                         "api-keys"
                                                                     ],
                                                            "security":  [
                                                                             {
                                                                                 "bearer":  [

                                                                                            ]
                                                                             }
                                                                         ]
                                                        },
                                                "delete":  {
                                                               "operationId":  "revokeApiKey",
                                                               "summary":  "Revoke API key",
                                                               "description":  "Permanently revokes (deletes) an API key.\n    \n    **Warning:** This action is irreversible. The key will be immediately invalidated and cannot be recovered.\n    \n    **Security:** Users can only revoke their own keys unless they have admin privileges.",
                                                               "parameters":  [
                                                                                  {
                                                                                      "name":  "id",
                                                                                      "required":  true,
                                                                                      "in":  "path",
                                                                                      "description":  "API key ID to revoke",
                                                                                      "schema":  {
                                                                                                     "type":  "string"
                                                                                                 }
                                                                                  }
                                                                              ],
                                                               "responses":  {
                                                                                 "204":  {
                                                                                             "description":  "API key revoked successfully"
                                                                                         },
                                                                                 "403":  {
                                                                                             "description":  "Access denied"
                                                                                         },
                                                                                 "404":  {
                                                                                             "description":  "API key not found"
                                                                                         }
                                                                             },
                                                               "tags":  [
                                                                            "api-keys"
                                                                        ],
                                                               "security":  [
                                                                                {
                                                                                    "bearer":  [

                                                                                               ]
                                                                                }
                                                                            ]
                                                           }
                                            },
                  "/api/v1/api-keys/{id}/rotate":  {
                                                       "post":  {
                                                                    "operationId":  "rotateApiKey",
                                                                    "summary":  "Rotate API key",
                                                                    "description":  "Rotates an existing API key, generating a new key value while preserving all settings.\n    \n    **Process:**\n    1. Generates a new key with the same permissions and restrictions\n    2. Optionally invalidates the old key immediately or after a grace period\n    3. Returns the new full key (only time it\u0027s visible)\n    \n    **Security:** Critical operation - requires explicit user confirmation",
                                                                    "parameters":  [
                                                                                       {
                                                                                           "name":  "id",
                                                                                           "required":  true,
                                                                                           "in":  "path",
                                                                                           "description":  "API key ID to rotate",
                                                                                           "schema":  {
                                                                                                          "type":  "string"
                                                                                                      }
                                                                                       }
                                                                                   ],
                                                                    "requestBody":  {
                                                                                        "required":  true,
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "$ref":  "#/components/schemas/RotateApiKeyDto"
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    },
                                                                    "responses":  {
                                                                                      "200":  {
                                                                                                  "description":  "API key rotated successfully",
                                                                                                  "content":  {
                                                                                                                  "application/json":  {
                                                                                                                                           "schema":  {
                                                                                                                                                          "$ref":  "#/components/schemas/ApiKeyResponseDto"
                                                                                                                                                      }
                                                                                                                                       }
                                                                                                              }
                                                                                              },
                                                                                      "403":  {
                                                                                                  "description":  "Access denied"
                                                                                              },
                                                                                      "404":  {
                                                                                                  "description":  "API key not found"
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "api-keys"
                                                                             ],
                                                                    "security":  [
                                                                                     {
                                                                                         "bearer":  [

                                                                                                    ]
                                                                                     }
                                                                                 ]
                                                                }
                                                   },
                  "/api/v1/api-keys/validate":  {
                                                    "post":  {
                                                                 "operationId":  "validateApiKey",
                                                                 "summary":  "Validate an API key",
                                                                 "description":  "Test endpoint to validate an API key without performing any actions.\n    \n    **Use Cases:**\n    - Testing key validity after creation\n    - Checking remaining rate limits\n    - Verifying IP restrictions\n    \n    **Note:** This endpoint itself requires authentication via JWT or another valid API key.",
                                                                 "parameters":  [

                                                                                ],
                                                                 "requestBody":  {
                                                                                     "required":  true,
                                                                                     "content":  {
                                                                                                     "application/json":  {
                                                                                                                              "schema":  {
                                                                                                                                             "type":  "object",
                                                                                                                                             "properties":  {
                                                                                                                                                                "key":  {
                                                                                                                                                                            "type":  "string",
                                                                                                                                                                            "description":  "The API key to validate"
                                                                                                                                                                        },
                                                                                                                                                                "ip":  {
                                                                                                                                                                           "type":  "string",
                                                                                                                                                                           "description":  "Optional IP address to test restrictions"
                                                                                                                                                                       }
                                                                                                                                                            },
                                                                                                                                             "required":  [
                                                                                                                                                              "key"
                                                                                                                                                          ]
                                                                                                                                         }
                                                                                                                          }
                                                                                                 }
                                                                                 },
                                                                 "responses":  {
                                                                                   "200":  {
                                                                                               "description":  "Validation result",
                                                                                               "content":  {
                                                                                                               "application/json":  {
                                                                                                                                        "schema":  {
                                                                                                                                                       "type":  "object",
                                                                                                                                                       "properties":  {
                                                                                                                                                                          "valid":  {
                                                                                                                                                                                        "type":  "boolean"
                                                                                                                                                                                    },
                                                                                                                                                                          "keyId":  {
                                                                                                                                                                                        "type":  "string"
                                                                                                                                                                                    },
                                                                                                                                                                          "type":  {
                                                                                                                                                                                       "type":  "string"
                                                                                                                                                                                   },
                                                                                                                                                                          "rateLimits":  {
                                                                                                                                                                                             "type":  "object",
                                                                                                                                                                                             "properties":  "@{remaining=; limit=; resetAt=}"
                                                                                                                                                                                         },
                                                                                                                                                                          "error":  {
                                                                                                                                                                                        "type":  "string"
                                                                                                                                                                                    }
                                                                                                                                                                      }
                                                                                                                                                   }
                                                                                                                                    }
                                                                                                           }
                                                                                           }
                                                                               },
                                                                 "tags":  [
                                                                              "api-keys"
                                                                          ],
                                                                 "security":  [
                                                                                  {
                                                                                      "bearer":  [

                                                                                                 ]
                                                                                  }
                                                                              ]
                                                             }
                                                },
                  "/api/v1/service-accounts":  {
                                                   "post":  {
                                                                "operationId":  "create",
                                                                "summary":  "Create a new service account",
                                                                "parameters":  [

                                                                               ],
                                                                "requestBody":  {
                                                                                    "required":  true,
                                                                                    "content":  {
                                                                                                    "application/json":  {
                                                                                                                             "schema":  {
                                                                                                                                            "$ref":  "#/components/schemas/CreateServiceAccountDto"
                                                                                                                                        }
                                                                                                                         }
                                                                                                }
                                                                                },
                                                                "responses":  {
                                                                                  "201":  {
                                                                                              "description":  "Service account created successfully",
                                                                                              "content":  {
                                                                                                              "application/json":  {
                                                                                                                                       "schema":  {
                                                                                                                                                      "$ref":  "#/components/schemas/ServiceAccount"
                                                                                                                                                  }
                                                                                                                                   }
                                                                                                          }
                                                                                          },
                                                                                  "409":  {
                                                                                              "description":  "Service account with this identifier already exists"
                                                                                          }
                                                                              },
                                                                "tags":  [
                                                                             "Service Accounts"
                                                                         ],
                                                                "security":  [
                                                                                 {
                                                                                     "bearer":  [

                                                                                                ]
                                                                                 }
                                                                             ]
                                                            },
                                                   "get":  {
                                                               "operationId":  "findAll",
                                                               "summary":  "Get all service accounts",
                                                               "parameters":  [
                                                                                  {
                                                                                      "name":  "isActive",
                                                                                      "required":  false,
                                                                                      "in":  "query",
                                                                                      "schema":  {
                                                                                                     "type":  "boolean"
                                                                                                 }
                                                                                  }
                                                                              ],
                                                               "responses":  {
                                                                                 "200":  {
                                                                                             "description":  "List of service accounts",
                                                                                             "content":  {
                                                                                                             "application/json":  {
                                                                                                                                      "schema":  {
                                                                                                                                                     "type":  "array",
                                                                                                                                                     "items":  {
                                                                                                                                                                   "$ref":  "#/components/schemas/ServiceAccountResponseDto"
                                                                                                                                                               }
                                                                                                                                                 }
                                                                                                                                  }
                                                                                                         }
                                                                                         }
                                                                             },
                                                               "tags":  [
                                                                            "Service Accounts"
                                                                        ],
                                                               "security":  [
                                                                                {
                                                                                    "bearer":  [

                                                                                               ]
                                                                                }
                                                                            ]
                                                           }
                                               },
                  "/api/v1/service-accounts/{id}":  {
                                                        "get":  {
                                                                    "operationId":  "findById",
                                                                    "summary":  "Get a service account by ID",
                                                                    "parameters":  [
                                                                                       {
                                                                                           "name":  "id",
                                                                                           "required":  true,
                                                                                           "in":  "path",
                                                                                           "schema":  {
                                                                                                          "type":  "string"
                                                                                                      }
                                                                                       }
                                                                                   ],
                                                                    "responses":  {
                                                                                      "200":  {
                                                                                                  "description":  "Service account details",
                                                                                                  "content":  {
                                                                                                                  "application/json":  {
                                                                                                                                           "schema":  {
                                                                                                                                                          "$ref":  "#/components/schemas/ServiceAccount"
                                                                                                                                                      }
                                                                                                                                       }
                                                                                                              }
                                                                                              },
                                                                                      "404":  {
                                                                                                  "description":  "Service account not found"
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "Service Accounts"
                                                                             ],
                                                                    "security":  [
                                                                                     {
                                                                                         "bearer":  [

                                                                                                    ]
                                                                                     }
                                                                                 ]
                                                                },
                                                        "put":  {
                                                                    "operationId":  "update",
                                                                    "summary":  "Update a service account",
                                                                    "parameters":  [
                                                                                       {
                                                                                           "name":  "id",
                                                                                           "required":  true,
                                                                                           "in":  "path",
                                                                                           "schema":  {
                                                                                                          "type":  "string"
                                                                                                      }
                                                                                       }
                                                                                   ],
                                                                    "requestBody":  {
                                                                                        "required":  true,
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "$ref":  "#/components/schemas/UpdateServiceAccountDto"
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    },
                                                                    "responses":  {
                                                                                      "200":  {
                                                                                                  "description":  "Service account updated successfully",
                                                                                                  "content":  {
                                                                                                                  "application/json":  {
                                                                                                                                           "schema":  {
                                                                                                                                                          "$ref":  "#/components/schemas/ServiceAccount"
                                                                                                                                                      }
                                                                                                                                       }
                                                                                                              }
                                                                                              },
                                                                                      "404":  {
                                                                                                  "description":  "Service account not found"
                                                                                              },
                                                                                      "409":  {
                                                                                                  "description":  "Service account with this identifier already exists"
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "Service Accounts"
                                                                             ],
                                                                    "security":  [
                                                                                     {
                                                                                         "bearer":  [

                                                                                                    ]
                                                                                     }
                                                                                 ]
                                                                },
                                                        "delete":  {
                                                                       "operationId":  "delete",
                                                                       "summary":  "Deactivate a service account",
                                                                       "parameters":  [
                                                                                          {
                                                                                              "name":  "id",
                                                                                              "required":  true,
                                                                                              "in":  "path",
                                                                                              "schema":  {
                                                                                                             "type":  "string"
                                                                                                         }
                                                                                          }
                                                                                      ],
                                                                       "responses":  {
                                                                                         "200":  {
                                                                                                     "description":  "Service account deactivated successfully"
                                                                                                 },
                                                                                         "404":  {
                                                                                                     "description":  "Service account not found"
                                                                                                 }
                                                                                     },
                                                                       "tags":  [
                                                                                    "Service Accounts"
                                                                                ],
                                                                       "security":  [
                                                                                        {
                                                                                            "bearer":  [

                                                                                                       ]
                                                                                        }
                                                                                    ]
                                                                   }
                                                    },
                  "/api/v1/fx/rates/{baseCurrency}/{targetCurrency}":  {
                                                                           "get":  {
                                                                                       "operationId":  "getFxRate",
                                                                                       "summary":  "Get FX rate for a currency pair",
                                                                                       "description":  "Retrieve the current exchange rate between two currencies.\n\n    **Rate Sources:**\n    - Multiple data providers aggregated\n    - Real-time market rates\n    - Cached for performance (5-minute TTL)\n    - Fallback sources for reliability\n\n    **Supported Pairs:**\n    - All major fiat currencies\n    - Bitcoin (BTC) to fiat\n    - Cross-rates calculated automatically\n    - Updated every minute\n\n    **Rate Calculation:**\n    - Median of multiple sources\n    - Outlier detection and removal\n    - Confidence scoring\n    - Historical validation\n\n    **Performance:**\n    - Average response time \u003c 50ms\n    - 99.9% availability SLA\n    - Automatic failover\n    - Rate limiting: 100 req/min",
                                                                                       "parameters":  [
                                                                                                          {
                                                                                                              "name":  "baseCurrency",
                                                                                                              "required":  true,
                                                                                                              "in":  "path",
                                                                                                              "description":  "Base currency code (from currency)",
                                                                                                              "schema":  {
                                                                                                                             "enum":  [
                                                                                                                                          "BTC",
                                                                                                                                          "KES",
                                                                                                                                          "USDT",
                                                                                                                                          "USD",
                                                                                                                                          "UNRECOGNIZED"
                                                                                                                                      ],
                                                                                                                             "type":  "string"
                                                                                                                         }
                                                                                                          },
                                                                                                          {
                                                                                                              "name":  "targetCurrency",
                                                                                                              "required":  true,
                                                                                                              "in":  "path",
                                                                                                              "description":  "Target currency code (to currency)",
                                                                                                              "schema":  {
                                                                                                                             "enum":  [
                                                                                                                                          "BTC",
                                                                                                                                          "KES",
                                                                                                                                          "USDT",
                                                                                                                                          "USD",
                                                                                                                                          "UNRECOGNIZED"
                                                                                                                                      ],
                                                                                                                             "type":  "string"
                                                                                                                         }
                                                                                                          }
                                                                                                      ],
                                                                                       "responses":  {
                                                                                                         "200":  {
                                                                                                                     "description":  "FX rate retrieved successfully",
                                                                                                                     "content":  {
                                                                                                                                     "application/json":  {
                                                                                                                                                              "schema":  {
                                                                                                                                                                             "$ref":  "#/components/schemas/FxRateResponse"
                                                                                                                                                                         }
                                                                                                                                                          }
                                                                                                                                 }
                                                                                                                 },
                                                                                                         "400":  {
                                                                                                                     "description":  "Bad request - Invalid currency pair or unsupported currencies"
                                                                                                                 },
                                                                                                         "404":  {
                                                                                                                     "description":  "Not found - FX rate not available for this pair"
                                                                                                                 },
                                                                                                         "429":  {
                                                                                                                     "description":  "Too many requests - Rate limit exceeded"
                                                                                                                 },
                                                                                                         "503":  {
                                                                                                                     "description":  "Service unavailable - FX service temporarily unavailable"
                                                                                                                 }
                                                                                                     },
                                                                                       "tags":  [
                                                                                                    "fx"
                                                                                                ],
                                                                                       "security":  [
                                                                                                        {
                                                                                                            "bearer":  [

                                                                                                                       ]
                                                                                                        }
                                                                                                    ]
                                                                                   }
                                                                       },
                  "/api/v1/fx/rates/{baseCurrency}/{targetCurrency}/detailed":  {
                                                                                    "get":  {
                                                                                                "operationId":  "getDetailedFxRate",
                                                                                                "summary":  "Get detailed aggregated FX rate with all sources",
                                                                                                "description":  "Retrieve comprehensive FX rate information including all data sources and confidence metrics.\n\n    **Detailed Information:**\n    - Rate from each individual source\n    - Aggregated median rate\n    - Confidence score (0-100)\n    - Source timestamps\n    - Variance metrics\n    - Historical comparison\n\n    **Source Providers:**\n    - CoinGecko API\n    - Binance Exchange\n    - CoinMarketCap\n    - Local bank rates (fiat)\n    - Weighted by reliability\n\n    **Confidence Calculation:**\n    - Based on source agreement\n    - Time since last update\n    - Historical volatility\n    - Number of sources\n\n    **Use Cases:**\n    - Rate transparency\n    - Audit requirements\n    - Source debugging\n    - Rate validation",
                                                                                                "parameters":  [
                                                                                                                   {
                                                                                                                       "name":  "baseCurrency",
                                                                                                                       "required":  true,
                                                                                                                       "in":  "path",
                                                                                                                       "description":  "Base currency code (from currency)",
                                                                                                                       "schema":  {
                                                                                                                                      "enum":  [
                                                                                                                                                   "BTC",
                                                                                                                                                   "KES",
                                                                                                                                                   "USDT",
                                                                                                                                                   "USD",
                                                                                                                                                   "UNRECOGNIZED"
                                                                                                                                               ],
                                                                                                                                      "type":  "string"
                                                                                                                                  }
                                                                                                                   },
                                                                                                                   {
                                                                                                                       "name":  "targetCurrency",
                                                                                                                       "required":  true,
                                                                                                                       "in":  "path",
                                                                                                                       "description":  "Target currency code (to currency)",
                                                                                                                       "schema":  {
                                                                                                                                      "enum":  [
                                                                                                                                                   "BTC",
                                                                                                                                                   "KES",
                                                                                                                                                   "USDT",
                                                                                                                                                   "USD",
                                                                                                                                                   "UNRECOGNIZED"
                                                                                                                                               ],
                                                                                                                                      "type":  "string"
                                                                                                                                  }
                                                                                                                   }
                                                                                                               ],
                                                                                                "responses":  {
                                                                                                                  "200":  {
                                                                                                                              "description":  "Detailed FX rate with source breakdown retrieved successfully",
                                                                                                                              "content":  {
                                                                                                                                              "application/json":  {
                                                                                                                                                                       "schema":  {
                                                                                                                                                                                      "$ref":  "#/components/schemas/AggregatedFxRateResponse"
                                                                                                                                                                                  }
                                                                                                                                                                   }
                                                                                                                                          }
                                                                                                                          },
                                                                                                                  "400":  {
                                                                                                                              "description":  "Bad request - Invalid currency pair"
                                                                                                                          },
                                                                                                                  "503":  {
                                                                                                                              "description":  "Service unavailable - Unable to fetch from sources"
                                                                                                                          }
                                                                                                              },
                                                                                                "tags":  [
                                                                                                             "fx"
                                                                                                         ],
                                                                                                "security":  [
                                                                                                                 {
                                                                                                                     "bearer":  [

                                                                                                                                ]
                                                                                                                 }
                                                                                                             ]
                                                                                            }
                                                                                },
                  "/api/v1/fx/supported-pairs":  {
                                                     "get":  {
                                                                 "operationId":  "getSupportedPairs",
                                                                 "summary":  "Get list of supported currency pairs",
                                                                 "description":  "Retrieve all currency pairs supported by the FX service.\n\n    **Pair Categories:**\n    - Fiat to Fiat (USD/EUR, etc.)\n    - Crypto to Fiat (BTC/USD, etc.)\n    - All combinations available\n    - Bidirectional support\n\n    **Response Format:**\n    - Array of pair strings\n    - Format: \"BASE/TARGET\"\n    - Sorted alphabetically\n    - Updated dynamically\n\n    **Supported Currencies:**\n    - USD (US Dollar)\n    - EUR (Euro)\n    - GBP (British Pound)\n    - KES (Kenyan Shilling)\n    - NGN (Nigerian Naira)\n    - ZAR (South African Rand)\n    - GHS (Ghanaian Cedi)\n    - BTC (Bitcoin)\n\n    **Updates:**\n    - New pairs added automatically\n    - Deprecated pairs removed\n    - Check regularly for changes",
                                                                 "parameters":  [

                                                                                ],
                                                                 "responses":  {
                                                                                   "200":  {
                                                                                               "description":  "List of supported currency pairs retrieved successfully",
                                                                                               "schema":  {
                                                                                                              "type":  "object",
                                                                                                              "properties":  {
                                                                                                                                 "pairs":  {
                                                                                                                                               "type":  "array",
                                                                                                                                               "items":  {
                                                                                                                                                             "type":  "string"
                                                                                                                                                         },
                                                                                                                                               "example":  [
                                                                                                                                                               "BTC/USD",
                                                                                                                                                               "BTC/KES",
                                                                                                                                                               "USD/KES",
                                                                                                                                                               "EUR/USD"
                                                                                                                                                           ]
                                                                                                                                           },
                                                                                                                                 "total":  {
                                                                                                                                               "type":  "number",
                                                                                                                                               "example":  56
                                                                                                                                           }
                                                                                                                             }
                                                                                                          },
                                                                                               "content":  {
                                                                                                               "application/json":  {
                                                                                                                                        "schema":  {
                                                                                                                                                       "$ref":  "#/components/schemas/SupportedPairsResponse"
                                                                                                                                                   }
                                                                                                                                    }
                                                                                                           }
                                                                                           }
                                                                               },
                                                                 "tags":  [
                                                                              "fx"
                                                                          ],
                                                                 "security":  [
                                                                                  {
                                                                                      "bearer":  [

                                                                                                 ]
                                                                                  }
                                                                              ]
                                                             }
                                                 },
                  "/api/v1/fx/health":  {
                                            "get":  {
                                                        "operationId":  "getHealthStatus",
                                                        "summary":  "Get health status of all FX rate sources",
                                                        "description":  "Check the operational status of all FX rate data sources.\n\n    **Health Checks:**\n    - API connectivity\n    - Response time\n    - Data freshness\n    - Error rates\n    - Rate limits\n\n    **Source Status:**\n    - healthy: Operating normally\n    - degraded: Slow or partial data\n    - unhealthy: Failed or unavailable\n    - disabled: Manually turned off\n\n    **Metrics Included:**\n    - Last successful fetch\n    - Average response time\n    - Success rate (24h)\n    - Current rate limit status\n\n    **Monitoring:**\n    - Real-time health checks\n    - Automatic failover\n    - Alert thresholds\n    - Historical tracking",
                                                        "parameters":  [

                                                                       ],
                                                        "responses":  {
                                                                          "200":  {
                                                                                      "description":  "Health status of all FX sources retrieved successfully",
                                                                                      "schema":  {
                                                                                                     "type":  "object",
                                                                                                     "properties":  {
                                                                                                                        "healthy":  {
                                                                                                                                        "type":  "boolean",
                                                                                                                                        "example":  true,
                                                                                                                                        "description":  "Overall system health"
                                                                                                                                    },
                                                                                                                        "sources":  {
                                                                                                                                        "type":  "object",
                                                                                                                                        "properties":  {
                                                                                                                                                           "coingecko":  {
                                                                                                                                                                             "type":  "object",
                                                                                                                                                                             "properties":  "@{status=; enabled=; lastCheck=; responseTime=; successRate=}"
                                                                                                                                                                         }
                                                                                                                                                       }
                                                                                                                                    },
                                                                                                                        "timestamp":  {
                                                                                                                                          "type":  "string",
                                                                                                                                          "format":  "date-time"
                                                                                                                                      }
                                                                                                                    }
                                                                                                 },
                                                                                      "content":  {
                                                                                                      "application/json":  {
                                                                                                                               "schema":  {
                                                                                                                                              "$ref":  "#/components/schemas/HealthStatusResponse"
                                                                                                                                          }
                                                                                                                           }
                                                                                                  }
                                                                                  }
                                                                      },
                                                        "tags":  [
                                                                     "fx"
                                                                 ],
                                                        "security":  [
                                                                         {
                                                                             "bearer":  [

                                                                                        ]
                                                                         }
                                                                     ]
                                                    }
                                        },
                  "/api/v1/fx/admin/cache/metrics":  {
                                                         "get":  {
                                                                     "operationId":  "getCacheMetrics",
                                                                     "summary":  "Get FX rate cache metrics (Admin)",
                                                                     "description":  "Retrieve detailed metrics about the FX rate cache performance.\n\n    **Cache Metrics:**\n    - Total entries in cache\n    - Cache hit/miss ratio\n    - Memory usage\n    - Stale entries count\n    - Average entry age\n\n    **Performance Metrics:**\n    - Cache response time\n    - Refresh frequency\n    - Eviction statistics\n    - Storage efficiency\n\n    **Monitoring:**\n    - Real-time statistics\n    - Historical trends\n    - Alert thresholds\n    - Optimization suggestions\n\n    **Admin Features:**\n    - Requires FX_RATES_MANAGE permission\n    - Detailed debugging info\n    - Cache tuning parameters",
                                                                     "parameters":  [

                                                                                    ],
                                                                     "responses":  {
                                                                                       "200":  {
                                                                                                   "description":  "Cache metrics retrieved successfully",
                                                                                                   "schema":  {
                                                                                                                  "type":  "object",
                                                                                                                  "properties":  {
                                                                                                                                     "totalEntries":  {
                                                                                                                                                          "type":  "number",
                                                                                                                                                          "example":  150,
                                                                                                                                                          "description":  "Total cache entries"
                                                                                                                                                      },
                                                                                                                                     "fxCacheEntries":  {
                                                                                                                                                            "type":  "number",
                                                                                                                                                            "example":  120,
                                                                                                                                                            "description":  "FX rate specific entries"
                                                                                                                                                        },
                                                                                                                                     "staleCacheEntries":  {
                                                                                                                                                               "type":  "number",
                                                                                                                                                               "example":  5,
                                                                                                                                                               "description":  "Entries needing refresh"
                                                                                                                                                           },
                                                                                                                                     "hitRate":  {
                                                                                                                                                     "type":  "number",
                                                                                                                                                     "example":  94.5,
                                                                                                                                                     "description":  "Cache hit rate percentage"
                                                                                                                                                 },
                                                                                                                                     "memoryUsageMB":  {
                                                                                                                                                           "type":  "number",
                                                                                                                                                           "example":  12.5,
                                                                                                                                                           "description":  "Memory usage in MB"
                                                                                                                                                       },
                                                                                                                                     "averageEntryAgeSeconds":  {
                                                                                                                                                                    "type":  "number",
                                                                                                                                                                    "example":  180,
                                                                                                                                                                    "description":  "Average age of entries"
                                                                                                                                                                }
                                                                                                                                 }
                                                                                                              },
                                                                                                   "content":  {
                                                                                                                   "application/json":  {
                                                                                                                                            "schema":  {
                                                                                                                                                           "$ref":  "#/components/schemas/CacheMetricsResponse"
                                                                                                                                                       }
                                                                                                                                        }
                                                                                                               }
                                                                                               },
                                                                                       "401":  {
                                                                                                   "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                               },
                                                                                       "403":  {
                                                                                                   "description":  "Forbidden - Insufficient permissions (requires FX_RATES_MANAGE)"
                                                                                               }
                                                                                   },
                                                                     "tags":  [
                                                                                  "fx"
                                                                              ],
                                                                     "security":  [
                                                                                      {
                                                                                          "bearer":  [

                                                                                                     ]
                                                                                      }
                                                                                  ]
                                                                 }
                                                     },
                  "/api/v1/fx/admin/cache/clear":  {
                                                       "post":  {
                                                                    "operationId":  "clearCache",
                                                                    "summary":  "Clear FX rate cache (Admin)",
                                                                    "description":  "Clear all cached FX rates forcing fresh data retrieval.\n\n    **Cache Clear Effects:**\n    - All cached rates removed\n    - Next requests fetch fresh data\n    - Temporary performance impact\n    - Sources re-queried\n\n    **Use Cases:**\n    - Resolve stale data issues\n    - Force immediate updates\n    - Testing and debugging\n    - After configuration changes\n\n    **Important Notes:**\n    - May cause rate limit issues\n    - Increases response time temporarily\n    - Affects all users\n    - Logged for audit\n\n    **Best Practices:**\n    - Use sparingly\n    - Preferably during low traffic\n    - Monitor after clearing\n    - Consider selective clear instead",
                                                                    "parameters":  [

                                                                                   ],
                                                                    "responses":  {
                                                                                      "200":  {
                                                                                                  "description":  "Cache cleared successfully",
                                                                                                  "content":  {
                                                                                                                  "application/json":  {
                                                                                                                                           "schema":  {
                                                                                                                                                          "type":  "object",
                                                                                                                                                          "properties":  {
                                                                                                                                                                             "message":  {
                                                                                                                                                                                             "type":  "string",
                                                                                                                                                                                             "example":  "FX rate cache cleared successfully"
                                                                                                                                                                                         },
                                                                                                                                                                             "entriesCleared":  {
                                                                                                                                                                                                    "type":  "number",
                                                                                                                                                                                                    "example":  150
                                                                                                                                                                                                },
                                                                                                                                                                             "timestamp":  {
                                                                                                                                                                                               "type":  "string",
                                                                                                                                                                                               "format":  "date-time"
                                                                                                                                                                                           }
                                                                                                                                                                         }
                                                                                                                                                      }
                                                                                                                                       }
                                                                                                              }
                                                                                              },
                                                                                      "401":  {
                                                                                                  "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                              },
                                                                                      "403":  {
                                                                                                  "description":  "Forbidden - Insufficient permissions (requires FX_RATES_MANAGE)"
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "fx"
                                                                             ],
                                                                    "security":  [
                                                                                     {
                                                                                         "bearer":  [

                                                                                                    ]
                                                                                     }
                                                                                 ]
                                                                }
                                                   },
                  "/api/v1/fx/admin/cache/preload":  {
                                                         "post":  {
                                                                      "operationId":  "preloadCache",
                                                                      "summary":  "Preload common FX rates (Admin)",
                                                                      "description":  "Preload frequently used FX rates into cache for optimal performance.\n\n    **Preload Strategy:**\n    - Most common currency pairs\n    - High-volume corridors\n    - All BTC pairs\n    - Major fiat crosses\n\n    **Pairs Preloaded:**\n    - BTC to all fiat currencies\n    - USD to all currencies\n    - Regional popular pairs\n    - Approximately 30-40 pairs\n\n    **Benefits:**\n    - Improved response times\n    - Reduced source queries\n    - Better user experience\n    - Load distribution\n\n    **Execution:**\n    - Async background process\n    - Progress tracking available\n    - Respects rate limits\n    - Skips recently cached\n\n    **Best Practices:**\n    - Run during off-peak hours\n    - After cache clear\n    - Daily scheduled job\n    - Monitor completion",
                                                                      "parameters":  [

                                                                                     ],
                                                                      "responses":  {
                                                                                        "200":  {
                                                                                                    "description":  "Cache preload initiated successfully",
                                                                                                    "content":  {
                                                                                                                    "application/json":  {
                                                                                                                                             "schema":  {
                                                                                                                                                            "type":  "object",
                                                                                                                                                            "properties":  {
                                                                                                                                                                               "message":  {
                                                                                                                                                                                               "type":  "string",
                                                                                                                                                                                               "example":  "Common FX rates preloaded successfully"
                                                                                                                                                                                           },
                                                                                                                                                                               "pairsLoaded":  {
                                                                                                                                                                                                   "type":  "number",
                                                                                                                                                                                                   "example":  35
                                                                                                                                                                                               },
                                                                                                                                                                               "duration":  {
                                                                                                                                                                                                "type":  "number",
                                                                                                                                                                                                "example":  2500,
                                                                                                                                                                                                "description":  "Time taken in milliseconds"
                                                                                                                                                                                            },
                                                                                                                                                                               "timestamp":  {
                                                                                                                                                                                                 "type":  "string",
                                                                                                                                                                                                 "format":  "date-time"
                                                                                                                                                                                             }
                                                                                                                                                                           }
                                                                                                                                                        }
                                                                                                                                         }
                                                                                                                }
                                                                                                },
                                                                                        "401":  {
                                                                                                    "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                                },
                                                                                        "403":  {
                                                                                                    "description":  "Forbidden - Insufficient permissions (requires FX_RATES_MANAGE)"
                                                                                                },
                                                                                        "503":  {
                                                                                                    "description":  "Service unavailable - FX sources temporarily unavailable"
                                                                                                }
                                                                                    },
                                                                      "tags":  [
                                                                                   "fx"
                                                                               ],
                                                                      "security":  [
                                                                                       {
                                                                                           "bearer":  [

                                                                                                      ]
                                                                                       }
                                                                                   ]
                                                                  }
                                                     },
                  "/api/v1/swap":  {
                                       "post":  {
                                                    "operationId":  "createSwap",
                                                    "summary":  "Create a new swap",
                                                    "description":  "Create a new cryptocurrency swap with dual-mode agent selection:\n\n      **Direct Selection Mode:**\n      - Provide \u0027agentId\u0027 to select a specific agent\n      - Swap moves immediately to \u0027agent_matched\u0027 state\n      - Agent liquidity is locked upon creation\n\n      **Auto-Selection Mode:**\n      - Omit \u0027agentId\u0027 for automatic agent matching\n      - Swap remains in \u0027created\u0027 state for agents to claim\n      - Traditional agent discovery and claiming process\n\n      The system automatically routes to the appropriate flow based on the presence of \u0027agentId\u0027.",
                                                    "parameters":  [

                                                                   ],
                                                    "requestBody":  {
                                                                        "required":  true,
                                                                        "content":  {
                                                                                        "application/json":  {
                                                                                                                 "schema":  {
                                                                                                                                "$ref":  "#/components/schemas/CreateSwapDto"
                                                                                                                            }
                                                                                                             }
                                                                                    }
                                                                    },
                                                    "responses":  {
                                                                      "201":  {
                                                                                  "description":  "Swap created successfully",
                                                                                  "content":  {
                                                                                                  "application/json":  {
                                                                                                                           "schema":  {
                                                                                                                                          "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                      }
                                                                                                                       }
                                                                                              }
                                                                              },
                                                                      "400":  {
                                                                                  "description":  "Invalid swap data or agent validation failed"
                                                                              },
                                                                      "404":  {
                                                                                  "description":  "Pre-selected agent not found"
                                                                              }
                                                                  },
                                                    "tags":  [
                                                                 "swap"
                                                             ],
                                                    "security":  [
                                                                     {
                                                                         "bearer":  [

                                                                                    ]
                                                                     }
                                                                 ]
                                                },
                                       "get":  {
                                                   "operationId":  "listSwaps",
                                                   "summary":  "List user\u0027s swaps",
                                                   "description":  "Retrieve a paginated list of swaps for the authenticated user. Includes both initiated swaps and agent-handled swaps.",
                                                   "parameters":  [
                                                                      {
                                                                          "name":  "page",
                                                                          "required":  false,
                                                                          "in":  "query",
                                                                          "description":  "Page number for pagination",
                                                                          "schema":  {
                                                                                         "minimum":  1,
                                                                                         "default":  "1",
                                                                                         "example":  "1",
                                                                                         "type":  "string"
                                                                                     }
                                                                      },
                                                                      {
                                                                          "name":  "limit",
                                                                          "required":  false,
                                                                          "in":  "query",
                                                                          "description":  "Number of items per page",
                                                                          "schema":  {
                                                                                         "minimum":  1,
                                                                                         "maximum":  100,
                                                                                         "default":  "10",
                                                                                         "example":  "10",
                                                                                         "type":  "string"
                                                                                     }
                                                                      },
                                                                      {
                                                                          "name":  "state",
                                                                          "required":  false,
                                                                          "in":  "query",
                                                                          "description":  "Filter by swap state",
                                                                          "schema":  {
                                                                                         "$ref":  "#/components/schemas/SwapState"
                                                                                     }
                                                                      },
                                                                      {
                                                                          "name":  "type",
                                                                          "required":  false,
                                                                          "in":  "query",
                                                                          "description":  "Filter by swap type",
                                                                          "schema":  {
                                                                                         "$ref":  "#/components/schemas/SwapType"
                                                                                     }
                                                                      },
                                                                      {
                                                                          "name":  "reference",
                                                                          "required":  false,
                                                                          "in":  "query",
                                                                          "description":  "Filter by swap reference",
                                                                          "schema":  {
                                                                                         "pattern":  "^[A-Z0-9-]+$",
                                                                                         "example":  "SWAP-2024-001234",
                                                                                         "type":  "string"
                                                                                     }
                                                                      },
                                                                      {
                                                                          "name":  "agentId",
                                                                          "required":  false,
                                                                          "in":  "query",
                                                                          "description":  "Filter by agent ID",
                                                                          "schema":  {
                                                                                         "format":  "uuid",
                                                                                         "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                         "type":  "string"
                                                                                     }
                                                                      },
                                                                      {
                                                                          "name":  "currency",
                                                                          "required":  false,
                                                                          "in":  "query",
                                                                          "description":  "Filter by currency code (ISO 4217)",
                                                                          "schema":  {
                                                                                         "pattern":  "^[A-Z]{3}$",
                                                                                         "example":  "USD",
                                                                                         "type":  "string"
                                                                                     }
                                                                      }
                                                                  ],
                                                   "responses":  {
                                                                     "200":  {
                                                                                 "description":  "Successfully retrieved user\u0027s swaps",
                                                                                 "content":  {
                                                                                                 "application/json":  {
                                                                                                                          "schema":  {
                                                                                                                                         "$ref":  "#/components/schemas/PaginatedSwapsResponse"
                                                                                                                                     }
                                                                                                                      }
                                                                                             }
                                                                             },
                                                                     "401":  {
                                                                                 "description":  "Unauthorized - Invalid or missing authentication token"
                                                                             },
                                                                     "403":  {
                                                                                 "description":  "Forbidden - User authentication required"
                                                                             }
                                                                 },
                                                   "tags":  [
                                                                "swap"
                                                            ],
                                                   "security":  [
                                                                    {
                                                                        "bearer":  [

                                                                                   ]
                                                                    }
                                                                ]
                                               }
                                   },
                  "/api/v1/swap/metrics":  {
                                               "get":  {
                                                           "operationId":  "getSwapMetrics",
                                                           "summary":  "Get swap metrics (admin)",
                                                           "description":  "Retrieve comprehensive metrics and analytics for swap operations. Requires admin permissions.",
                                                           "parameters":  [
                                                                              {
                                                                                  "name":  "currency",
                                                                                  "required":  false,
                                                                                  "in":  "query",
                                                                                  "description":  "Filter by currency code",
                                                                                  "schema":  {
                                                                                                 "example":  "USD",
                                                                                                 "type":  "string"
                                                                                             }
                                                                              },
                                                                              {
                                                                                  "name":  "type",
                                                                                  "required":  false,
                                                                                  "in":  "query",
                                                                                  "description":  "Filter by swap type",
                                                                                  "schema":  {
                                                                                                 "enum":  [
                                                                                                              "onramp",
                                                                                                              "offramp"
                                                                                                          ],
                                                                                                 "type":  "string"
                                                                                             }
                                                                              },
                                                                              {
                                                                                  "name":  "agentId",
                                                                                  "required":  false,
                                                                                  "in":  "query",
                                                                                  "description":  "Filter metrics by specific agent",
                                                                                  "schema":  {
                                                                                                 "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                 "type":  "string"
                                                                                             }
                                                                              },
                                                                              {
                                                                                  "name":  "endDate",
                                                                                  "required":  false,
                                                                                  "in":  "query",
                                                                                  "description":  "End date for metrics period (ISO 8601)",
                                                                                  "schema":  {
                                                                                                 "example":  "2024-01-31",
                                                                                                 "type":  "string"
                                                                                             }
                                                                              },
                                                                              {
                                                                                  "name":  "startDate",
                                                                                  "required":  false,
                                                                                  "in":  "query",
                                                                                  "description":  "Start date for metrics period (ISO 8601)",
                                                                                  "schema":  {
                                                                                                 "example":  "2024-01-01",
                                                                                                 "type":  "string"
                                                                                             }
                                                                              }
                                                                          ],
                                                           "responses":  {
                                                                             "200":  {
                                                                                         "description":  "Swap metrics retrieved successfully",
                                                                                         "content":  {
                                                                                                         "application/json":  {
                                                                                                                                  "schema":  {
                                                                                                                                                 "type":  "object",
                                                                                                                                                 "properties":  {
                                                                                                                                                                    "totalVolume":  {
                                                                                                                                                                                        "type":  "number",
                                                                                                                                                                                        "description":  "Total transaction volume",
                                                                                                                                                                                        "example":  1000000
                                                                                                                                                                                    },
                                                                                                                                                                    "totalSwaps":  {
                                                                                                                                                                                       "type":  "number",
                                                                                                                                                                                       "description":  "Total number of swaps",
                                                                                                                                                                                       "example":  150
                                                                                                                                                                                   },
                                                                                                                                                                    "activeSwaps":  {
                                                                                                                                                                                        "type":  "number",
                                                                                                                                                                                        "description":  "Currently active swaps",
                                                                                                                                                                                        "example":  12
                                                                                                                                                                                    },
                                                                                                                                                                    "completedToday":  {
                                                                                                                                                                                           "type":  "number",
                                                                                                                                                                                           "description":  "Swaps completed today",
                                                                                                                                                                                           "example":  8
                                                                                                                                                                                       },
                                                                                                                                                                    "averageCompletionTime":  {
                                                                                                                                                                                                  "type":  "number",
                                                                                                                                                                                                  "description":  "Average completion time in minutes",
                                                                                                                                                                                                  "example":  45.5
                                                                                                                                                                                              },
                                                                                                                                                                    "successRate":  {
                                                                                                                                                                                        "type":  "number",
                                                                                                                                                                                        "description":  "Success rate percentage",
                                                                                                                                                                                        "example":  98.5
                                                                                                                                                                                    },
                                                                                                                                                                    "volumeByType":  {
                                                                                                                                                                                         "type":  "object",
                                                                                                                                                                                         "properties":  "@{onramp=; offramp=}"
                                                                                                                                                                                     },
                                                                                                                                                                    "popularCurrencyPairs":  {
                                                                                                                                                                                                 "type":  "array",
                                                                                                                                                                                                 "items":  "@{type=object; properties=}"
                                                                                                                                                                                             }
                                                                                                                                                                }
                                                                                                                                             }
                                                                                                                              }
                                                                                                     }
                                                                                     },
                                                                             "401":  {
                                                                                         "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                     },
                                                                             "403":  {
                                                                                         "description":  "Forbidden - Insufficient permissions to access metrics"
                                                                                     }
                                                                         },
                                                           "tags":  [
                                                                        "swap"
                                                                    ],
                                                           "security":  [
                                                                            {
                                                                                "bearer":  [

                                                                                           ]
                                                                            }
                                                                        ]
                                                       }
                                           },
                  "/api/v1/swap/list":  {
                                            "get":  {
                                                        "operationId":  "listAllSwaps",
                                                        "summary":  "List all swaps (admin)",
                                                        "description":  "Retrieve a paginated list of all swaps in the system. This endpoint requires admin permissions and supports advanced filtering options.",
                                                        "parameters":  [
                                                                           {
                                                                               "name":  "page",
                                                                               "required":  false,
                                                                               "in":  "query",
                                                                               "description":  "Page number for pagination",
                                                                               "schema":  {
                                                                                              "minimum":  1,
                                                                                              "default":  "1",
                                                                                              "example":  "1",
                                                                                              "type":  "string"
                                                                                          }
                                                                           },
                                                                           {
                                                                               "name":  "limit",
                                                                               "required":  false,
                                                                               "in":  "query",
                                                                               "description":  "Number of items per page",
                                                                               "schema":  {
                                                                                              "minimum":  1,
                                                                                              "maximum":  100,
                                                                                              "default":  "10",
                                                                                              "example":  "10",
                                                                                              "type":  "string"
                                                                                          }
                                                                           },
                                                                           {
                                                                               "name":  "state",
                                                                               "required":  false,
                                                                               "in":  "query",
                                                                               "description":  "Filter by swap state",
                                                                               "schema":  {
                                                                                              "$ref":  "#/components/schemas/SwapState"
                                                                                          }
                                                                           },
                                                                           {
                                                                               "name":  "type",
                                                                               "required":  false,
                                                                               "in":  "query",
                                                                               "description":  "Filter by swap type",
                                                                               "schema":  {
                                                                                              "$ref":  "#/components/schemas/SwapType"
                                                                                          }
                                                                           },
                                                                           {
                                                                               "name":  "reference",
                                                                               "required":  false,
                                                                               "in":  "query",
                                                                               "description":  "Filter by swap reference",
                                                                               "schema":  {
                                                                                              "pattern":  "^[A-Z0-9-]+$",
                                                                                              "example":  "SWAP-2024-001234",
                                                                                              "type":  "string"
                                                                                          }
                                                                           },
                                                                           {
                                                                               "name":  "agentId",
                                                                               "required":  false,
                                                                               "in":  "query",
                                                                               "description":  "Filter by agent ID",
                                                                               "schema":  {
                                                                                              "format":  "uuid",
                                                                                              "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                              "type":  "string"
                                                                                          }
                                                                           },
                                                                           {
                                                                               "name":  "currency",
                                                                               "required":  false,
                                                                               "in":  "query",
                                                                               "description":  "Filter by currency code (ISO 4217)",
                                                                               "schema":  {
                                                                                              "pattern":  "^[A-Z]{3}$",
                                                                                              "example":  "USD",
                                                                                              "type":  "string"
                                                                                          }
                                                                           }
                                                                       ],
                                                        "responses":  {
                                                                          "200":  {
                                                                                      "description":  "Successfully retrieved paginated list of swaps",
                                                                                      "content":  {
                                                                                                      "application/json":  {
                                                                                                                               "schema":  {
                                                                                                                                              "$ref":  "#/components/schemas/PaginatedSwapsResponse"
                                                                                                                                          }
                                                                                                                           }
                                                                                                  }
                                                                                  },
                                                                          "401":  {
                                                                                      "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                  },
                                                                          "403":  {
                                                                                      "description":  "Forbidden - Insufficient permissions to list all swaps"
                                                                                  }
                                                                      },
                                                        "tags":  [
                                                                     "swap"
                                                                 ],
                                                        "security":  [
                                                                         {
                                                                             "bearer":  [

                                                                                        ]
                                                                         }
                                                                     ]
                                                    }
                                        },
                  "/api/v1/swap/export":  {
                                              "get":  {
                                                          "operationId":  "exportSwaps",
                                                          "summary":  "Export swaps to CSV (admin)",
                                                          "description":  "Export filtered swap data to a CSV file for reporting and analysis. Requires both transaction read and export permissions.",
                                                          "parameters":  [
                                                                             {
                                                                                 "name":  "page",
                                                                                 "required":  false,
                                                                                 "in":  "query",
                                                                                 "description":  "Page number for pagination",
                                                                                 "schema":  {
                                                                                                "minimum":  1,
                                                                                                "default":  "1",
                                                                                                "example":  "1",
                                                                                                "type":  "string"
                                                                                            }
                                                                             },
                                                                             {
                                                                                 "name":  "limit",
                                                                                 "required":  false,
                                                                                 "in":  "query",
                                                                                 "description":  "Number of items per page",
                                                                                 "schema":  {
                                                                                                "minimum":  1,
                                                                                                "maximum":  100,
                                                                                                "default":  "10",
                                                                                                "example":  "10",
                                                                                                "type":  "string"
                                                                                            }
                                                                             },
                                                                             {
                                                                                 "name":  "state",
                                                                                 "required":  false,
                                                                                 "in":  "query",
                                                                                 "description":  "Filter by swap state",
                                                                                 "schema":  {
                                                                                                "$ref":  "#/components/schemas/SwapState"
                                                                                            }
                                                                             },
                                                                             {
                                                                                 "name":  "type",
                                                                                 "required":  false,
                                                                                 "in":  "query",
                                                                                 "description":  "Filter by swap type",
                                                                                 "schema":  {
                                                                                                "$ref":  "#/components/schemas/SwapType"
                                                                                            }
                                                                             },
                                                                             {
                                                                                 "name":  "reference",
                                                                                 "required":  false,
                                                                                 "in":  "query",
                                                                                 "description":  "Filter by swap reference",
                                                                                 "schema":  {
                                                                                                "pattern":  "^[A-Z0-9-]+$",
                                                                                                "example":  "SWAP-2024-001234",
                                                                                                "type":  "string"
                                                                                            }
                                                                             },
                                                                             {
                                                                                 "name":  "agentId",
                                                                                 "required":  false,
                                                                                 "in":  "query",
                                                                                 "description":  "Filter by agent ID",
                                                                                 "schema":  {
                                                                                                "format":  "uuid",
                                                                                                "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                "type":  "string"
                                                                                            }
                                                                             },
                                                                             {
                                                                                 "name":  "currency",
                                                                                 "required":  false,
                                                                                 "in":  "query",
                                                                                 "description":  "Filter by currency code (ISO 4217)",
                                                                                 "schema":  {
                                                                                                "pattern":  "^[A-Z]{3}$",
                                                                                                "example":  "USD",
                                                                                                "type":  "string"
                                                                                            }
                                                                             }
                                                                         ],
                                                          "responses":  {
                                                                            "200":  {
                                                                                        "description":  "CSV file generated successfully",
                                                                                        "content":  {
                                                                                                        "text/csv":  {
                                                                                                                         "schema":  {
                                                                                                                                        "type":  "string",
                                                                                                                                        "example":  "ID,Reference,Type,State,Amount,Currency,Bitcoin Amount,Exchange Rate,Agent ID,Beneficiary ID,Payment Channel,Created At,Completed At\n550e8400-e29b-41d4-a716-446655440000,SWAP-2024-001234,onramp,completed,10000,USD,500000,45000.50,agent-123,user-456,bank_transfer,2024-01-15T10:30:00.000Z,2024-01-15T11:00:00.000Z"
                                                                                                                                    }
                                                                                                                     }
                                                                                                    },
                                                                                        "headers":  {
                                                                                                        "Content-Type":  {
                                                                                                                             "description":  "Media type of the response",
                                                                                                                             "schema":  {
                                                                                                                                            "type":  "string",
                                                                                                                                            "example":  "text/csv"
                                                                                                                                        }
                                                                                                                         },
                                                                                                        "Content-Disposition":  {
                                                                                                                                    "description":  "Attachment with filename",
                                                                                                                                    "schema":  {
                                                                                                                                                   "type":  "string",
                                                                                                                                                   "example":  "attachment; filename=\"swaps-export-2024-01-15.csv\""
                                                                                                                                               }
                                                                                                                                }
                                                                                                    }
                                                                                    },
                                                                            "401":  {
                                                                                        "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                    },
                                                                            "403":  {
                                                                                        "description":  "Forbidden - Insufficient permissions to export data"
                                                                                    }
                                                                        },
                                                          "tags":  [
                                                                       "swap"
                                                                   ],
                                                          "security":  [
                                                                           {
                                                                               "bearer":  [

                                                                                          ]
                                                                           }
                                                                       ]
                                                      }
                                          },
                  "/api/v1/swap/{id}":  {
                                            "get":  {
                                                        "operationId":  "getSwap",
                                                        "summary":  "Get swap details",
                                                        "description":  "Retrieve detailed information about a specific swap. Users can only access swaps they are involved in (as beneficiary or agent).",
                                                        "parameters":  [
                                                                           {
                                                                               "name":  "id",
                                                                               "required":  true,
                                                                               "in":  "path",
                                                                               "description":  "Unique identifier of the swap",
                                                                               "schema":  {
                                                                                              "format":  "uuid",
                                                                                              "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                              "type":  "string"
                                                                                          }
                                                                           }
                                                                       ],
                                                        "responses":  {
                                                                          "200":  {
                                                                                      "description":  "Swap details retrieved successfully",
                                                                                      "content":  {
                                                                                                      "application/json":  {
                                                                                                                               "schema":  {
                                                                                                                                              "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                          }
                                                                                                                           }
                                                                                                  }
                                                                                  },
                                                                          "401":  {
                                                                                      "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                  },
                                                                          "403":  {
                                                                                      "description":  "Forbidden - You do not have access to this swap"
                                                                                  },
                                                                          "404":  {
                                                                                      "description":  "Swap not found - The specified swap ID does not exist"
                                                                                  }
                                                                      },
                                                        "tags":  [
                                                                     "swap"
                                                                 ],
                                                        "security":  [
                                                                         {
                                                                             "bearer":  [

                                                                                        ]
                                                                         }
                                                                     ]
                                                    }
                                        },
                  "/api/v1/swap/admin/{id}":  {
                                                  "get":  {
                                                              "operationId":  "getSwapAdmin",
                                                              "summary":  "Get any swap details (Admin)",
                                                              "description":  "Admin endpoint to retrieve detailed information about any swap in the system. No access restrictions.",
                                                              "parameters":  [
                                                                                 {
                                                                                     "name":  "id",
                                                                                     "required":  true,
                                                                                     "in":  "path",
                                                                                     "description":  "Unique identifier of the swap",
                                                                                     "schema":  {
                                                                                                    "format":  "uuid",
                                                                                                    "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                    "type":  "string"
                                                                                                }
                                                                                 }
                                                                             ],
                                                              "responses":  {
                                                                                "200":  {
                                                                                            "description":  "Swap details retrieved successfully",
                                                                                            "content":  {
                                                                                                            "application/json":  {
                                                                                                                                     "schema":  {
                                                                                                                                                    "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                                }
                                                                                                                                 }
                                                                                                        }
                                                                                        },
                                                                                "401":  {
                                                                                            "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                        },
                                                                                "403":  {
                                                                                            "description":  "Forbidden - Admin permissions required"
                                                                                        },
                                                                                "404":  {
                                                                                            "description":  "Swap not found - The specified swap ID does not exist"
                                                                                        }
                                                                            },
                                                              "tags":  [
                                                                           "swap"
                                                                       ],
                                                              "security":  [
                                                                               {
                                                                                   "bearer":  [

                                                                                              ]
                                                                               }
                                                                           ]
                                                          }
                                              },
                  "/api/v1/swap/{id}/claim":  {
                                                  "post":  {
                                                               "operationId":  "claimSwap",
                                                               "summary":  "Claim a swap as an agent",
                                                               "description":  "Allows an agent to claim an available swap. The swap must be in \u0027created\u0027 state and the agent must meet eligibility requirements including available liquidity.",
                                                               "parameters":  [
                                                                                  {
                                                                                      "name":  "id",
                                                                                      "required":  true,
                                                                                      "in":  "path",
                                                                                      "description":  "Unique identifier of the swap to claim",
                                                                                      "schema":  {
                                                                                                     "format":  "uuid",
                                                                                                     "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                     "type":  "string"
                                                                                                 }
                                                                                  }
                                                                              ],
                                                               "responses":  {
                                                                                 "200":  {
                                                                                             "description":  "Swap claimed successfully - The swap has been assigned to the agent",
                                                                                             "content":  {
                                                                                                             "application/json":  {
                                                                                                                                      "schema":  {
                                                                                                                                                     "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                                 }
                                                                                                                                  }
                                                                                                         }
                                                                                         },
                                                                                 "400":  {
                                                                                             "description":  "Bad request - Swap already claimed, agent not eligible, or insufficient liquidity",
                                                                                             "content":  {
                                                                                                             "application/json":  {
                                                                                                                                      "schema":  {
                                                                                                                                                     "type":  "object",
                                                                                                                                                     "properties":  {
                                                                                                                                                                        "statusCode":  {
                                                                                                                                                                                           "type":  "number",
                                                                                                                                                                                           "example":  400
                                                                                                                                                                                       },
                                                                                                                                                                        "message":  {
                                                                                                                                                                                        "type":  "string",
                                                                                                                                                                                        "example":  "Swap already claimed by another agent"
                                                                                                                                                                                    },
                                                                                                                                                                        "error":  {
                                                                                                                                                                                      "type":  "string",
                                                                                                                                                                                      "example":  "Bad Request"
                                                                                                                                                                                  }
                                                                                                                                                                    }
                                                                                                                                                 }
                                                                                                                                  }
                                                                                                         }
                                                                                         },
                                                                                 "401":  {
                                                                                             "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                         },
                                                                                 "403":  {
                                                                                             "description":  "Forbidden - User does not have an agent profile"
                                                                                         },
                                                                                 "404":  {
                                                                                             "description":  "Swap not found - The specified swap ID does not exist"
                                                                                         }
                                                                             },
                                                               "tags":  [
                                                                            "swap"
                                                                        ],
                                                               "security":  [
                                                                                {
                                                                                    "bearer":  [

                                                                                               ]
                                                                                }
                                                                            ]
                                                           }
                                              },
                  "/api/v1/swap/{id}/confirm":  {
                                                    "post":  {
                                                                 "operationId":  "confirmSwap",
                                                                 "summary":  "Confirm payment for a swap",
                                                                 "description":  "Confirm that payment has been sent (for user) or received (for agent). Both parties must confirm for the swap to complete.",
                                                                 "parameters":  [
                                                                                    {
                                                                                        "name":  "id",
                                                                                        "required":  true,
                                                                                        "in":  "path",
                                                                                        "description":  "Unique identifier of the swap",
                                                                                        "schema":  {
                                                                                                       "format":  "uuid",
                                                                                                       "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                       "type":  "string"
                                                                                                   }
                                                                                    }
                                                                                ],
                                                                 "requestBody":  {
                                                                                     "required":  true,
                                                                                     "description":  "Confirmation details including the role of the confirming party",
                                                                                     "content":  {
                                                                                                     "application/json":  {
                                                                                                                              "schema":  {
                                                                                                                                             "$ref":  "#/components/schemas/ConfirmSwapDto"
                                                                                                                                         }
                                                                                                                          }
                                                                                                 }
                                                                                 },
                                                                 "responses":  {
                                                                                   "200":  {
                                                                                               "description":  "Payment confirmed successfully",
                                                                                               "content":  {
                                                                                                               "application/json":  {
                                                                                                                                        "schema":  {
                                                                                                                                                       "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                                   }
                                                                                                                                    }
                                                                                                           }
                                                                                           },
                                                                                   "400":  {
                                                                                               "description":  "Bad request - Invalid confirmation or swap state"
                                                                                           },
                                                                                   "401":  {
                                                                                               "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                           },
                                                                                   "403":  {
                                                                                               "description":  "Forbidden - Not authorized to confirm this swap"
                                                                                           },
                                                                                   "404":  {
                                                                                               "description":  "Swap not found - The specified swap ID does not exist"
                                                                                           }
                                                                               },
                                                                 "tags":  [
                                                                              "swap"
                                                                          ],
                                                                 "security":  [
                                                                                  {
                                                                                      "bearer":  [

                                                                                                 ]
                                                                                  }
                                                                              ]
                                                             }
                                                },
                  "/api/v1/swap/{id}/cancel":  {
                                                   "post":  {
                                                                "operationId":  "cancelSwap",
                                                                "summary":  "Cancel a swap",
                                                                "description":  "Cancel an active swap. Only possible before payment confirmations and in specific states (created, agent_matched, escrow_pending, escrow_locked).",
                                                                "parameters":  [
                                                                                   {
                                                                                       "name":  "id",
                                                                                       "required":  true,
                                                                                       "in":  "path",
                                                                                       "description":  "Unique identifier of the swap to cancel",
                                                                                       "schema":  {
                                                                                                      "format":  "uuid",
                                                                                                      "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                   }
                                                                               ],
                                                                "responses":  {
                                                                                  "200":  {
                                                                                              "description":  "Swap cancelled successfully - Any locked liquidity has been released",
                                                                                              "content":  {
                                                                                                              "application/json":  {
                                                                                                                                       "schema":  {
                                                                                                                                                      "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                                  }
                                                                                                                                   }
                                                                                                          }
                                                                                          },
                                                                                  "400":  {
                                                                                              "description":  "Bad request - Swap cannot be cancelled in current state or after confirmations",
                                                                                              "content":  {
                                                                                                              "application/json":  {
                                                                                                                                       "schema":  {
                                                                                                                                                      "type":  "object",
                                                                                                                                                      "properties":  {
                                                                                                                                                                         "statusCode":  {
                                                                                                                                                                                            "type":  "number",
                                                                                                                                                                                            "example":  400
                                                                                                                                                                                        },
                                                                                                                                                                         "message":  {
                                                                                                                                                                                         "type":  "string",
                                                                                                                                                                                         "example":  "Cannot cancel swap after payment confirmation"
                                                                                                                                                                                     },
                                                                                                                                                                         "error":  {
                                                                                                                                                                                       "type":  "string",
                                                                                                                                                                                       "example":  "Bad Request"
                                                                                                                                                                                   }
                                                                                                                                                                     }
                                                                                                                                                  }
                                                                                                                                   }
                                                                                                          }
                                                                                          },
                                                                                  "401":  {
                                                                                              "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                          },
                                                                                  "403":  {
                                                                                              "description":  "Forbidden - Not authorized to cancel this swap"
                                                                                          },
                                                                                  "404":  {
                                                                                              "description":  "Swap not found - The specified swap ID does not exist"
                                                                                          }
                                                                              },
                                                                "tags":  [
                                                                             "swap"
                                                                         ],
                                                                "security":  [
                                                                                 {
                                                                                     "bearer":  [

                                                                                                ]
                                                                                 }
                                                                             ]
                                                            }
                                               },
                  "/api/v1/swap/{id}/dispute":  {
                                                    "post":  {
                                                                 "operationId":  "disputeSwap",
                                                                 "summary":  "Dispute a swap",
                                                                 "description":  "Initiate a dispute for a swap when there\u0027s a disagreement about payment. Triggers arbitration process.",
                                                                 "parameters":  [
                                                                                    {
                                                                                        "name":  "id",
                                                                                        "required":  true,
                                                                                        "in":  "path",
                                                                                        "description":  "Unique identifier of the swap to dispute",
                                                                                        "schema":  {
                                                                                                       "format":  "uuid",
                                                                                                       "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                       "type":  "string"
                                                                                                   }
                                                                                    }
                                                                                ],
                                                                 "requestBody":  {
                                                                                     "required":  true,
                                                                                     "description":  "Dispute details including reason and supporting evidence",
                                                                                     "content":  {
                                                                                                     "application/json":  {
                                                                                                                              "schema":  {
                                                                                                                                             "$ref":  "#/components/schemas/DisputeSwapDto"
                                                                                                                                         }
                                                                                                                          }
                                                                                                 }
                                                                                 },
                                                                 "responses":  {
                                                                                   "200":  {
                                                                                               "description":  "Dispute initiated successfully - Swap moved to dispute resolution process",
                                                                                               "content":  {
                                                                                                               "application/json":  {
                                                                                                                                        "schema":  {
                                                                                                                                                       "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                                   }
                                                                                                                                    }
                                                                                                           }
                                                                                           },
                                                                                   "400":  {
                                                                                               "description":  "Bad request - Swap cannot be disputed in current state"
                                                                                           },
                                                                                   "401":  {
                                                                                               "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                           },
                                                                                   "403":  {
                                                                                               "description":  "Forbidden - Not authorized to dispute this swap"
                                                                                           },
                                                                                   "404":  {
                                                                                               "description":  "Swap not found - The specified swap ID does not exist"
                                                                                           }
                                                                               },
                                                                 "tags":  [
                                                                              "swap"
                                                                          ],
                                                                 "security":  [
                                                                                  {
                                                                                      "bearer":  [

                                                                                                 ]
                                                                                  }
                                                                              ]
                                                             }
                                                },
                  "/api/v1/swap/{id}/payment-proof":  {
                                                          "post":  {
                                                                       "operationId":  "submitPaymentProof",
                                                                       "summary":  "Submit payment proof for a swap",
                                                                       "description":  "Submit proof of payment such as transaction receipts, confirmation codes, or bank statements. Used during dispute resolution.",
                                                                       "parameters":  [
                                                                                          {
                                                                                              "name":  "id",
                                                                                              "required":  true,
                                                                                              "in":  "path",
                                                                                              "description":  "Unique identifier of the swap",
                                                                                              "schema":  {
                                                                                                             "format":  "uuid",
                                                                                                             "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                             "type":  "string"
                                                                                                         }
                                                                                          }
                                                                                      ],
                                                                       "requestBody":  {
                                                                                           "required":  true,
                                                                                           "description":  "Payment proof including transaction ID and supporting evidence",
                                                                                           "content":  {
                                                                                                           "application/json":  {
                                                                                                                                    "schema":  {
                                                                                                                                                   "$ref":  "#/components/schemas/SubmitPaymentProofDto"
                                                                                                                                               }
                                                                                                                                }
                                                                                                       }
                                                                                       },
                                                                       "responses":  {
                                                                                         "200":  {
                                                                                                     "description":  "Payment proof submitted successfully",
                                                                                                     "content":  {
                                                                                                                     "application/json":  {
                                                                                                                                              "schema":  {
                                                                                                                                                             "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                                         }
                                                                                                                                          }
                                                                                                                 }
                                                                                                 },
                                                                                         "400":  {
                                                                                                     "description":  "Bad request - Invalid proof format or swap state"
                                                                                                 },
                                                                                         "401":  {
                                                                                                     "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                                 },
                                                                                         "403":  {
                                                                                                     "description":  "Forbidden - Not authorized to submit proof for this swap"
                                                                                                 },
                                                                                         "404":  {
                                                                                                     "description":  "Swap not found - The specified swap ID does not exist"
                                                                                                 }
                                                                                     },
                                                                       "tags":  [
                                                                                    "swap"
                                                                                ],
                                                                       "security":  [
                                                                                        {
                                                                                            "bearer":  [

                                                                                                       ]
                                                                                        }
                                                                                    ]
                                                                   }
                                                      },
                  "/api/v1/swap/{id}/dispute-evidence":  {
                                                             "post":  {
                                                                          "operationId":  "submitDisputeEvidence",
                                                                          "summary":  "Submit evidence for a disputed swap",
                                                                          "description":  "Submit additional evidence during the dispute resolution process. Only available when swap is in dispute evidence collection phase.",
                                                                          "parameters":  [
                                                                                             {
                                                                                                 "name":  "id",
                                                                                                 "required":  true,
                                                                                                 "in":  "path",
                                                                                                 "description":  "Unique identifier of the disputed swap",
                                                                                                 "schema":  {
                                                                                                                "format":  "uuid",
                                                                                                                "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                                "type":  "string"
                                                                                                            }
                                                                                             }
                                                                                         ],
                                                                          "requestBody":  {
                                                                                              "required":  true,
                                                                                              "description":  "Additional evidence including documents and communication logs",
                                                                                              "content":  {
                                                                                                              "application/json":  {
                                                                                                                                       "schema":  {
                                                                                                                                                      "$ref":  "#/components/schemas/SubmitDisputeEvidenceDto"
                                                                                                                                                  }
                                                                                                                                   }
                                                                                                          }
                                                                                          },
                                                                          "responses":  {
                                                                                            "200":  {
                                                                                                        "description":  "Evidence submitted successfully for review",
                                                                                                        "content":  {
                                                                                                                        "application/json":  {
                                                                                                                                                 "schema":  {
                                                                                                                                                                "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                                            }
                                                                                                                                             }
                                                                                                                    }
                                                                                                    },
                                                                                            "400":  {
                                                                                                        "description":  "Bad request - Swap not in evidence collection phase or invalid evidence format"
                                                                                                    },
                                                                                            "401":  {
                                                                                                        "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                                    },
                                                                                            "403":  {
                                                                                                        "description":  "Forbidden - Not authorized to submit evidence for this swap"
                                                                                                    },
                                                                                            "404":  {
                                                                                                        "description":  "Swap not found - The specified swap ID does not exist"
                                                                                                    }
                                                                                        },
                                                                          "tags":  [
                                                                                       "swap"
                                                                                   ],
                                                                          "security":  [
                                                                                           {
                                                                                               "bearer":  [

                                                                                                          ]
                                                                                           }
                                                                                       ]
                                                                      }
                                                         },
                  "/api/v1/swap/webhook/agent":  {
                                                     "post":  {
                                                                  "operationId":  "handleAgentWebhook",
                                                                  "summary":  "Handle agent payment webhook",
                                                                  "description":  "Process webhook notifications from payment providers for automated agent payments. Should include HMAC signature validation in production.",
                                                                  "parameters":  [

                                                                                 ],
                                                                  "requestBody":  {
                                                                                      "required":  true,
                                                                                      "description":  "Webhook payload from payment provider",
                                                                                      "content":  {
                                                                                                      "application/json":  {
                                                                                                                               "schema":  {
                                                                                                                                              "$ref":  "#/components/schemas/AgentWebhookDto"
                                                                                                                                          }
                                                                                                                           }
                                                                                                  }
                                                                                  },
                                                                  "responses":  {
                                                                                    "200":  {
                                                                                                "description":  "Webhook processed successfully"
                                                                                            },
                                                                                    "400":  {
                                                                                                "description":  "Bad request - Invalid webhook payload or signature"
                                                                                            },
                                                                                    "404":  {
                                                                                                "description":  "Swap not found - Referenced swap does not exist"
                                                                                            },
                                                                                    "500":  {
                                                                                                "description":  "Internal server error - Failed to process webhook"
                                                                                            }
                                                                                },
                                                                  "tags":  [
                                                                               "swap"
                                                                           ]
                                                              }
                                                 },
                  "/api/v1/swap/admin/{id}/resolve-dispute":  {
                                                                  "post":  {
                                                                               "operationId":  "resolveDispute",
                                                                               "summary":  "Resolve a disputed swap (Admin/Arbitrator only)",
                                                                               "description":  "Resolve a disputed swap after reviewing evidence from both parties. Supports full resolution in favor of either party or partial settlements.",
                                                                               "parameters":  [
                                                                                                  {
                                                                                                      "name":  "id",
                                                                                                      "required":  true,
                                                                                                      "in":  "path",
                                                                                                      "description":  "Unique identifier of the disputed swap",
                                                                                                      "schema":  {
                                                                                                                     "format":  "uuid",
                                                                                                                     "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                                     "type":  "string"
                                                                                                                 }
                                                                                                  }
                                                                                              ],
                                                                               "requestBody":  {
                                                                                                   "required":  true,
                                                                                                   "description":  "Dispute resolution details including decision and reasoning",
                                                                                                   "content":  {
                                                                                                                   "application/json":  {
                                                                                                                                            "schema":  {
                                                                                                                                                           "$ref":  "#/components/schemas/ResolveDisputeDto"
                                                                                                                                                       }
                                                                                                                                        }
                                                                                                               }
                                                                                               },
                                                                               "responses":  {
                                                                                                 "200":  {
                                                                                                             "description":  "Dispute resolved successfully - Funds distributed according to resolution",
                                                                                                             "content":  {
                                                                                                                             "application/json":  {
                                                                                                                                                      "schema":  {
                                                                                                                                                                     "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                                                 }
                                                                                                                                                  }
                                                                                                                         }
                                                                                                         },
                                                                                                 "400":  {
                                                                                                             "description":  "Bad request - Swap not in dispute state or invalid resolution parameters"
                                                                                                         },
                                                                                                 "401":  {
                                                                                                             "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                                         },
                                                                                                 "403":  {
                                                                                                             "description":  "Forbidden - Insufficient permissions to resolve disputes"
                                                                                                         },
                                                                                                 "404":  {
                                                                                                             "description":  "Swap not found - The specified swap ID does not exist"
                                                                                                         }
                                                                                             },
                                                                               "tags":  [
                                                                                            "swap"
                                                                                        ],
                                                                               "security":  [
                                                                                                {
                                                                                                    "bearer":  [

                                                                                                               ]
                                                                                                }
                                                                                            ]
                                                                           }
                                                              },
                  "/api/v1/swap/admin/disputed":  {
                                                      "get":  {
                                                                  "operationId":  "listDisputedSwaps",
                                                                  "summary":  "List all disputed swaps (Admin/Arbitrator only)",
                                                                  "description":  "Retrieve all swaps currently in dispute status requiring arbitration. Used by admin dashboard for dispute management.",
                                                                  "parameters":  [

                                                                                 ],
                                                                  "responses":  {
                                                                                    "200":  {
                                                                                                "description":  "Successfully retrieved list of disputed swaps",
                                                                                                "content":  {
                                                                                                                "application/json":  {
                                                                                                                                         "schema":  {
                                                                                                                                                        "type":  "array",
                                                                                                                                                        "items":  {
                                                                                                                                                                      "$ref":  "#/components/schemas/"
                                                                                                                                                                  }
                                                                                                                                                    }
                                                                                                                                     }
                                                                                                            }
                                                                                            },
                                                                                    "401":  {
                                                                                                "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                            },
                                                                                    "403":  {
                                                                                                "description":  "Forbidden - Insufficient permissions to view disputed swaps"
                                                                                            }
                                                                                },
                                                                  "tags":  [
                                                                               "swap"
                                                                           ],
                                                                  "security":  [
                                                                                   {
                                                                                       "bearer":  [

                                                                                                  ]
                                                                                   }
                                                                               ]
                                                              }
                                                  },
                  "/api/v1/swap/admin/{id}/transfer":  {
                                                           "post":  {
                                                                        "operationId":  "transferSwap",
                                                                        "summary":  "Transfer swap to another agent (Admin only)",
                                                                        "description":  "Transfer an active swap from one agent to another. Only possible before payment confirmations. Used for load balancing or agent unavailability.",
                                                                        "parameters":  [
                                                                                           {
                                                                                               "name":  "id",
                                                                                               "required":  true,
                                                                                               "in":  "path",
                                                                                               "description":  "Unique identifier of the swap to transfer",
                                                                                               "schema":  {
                                                                                                              "format":  "uuid",
                                                                                                              "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                              "type":  "string"
                                                                                                          }
                                                                                           }
                                                                                       ],
                                                                        "requestBody":  {
                                                                                            "required":  true,
                                                                                            "description":  "Transfer details including new agent ID and reason",
                                                                                            "content":  {
                                                                                                            "application/json":  {
                                                                                                                                     "schema":  {
                                                                                                                                                    "$ref":  "#/components/schemas/TransferSwapDto"
                                                                                                                                                }
                                                                                                                                 }
                                                                                                        }
                                                                                        },
                                                                        "responses":  {
                                                                                          "200":  {
                                                                                                      "description":  "Swap transferred successfully to new agent",
                                                                                                      "content":  {
                                                                                                                      "application/json":  {
                                                                                                                                               "schema":  {
                                                                                                                                                              "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                                                          }
                                                                                                                                           }
                                                                                                                  }
                                                                                                  },
                                                                                          "400":  {
                                                                                                      "description":  "Bad request - Cannot transfer swap after payment or in current state"
                                                                                                  },
                                                                                          "401":  {
                                                                                                      "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                                  },
                                                                                          "403":  {
                                                                                                      "description":  "Forbidden - Insufficient permissions to transfer swaps"
                                                                                                  },
                                                                                          "404":  {
                                                                                                      "description":  "Swap not found or new agent not found"
                                                                                                  }
                                                                                      },
                                                                        "tags":  [
                                                                                     "swap"
                                                                                 ],
                                                                        "security":  [
                                                                                         {
                                                                                             "bearer":  [

                                                                                                        ]
                                                                                         }
                                                                                     ]
                                                                    }
                                                       },
                  "/api/v1/bitcoin/info":  {
                                               "get":  {
                                                           "operationId":  "getInfo",
                                                           "summary":  "Get Lightning provider information",
                                                           "parameters":  [

                                                                          ],
                                                           "responses":  {
                                                                             "200":  {
                                                                                         "description":  "Provider information retrieved successfully",
                                                                                         "content":  {
                                                                                                         "application/json":  {
                                                                                                                                  "schema":  {
                                                                                                                                                 "$ref":  "#/components/schemas/LightningInfoResponse"
                                                                                                                                             }
                                                                                                                              }
                                                                                                     }
                                                                                     }
                                                                         },
                                                           "tags":  [
                                                                        "bitcoin"
                                                                    ],
                                                           "security":  [
                                                                            {
                                                                                "bearer":  [

                                                                                           ]
                                                                            }
                                                                        ]
                                                       }
                                           },
                  "/api/v1/bitcoin/balance":  {
                                                  "get":  {
                                                              "operationId":  "getBalance",
                                                              "summary":  "Get Lightning wallet balance",
                                                              "parameters":  [

                                                                             ],
                                                              "responses":  {
                                                                                "200":  {
                                                                                            "description":  "Balance retrieved successfully",
                                                                                            "content":  {
                                                                                                            "application/json":  {
                                                                                                                                     "schema":  {
                                                                                                                                                    "$ref":  "#/components/schemas/LightningBalanceResponse"
                                                                                                                                                }
                                                                                                                                 }
                                                                                                        }
                                                                                        }
                                                                            },
                                                              "tags":  [
                                                                           "bitcoin"
                                                                       ],
                                                              "security":  [
                                                                               {
                                                                                   "bearer":  [

                                                                                              ]
                                                                               }
                                                                           ]
                                                          }
                                              },
                  "/api/v1/bitcoin/health":  {
                                                 "get":  {
                                                             "operationId":  "getHealth",
                                                             "summary":  "Check Lightning service health",
                                                             "parameters":  [

                                                                            ],
                                                             "responses":  {
                                                                               "200":  {
                                                                                           "description":  "Health check completed",
                                                                                           "content":  {
                                                                                                           "application/json":  {
                                                                                                                                    "schema":  {
                                                                                                                                                   "$ref":  "#/components/schemas/LightningHealthResponse"
                                                                                                                                               }
                                                                                                                                }
                                                                                                       }
                                                                                       }
                                                                           },
                                                             "tags":  [
                                                                          "bitcoin"
                                                                      ],
                                                             "security":  [
                                                                              {
                                                                                  "bearer":  [

                                                                                             ]
                                                                              }
                                                                          ]
                                                         }
                                             },
                  "/api/v1/bitcoin/health/detailed":  {
                                                          "get":  {
                                                                      "operationId":  "getDetailedHealth",
                                                                      "summary":  "Get detailed health information",
                                                                      "parameters":  [

                                                                                     ],
                                                                      "responses":  {
                                                                                        "200":  {
                                                                                                    "description":  "Detailed health information retrieved"
                                                                                                }
                                                                                    },
                                                                      "tags":  [
                                                                                   "bitcoin"
                                                                               ],
                                                                      "security":  [
                                                                                       {
                                                                                           "bearer":  [

                                                                                                      ]
                                                                                       }
                                                                                   ]
                                                                  }
                                                      },
                  "/api/v1/bitcoin/health/all":  {
                                                     "get":  {
                                                                 "operationId":  "getAllProvidersHealth",
                                                                 "summary":  "Get health status for all providers",
                                                                 "parameters":  [

                                                                                ],
                                                                 "responses":  {
                                                                                   "200":  {
                                                                                               "description":  "All providers health status retrieved"
                                                                                           }
                                                                               },
                                                                 "tags":  [
                                                                              "bitcoin"
                                                                          ],
                                                                 "security":  [
                                                                                  {
                                                                                      "bearer":  [

                                                                                                 ]
                                                                                  }
                                                                              ]
                                                             }
                                                 },
                  "/api/v1/bitcoin/invoice":  {
                                                  "post":  {
                                                               "operationId":  "generateInvoice",
                                                               "summary":  "Generate Lightning invoice",
                                                               "parameters":  [

                                                                              ],
                                                               "requestBody":  {
                                                                                   "required":  true,
                                                                                   "content":  {
                                                                                                   "application/json":  {
                                                                                                                            "schema":  {
                                                                                                                                           "$ref":  "#/components/schemas/GenerateInvoiceDto"
                                                                                                                                       }
                                                                                                                        }
                                                                                               }
                                                                               },
                                                               "responses":  {
                                                                                 "201":  {
                                                                                             "description":  "Invoice generated successfully",
                                                                                             "content":  {
                                                                                                             "application/json":  {
                                                                                                                                      "schema":  {
                                                                                                                                                     "$ref":  "#/components/schemas/LightningInvoiceResponse"
                                                                                                                                                 }
                                                                                                                                  }
                                                                                                         }
                                                                                         }
                                                                             },
                                                               "tags":  [
                                                                            "bitcoin"
                                                                        ],
                                                               "security":  [
                                                                                {
                                                                                    "bearer":  [

                                                                                               ]
                                                                                }
                                                                            ]
                                                           }
                                              },
                  "/api/v1/bitcoin/invoice/validate":  {
                                                           "post":  {
                                                                        "operationId":  "validateInvoice",
                                                                        "summary":  "Validate Lightning invoice",
                                                                        "parameters":  [

                                                                                       ],
                                                                        "requestBody":  {
                                                                                            "required":  true,
                                                                                            "content":  {
                                                                                                            "application/json":  {
                                                                                                                                     "schema":  {
                                                                                                                                                    "$ref":  "#/components/schemas/ValidateInvoiceDto"
                                                                                                                                                }
                                                                                                                                 }
                                                                                                        }
                                                                                        },
                                                                        "responses":  {
                                                                                          "200":  {
                                                                                                      "description":  "Invoice validation completed"
                                                                                                  }
                                                                                      },
                                                                        "tags":  [
                                                                                     "bitcoin"
                                                                                 ],
                                                                        "security":  [
                                                                                         {
                                                                                             "bearer":  [

                                                                                                        ]
                                                                                         }
                                                                                     ]
                                                                    }
                                                       },
                  "/api/v1/bitcoin/pay":  {
                                              "post":  {
                                                           "operationId":  "payInvoice",
                                                           "summary":  "Pay a Lightning invoice or Lightning address",
                                                           "parameters":  [

                                                                          ],
                                                           "requestBody":  {
                                                                               "required":  true,
                                                                               "content":  {
                                                                                               "application/json":  {
                                                                                                                        "schema":  {
                                                                                                                                       "$ref":  "#/components/schemas/PayInvoiceDto"
                                                                                                                                   }
                                                                                                                    }
                                                                                           }
                                                                           },
                                                           "responses":  {
                                                                             "201":  {
                                                                                         "description":  "Payment completed successfully"
                                                                                     }
                                                                         },
                                                           "tags":  [
                                                                        "bitcoin"
                                                                    ],
                                                           "security":  [
                                                                            {
                                                                                "bearer":  [

                                                                                           ]
                                                                            }
                                                                        ]
                                                       }
                                          },
                  "/api/v1/bitcoin/address":  {
                                                  "post":  {
                                                               "operationId":  "generateFundingAddress",
                                                               "summary":  "Generate funding address",
                                                               "parameters":  [

                                                                              ],
                                                               "requestBody":  {
                                                                                   "required":  true,
                                                                                   "content":  {
                                                                                                   "application/json":  {
                                                                                                                            "schema":  {
                                                                                                                                           "$ref":  "#/components/schemas/GenerateAddressDto"
                                                                                                                                       }
                                                                                                                        }
                                                                                               }
                                                                               },
                                                               "responses":  {
                                                                                 "201":  {
                                                                                             "description":  "Funding address generated successfully",
                                                                                             "content":  {
                                                                                                             "application/json":  {
                                                                                                                                      "schema":  {
                                                                                                                                                     "$ref":  "#/components/schemas/LightningAddressResponse"
                                                                                                                                                 }
                                                                                                                                  }
                                                                                                         }
                                                                                         }
                                                                             },
                                                               "tags":  [
                                                                            "bitcoin"
                                                                        ],
                                                               "security":  [
                                                                                {
                                                                                    "bearer":  [

                                                                                               ]
                                                                                }
                                                                            ]
                                                           }
                                              },
                  "/api/v1/bitcoin/address/{address}":  {
                                                            "get":  {
                                                                        "operationId":  "getFundingStatus",
                                                                        "summary":  "Get funding status for address",
                                                                        "parameters":  [
                                                                                           {
                                                                                               "name":  "address",
                                                                                               "required":  true,
                                                                                               "in":  "path",
                                                                                               "schema":  {
                                                                                                              "type":  "string"
                                                                                                          }
                                                                                           }
                                                                                       ],
                                                                        "responses":  {
                                                                                          "200":  {
                                                                                                      "description":  "Funding status retrieved successfully",
                                                                                                      "content":  {
                                                                                                                      "application/json":  {
                                                                                                                                               "schema":  {
                                                                                                                                                              "$ref":  "#/components/schemas/BitcoinFundingResponse"
                                                                                                                                                          }
                                                                                                                                           }
                                                                                                                  }
                                                                                                  }
                                                                                      },
                                                                        "tags":  [
                                                                                     "bitcoin"
                                                                                 ],
                                                                        "security":  [
                                                                                         {
                                                                                             "bearer":  [

                                                                                                        ]
                                                                                         }
                                                                                     ]
                                                                    }
                                                        },
                  "/api/v1/bitcoin/addresses":  {
                                                    "get":  {
                                                                "operationId":  "getFundingAddresses",
                                                                "summary":  "Get all funding addresses",
                                                                "parameters":  [

                                                                               ],
                                                                "responses":  {
                                                                                  "200":  {
                                                                                              "description":  "Funding addresses retrieved successfully",
                                                                                              "content":  {
                                                                                                              "application/json":  {
                                                                                                                                       "schema":  {
                                                                                                                                                      "type":  "array",
                                                                                                                                                      "items":  {
                                                                                                                                                                    "$ref":  "#/components/schemas/BitcoinFundingResponse"
                                                                                                                                                                }
                                                                                                                                                  }
                                                                                                                                   }
                                                                                                          }
                                                                                          }
                                                                              },
                                                                "tags":  [
                                                                             "bitcoin"
                                                                         ],
                                                                "security":  [
                                                                                 {
                                                                                     "bearer":  [

                                                                                                ]
                                                                                 }
                                                                             ]
                                                            }
                                                },
                  "/api/v1/bitcoin/withdraw":  {
                                                   "post":  {
                                                                "operationId":  "withdrawToAddress",
                                                                "summary":  "Withdraw to Bitcoin address",
                                                                "parameters":  [

                                                                               ],
                                                                "requestBody":  {
                                                                                    "required":  true,
                                                                                    "content":  {
                                                                                                    "application/json":  {
                                                                                                                             "schema":  {
                                                                                                                                            "$ref":  "#/components/schemas/WithdrawDto"
                                                                                                                                        }
                                                                                                                         }
                                                                                                }
                                                                                },
                                                                "responses":  {
                                                                                  "201":  {
                                                                                              "description":  "Withdrawal initiated successfully",
                                                                                              "content":  {
                                                                                                              "application/json":  {
                                                                                                                                       "schema":  {
                                                                                                                                                      "$ref":  "#/components/schemas/LightningWithdrawalResponse"
                                                                                                                                                  }
                                                                                                                                   }
                                                                                                          }
                                                                                          }
                                                                              },
                                                                "tags":  [
                                                                             "bitcoin"
                                                                         ],
                                                                "security":  [
                                                                                 {
                                                                                     "bearer":  [

                                                                                                ]
                                                                                 }
                                                                             ]
                                                            }
                                               },
                  "/api/v1/bitcoin/withdrawal/{txid}":  {
                                                            "get":  {
                                                                        "operationId":  "getWithdrawalStatus",
                                                                        "summary":  "Get withdrawal status",
                                                                        "parameters":  [
                                                                                           {
                                                                                               "name":  "txid",
                                                                                               "required":  true,
                                                                                               "in":  "path",
                                                                                               "schema":  {
                                                                                                              "type":  "string"
                                                                                                          }
                                                                                           }
                                                                                       ],
                                                                        "responses":  {
                                                                                          "200":  {
                                                                                                      "description":  "Withdrawal status retrieved successfully",
                                                                                                      "content":  {
                                                                                                                      "application/json":  {
                                                                                                                                               "schema":  {
                                                                                                                                                              "$ref":  "#/components/schemas/LightningWithdrawalResponse"
                                                                                                                                                          }
                                                                                                                                           }
                                                                                                                  }
                                                                                                  }
                                                                                      },
                                                                        "tags":  [
                                                                                     "bitcoin"
                                                                                 ],
                                                                        "security":  [
                                                                                         {
                                                                                             "bearer":  [

                                                                                                        ]
                                                                                         }
                                                                                     ]
                                                                    }
                                                        },
                  "/api/v1/bitcoin/withdrawals":  {
                                                      "get":  {
                                                                  "operationId":  "getWithdrawals",
                                                                  "summary":  "Get recent withdrawals",
                                                                  "parameters":  [
                                                                                     {
                                                                                         "name":  "limit",
                                                                                         "required":  false,
                                                                                         "in":  "query",
                                                                                         "description":  "Number of withdrawals to return",
                                                                                         "schema":  {
                                                                                                        "example":  50,
                                                                                                        "type":  "number"
                                                                                                    }
                                                                                     }
                                                                                 ],
                                                                  "responses":  {
                                                                                    "200":  {
                                                                                                "description":  "Withdrawals retrieved successfully",
                                                                                                "content":  {
                                                                                                                "application/json":  {
                                                                                                                                         "schema":  {
                                                                                                                                                        "type":  "array",
                                                                                                                                                        "items":  {
                                                                                                                                                                      "$ref":  "#/components/schemas/LightningWithdrawalResponse"
                                                                                                                                                                  }
                                                                                                                                                    }
                                                                                                                                     }
                                                                                                            }
                                                                                            }
                                                                                },
                                                                  "tags":  [
                                                                               "bitcoin"
                                                                           ],
                                                                  "security":  [
                                                                                   {
                                                                                       "bearer":  [

                                                                                                  ]
                                                                                   }
                                                                               ]
                                                              }
                                                  },
                  "/api/v1/bitcoin/channels":  {
                                                   "get":  {
                                                               "operationId":  "getChannels",
                                                               "summary":  "Get all channels",
                                                               "parameters":  [

                                                                              ],
                                                               "responses":  {
                                                                                 "200":  {
                                                                                             "description":  "Channels retrieved successfully",
                                                                                             "content":  {
                                                                                                             "application/json":  {
                                                                                                                                      "schema":  {
                                                                                                                                                     "type":  "array",
                                                                                                                                                     "items":  {
                                                                                                                                                                   "$ref":  "#/components/schemas/LightningChannelResponse"
                                                                                                                                                               }
                                                                                                                                                 }
                                                                                                                                  }
                                                                                                         }
                                                                                         }
                                                                             },
                                                               "tags":  [
                                                                            "bitcoin"
                                                                        ],
                                                               "security":  [
                                                                                {
                                                                                    "bearer":  [

                                                                                               ]
                                                                                }
                                                                            ]
                                                           }
                                               },
                  "/api/v1/bitcoin/channel/{channelId}":  {
                                                              "get":  {
                                                                          "operationId":  "getChannel",
                                                                          "summary":  "Get specific channel details",
                                                                          "parameters":  [
                                                                                             {
                                                                                                 "name":  "channelId",
                                                                                                 "required":  true,
                                                                                                 "in":  "path",
                                                                                                 "schema":  {
                                                                                                                "type":  "string"
                                                                                                            }
                                                                                             }
                                                                                         ],
                                                                          "responses":  {
                                                                                            "200":  {
                                                                                                        "description":  "Channel details retrieved successfully",
                                                                                                        "content":  {
                                                                                                                        "application/json":  {
                                                                                                                                                 "schema":  {
                                                                                                                                                                "$ref":  "#/components/schemas/LightningChannelResponse"
                                                                                                                                                            }
                                                                                                                                             }
                                                                                                                    }
                                                                                                    }
                                                                                        },
                                                                          "tags":  [
                                                                                       "bitcoin"
                                                                                   ],
                                                                          "security":  [
                                                                                           {
                                                                                               "bearer":  [

                                                                                                          ]
                                                                                           }
                                                                                       ]
                                                                      }
                                                          },
                  "/api/v1/bitcoin/peers":  {
                                                "get":  {
                                                            "operationId":  "getPeers",
                                                            "summary":  "Get all peers",
                                                            "parameters":  [

                                                                           ],
                                                            "responses":  {
                                                                              "200":  {
                                                                                          "description":  "Peers retrieved successfully",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "type":  "array",
                                                                                                                                                  "items":  {
                                                                                                                                                                "$ref":  "#/components/schemas/LightningPeerResponse"
                                                                                                                                                            }
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      }
                                                                          },
                                                            "tags":  [
                                                                         "bitcoin"
                                                                     ],
                                                            "security":  [
                                                                             {
                                                                                 "bearer":  [

                                                                                            ]
                                                                             }
                                                                         ]
                                                        }
                                            },
                  "/api/v1/bitcoin/peer/{peerId}":  {
                                                        "get":  {
                                                                    "operationId":  "getPeer",
                                                                    "summary":  "Get specific peer details",
                                                                    "parameters":  [
                                                                                       {
                                                                                           "name":  "peerId",
                                                                                           "required":  true,
                                                                                           "in":  "path",
                                                                                           "schema":  {
                                                                                                          "type":  "string"
                                                                                                      }
                                                                                       }
                                                                                   ],
                                                                    "responses":  {
                                                                                      "200":  {
                                                                                                  "description":  "Peer details retrieved successfully",
                                                                                                  "content":  {
                                                                                                                  "application/json":  {
                                                                                                                                           "schema":  {
                                                                                                                                                          "$ref":  "#/components/schemas/LightningPeerResponse"
                                                                                                                                                      }
                                                                                                                                       }
                                                                                                              }
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "bitcoin"
                                                                             ],
                                                                    "security":  [
                                                                                     {
                                                                                         "bearer":  [

                                                                                                    ]
                                                                                     }
                                                                                 ]
                                                                }
                                                    },
                  "/api/v1/bitcoin/channel/open":  {
                                                       "post":  {
                                                                    "operationId":  "openChannel",
                                                                    "summary":  "Open a new channel",
                                                                    "parameters":  [

                                                                                   ],
                                                                    "requestBody":  {
                                                                                        "required":  true,
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "$ref":  "#/components/schemas/OpenChannelDto"
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    },
                                                                    "responses":  {
                                                                                      "201":  {
                                                                                                  "description":  "Channel opening process initiated",
                                                                                                  "content":  {
                                                                                                                  "application/json":  {
                                                                                                                                           "schema":  {
                                                                                                                                                          "$ref":  "#/components/schemas/LightningLiquidityResponse"
                                                                                                                                                      }
                                                                                                                                       }
                                                                                                              }
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "bitcoin"
                                                                             ],
                                                                    "security":  [
                                                                                     {
                                                                                         "bearer":  [

                                                                                                    ]
                                                                                     }
                                                                                 ]
                                                                }
                                                   },
                  "/api/v1/bitcoin/channel/{channelId}/close":  {
                                                                    "post":  {
                                                                                 "operationId":  "closeChannel",
                                                                                 "summary":  "Close a channel",
                                                                                 "parameters":  [
                                                                                                    {
                                                                                                        "name":  "channelId",
                                                                                                        "required":  true,
                                                                                                        "in":  "path",
                                                                                                        "schema":  {
                                                                                                                       "type":  "string"
                                                                                                                   }
                                                                                                    }
                                                                                                ],
                                                                                 "requestBody":  {
                                                                                                     "required":  true,
                                                                                                     "content":  {
                                                                                                                     "application/json":  {
                                                                                                                                              "schema":  {
                                                                                                                                                             "$ref":  "#/components/schemas/CloseChannelDto"
                                                                                                                                                         }
                                                                                                                                          }
                                                                                                                 }
                                                                                                 },
                                                                                 "responses":  {
                                                                                                   "200":  {
                                                                                                               "description":  "Channel closing process initiated"
                                                                                                           }
                                                                                               },
                                                                                 "tags":  [
                                                                                              "bitcoin"
                                                                                          ],
                                                                                 "security":  [
                                                                                                  {
                                                                                                      "bearer":  [

                                                                                                                 ]
                                                                                                  }
                                                                                              ]
                                                                             }
                                                                },
                  "/api/v1/bitcoin/channel/{channelId}/add-liquidity":  {
                                                                            "post":  {
                                                                                         "operationId":  "addLiquidity",
                                                                                         "summary":  "Add liquidity to a channel",
                                                                                         "parameters":  [
                                                                                                            {
                                                                                                                "name":  "channelId",
                                                                                                                "required":  true,
                                                                                                                "in":  "path",
                                                                                                                "schema":  {
                                                                                                                               "type":  "string"
                                                                                                                           }
                                                                                                            }
                                                                                                        ],
                                                                                         "requestBody":  {
                                                                                                             "required":  true,
                                                                                                             "content":  {
                                                                                                                             "application/json":  {
                                                                                                                                                      "schema":  {
                                                                                                                                                                     "$ref":  "#/components/schemas/AddLiquidityDto"
                                                                                                                                                                 }
                                                                                                                                                  }
                                                                                                                         }
                                                                                                         },
                                                                                         "responses":  {
                                                                                                           "201":  {
                                                                                                                       "description":  "Liquidity added successfully",
                                                                                                                       "content":  {
                                                                                                                                       "application/json":  {
                                                                                                                                                                "schema":  {
                                                                                                                                                                               "$ref":  "#/components/schemas/LightningLiquidityResponse"
                                                                                                                                                                           }
                                                                                                                                                            }
                                                                                                                                   }
                                                                                                                   }
                                                                                                       },
                                                                                         "tags":  [
                                                                                                      "bitcoin"
                                                                                                  ],
                                                                                         "security":  [
                                                                                                          {
                                                                                                              "bearer":  [

                                                                                                                         ]
                                                                                                          }
                                                                                                      ]
                                                                                     }
                                                                        },
                  "/api/v1/bitcoin/channel/{channelId}/remove-liquidity":  {
                                                                               "post":  {
                                                                                            "operationId":  "removeLiquidity",
                                                                                            "summary":  "Remove liquidity from a channel",
                                                                                            "parameters":  [
                                                                                                               {
                                                                                                                   "name":  "channelId",
                                                                                                                   "required":  true,
                                                                                                                   "in":  "path",
                                                                                                                   "schema":  {
                                                                                                                                  "type":  "string"
                                                                                                                              }
                                                                                                               }
                                                                                                           ],
                                                                                            "requestBody":  {
                                                                                                                "required":  true,
                                                                                                                "content":  {
                                                                                                                                "application/json":  {
                                                                                                                                                         "schema":  {
                                                                                                                                                                        "$ref":  "#/components/schemas/RemoveLiquidityDto"
                                                                                                                                                                    }
                                                                                                                                                     }
                                                                                                                            }
                                                                                                            },
                                                                                            "responses":  {
                                                                                                              "200":  {
                                                                                                                          "description":  "Liquidity removal initiated",
                                                                                                                          "content":  {
                                                                                                                                          "application/json":  {
                                                                                                                                                                   "schema":  {
                                                                                                                                                                                  "$ref":  "#/components/schemas/LightningLiquidityResponse"
                                                                                                                                                                              }
                                                                                                                                                               }
                                                                                                                                      }
                                                                                                                      }
                                                                                                          },
                                                                                            "tags":  [
                                                                                                         "bitcoin"
                                                                                                     ],
                                                                                            "security":  [
                                                                                                             {
                                                                                                                 "bearer":  [

                                                                                                                            ]
                                                                                                             }
                                                                                                         ]
                                                                                        }
                                                                           },
                  "/api/v1/bitcoin/network-info":  {
                                                       "get":  {
                                                                   "operationId":  "getNetworkInfo",
                                                                   "summary":  "Get Lightning network information",
                                                                   "parameters":  [

                                                                                  ],
                                                                   "responses":  {
                                                                                     "200":  {
                                                                                                 "description":  "Network information retrieved successfully",
                                                                                                 "content":  {
                                                                                                                 "application/json":  {
                                                                                                                                          "schema":  {
                                                                                                                                                         "$ref":  "#/components/schemas/LightningNetworkInfoResponse"
                                                                                                                                                     }
                                                                                                                                      }
                                                                                                             }
                                                                                             }
                                                                                 },
                                                                   "tags":  [
                                                                                "bitcoin"
                                                                            ],
                                                                   "security":  [
                                                                                    {
                                                                                        "bearer":  [

                                                                                                   ]
                                                                                    }
                                                                                ]
                                                               }
                                                   },
                  "/api/v1/bitcoin/fee-estimates":  {
                                                        "get":  {
                                                                    "operationId":  "getFeeEstimates",
                                                                    "summary":  "Get fee estimates for on-chain transactions",
                                                                    "parameters":  [

                                                                                   ],
                                                                    "responses":  {
                                                                                      "200":  {
                                                                                                  "description":  "Fee estimates retrieved successfully",
                                                                                                  "content":  {
                                                                                                                  "application/json":  {
                                                                                                                                           "schema":  {
                                                                                                                                                          "$ref":  "#/components/schemas/LightningFeeEstimatesResponse"
                                                                                                                                                      }
                                                                                                                                       }
                                                                                                              }
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "bitcoin"
                                                                             ],
                                                                    "security":  [
                                                                                     {
                                                                                         "bearer":  [

                                                                                                    ]
                                                                                     }
                                                                                 ]
                                                                }
                                                    },
                  "/api/v1/bitcoin/wallet-stats":  {
                                                       "get":  {
                                                                   "operationId":  "getWalletStats",
                                                                   "summary":  "Get wallet statistics",
                                                                   "parameters":  [

                                                                                  ],
                                                                   "responses":  {
                                                                                     "200":  {
                                                                                                 "description":  "Wallet statistics retrieved successfully",
                                                                                                 "content":  {
                                                                                                                 "application/json":  {
                                                                                                                                          "schema":  {
                                                                                                                                                         "$ref":  "#/components/schemas/LightningWalletStatsResponse"
                                                                                                                                                     }
                                                                                                                                      }
                                                                                                             }
                                                                                             }
                                                                                 },
                                                                   "tags":  [
                                                                                "bitcoin"
                                                                            ],
                                                                   "security":  [
                                                                                    {
                                                                                        "bearer":  [

                                                                                                   ]
                                                                                    }
                                                                                ]
                                                               }
                                                   },
                  "/api/v1/bitcoin/transactions":  {
                                                       "get":  {
                                                                   "operationId":  "getTransactionHistory",
                                                                   "summary":  "Get transaction history",
                                                                   "parameters":  [
                                                                                      {
                                                                                          "name":  "start_date",
                                                                                          "required":  false,
                                                                                          "in":  "query",
                                                                                          "description":  "Start date for transaction history",
                                                                                          "schema":  {
                                                                                                         "example":  "2023-01-01T00:00:00Z",
                                                                                                         "type":  "string"
                                                                                                     }
                                                                                      },
                                                                                      {
                                                                                          "name":  "end_date",
                                                                                          "required":  false,
                                                                                          "in":  "query",
                                                                                          "description":  "End date for transaction history",
                                                                                          "schema":  {
                                                                                                         "example":  "2023-01-31T23:59:59Z",
                                                                                                         "type":  "string"
                                                                                                     }
                                                                                      },
                                                                                      {
                                                                                          "name":  "limit",
                                                                                          "required":  false,
                                                                                          "in":  "query",
                                                                                          "description":  "Number of transactions to return",
                                                                                          "schema":  {
                                                                                                         "example":  50,
                                                                                                         "type":  "number"
                                                                                                     }
                                                                                      },
                                                                                      {
                                                                                          "name":  "offset",
                                                                                          "required":  false,
                                                                                          "in":  "query",
                                                                                          "description":  "Number of transactions to skip",
                                                                                          "schema":  {
                                                                                                         "example":  0,
                                                                                                         "type":  "number"
                                                                                                     }
                                                                                      },
                                                                                      {
                                                                                          "name":  "type",
                                                                                          "required":  false,
                                                                                          "in":  "query",
                                                                                          "description":  "Filter by transaction type",
                                                                                          "schema":  {
                                                                                                         "example":  "all",
                                                                                                         "enum":  [
                                                                                                                      "lightning",
                                                                                                                      "onchain",
                                                                                                                      "all"
                                                                                                                  ],
                                                                                                         "type":  "string"
                                                                                                     }
                                                                                      }
                                                                                  ],
                                                                   "responses":  {
                                                                                     "200":  {
                                                                                                 "description":  "Transaction history retrieved successfully",
                                                                                                 "content":  {
                                                                                                                 "application/json":  {
                                                                                                                                          "schema":  {
                                                                                                                                                         "$ref":  "#/components/schemas/BitcoinTransactionHistoryResponse"
                                                                                                                                                     }
                                                                                                                                      }
                                                                                                             }
                                                                                             }
                                                                                 },
                                                                   "tags":  [
                                                                                "bitcoin"
                                                                            ],
                                                                   "security":  [
                                                                                    {
                                                                                        "bearer":  [

                                                                                                   ]
                                                                                    }
                                                                                ]
                                                               }
                                                   },
                  "/api/v1/bitcoin/providers":  {
                                                    "get":  {
                                                                "operationId":  "getProviders",
                                                                "summary":  "Get information about all providers",
                                                                "parameters":  [

                                                                               ],
                                                                "responses":  {
                                                                                  "200":  {
                                                                                              "description":  "Provider information retrieved successfully"
                                                                                          }
                                                                              },
                                                                "tags":  [
                                                                             "bitcoin"
                                                                         ],
                                                                "security":  [
                                                                                 {
                                                                                     "bearer":  [

                                                                                                ]
                                                                                 }
                                                                             ]
                                                            }
                                                },
                  "/api/v1/bitcoin/providers/health":  {
                                                           "get":  {
                                                                       "operationId":  "getProvidersHealth",
                                                                       "summary":  "Get health status for all providers",
                                                                       "parameters":  [

                                                                                      ],
                                                                       "responses":  {
                                                                                         "200":  {
                                                                                                     "description":  "Provider health status retrieved successfully"
                                                                                                 }
                                                                                     },
                                                                       "tags":  [
                                                                                    "bitcoin"
                                                                                ],
                                                                       "security":  [
                                                                                        {
                                                                                            "bearer":  [

                                                                                                       ]
                                                                                        }
                                                                                    ]
                                                                   }
                                                       },
                  "/api/v1/bitcoin/metrics":  {
                                                  "get":  {
                                                              "operationId":  "getMetrics",
                                                              "summary":  "Get performance metrics",
                                                              "parameters":  [

                                                                             ],
                                                              "responses":  {
                                                                                "200":  {
                                                                                            "description":  "Performance metrics retrieved successfully"
                                                                                        }
                                                                            },
                                                              "tags":  [
                                                                           "bitcoin"
                                                                       ],
                                                              "security":  [
                                                                               {
                                                                                   "bearer":  [

                                                                                              ]
                                                                               }
                                                                           ]
                                                          }
                                              },
                  "/api/v1/bitcoin/metrics/{provider}":  {
                                                             "get":  {
                                                                         "operationId":  "getProviderMetrics",
                                                                         "summary":  "Get metrics for specific provider",
                                                                         "parameters":  [
                                                                                            {
                                                                                                "name":  "provider",
                                                                                                "required":  true,
                                                                                                "in":  "path",
                                                                                                "schema":  {
                                                                                                               "type":  "string"
                                                                                                           }
                                                                                            }
                                                                                        ],
                                                                         "responses":  {
                                                                                           "200":  {
                                                                                                       "description":  "Provider metrics retrieved successfully"
                                                                                                   }
                                                                                       },
                                                                         "tags":  [
                                                                                      "bitcoin"
                                                                                  ],
                                                                         "security":  [
                                                                                          {
                                                                                              "bearer":  [

                                                                                                         ]
                                                                                          }
                                                                                      ]
                                                                     }
                                                         },
                  "/api/v1/bitcoin/features":  {
                                                   "get":  {
                                                               "operationId":  "getSupportedFeatures",
                                                               "summary":  "Get supported features for current provider",
                                                               "parameters":  [

                                                                              ],
                                                               "responses":  {
                                                                                 "200":  {
                                                                                             "description":  "Supported features retrieved successfully"
                                                                                         }
                                                                             },
                                                               "tags":  [
                                                                            "bitcoin"
                                                                        ],
                                                               "security":  [
                                                                                {
                                                                                    "bearer":  [

                                                                                               ]
                                                                                }
                                                                            ]
                                                           }
                                               },
                  "/api/v1/bitcoin/configuration":  {
                                                        "get":  {
                                                                    "operationId":  "getConfiguration",
                                                                    "summary":  "Get configuration summary",
                                                                    "parameters":  [

                                                                                   ],
                                                                    "responses":  {
                                                                                      "200":  {
                                                                                                  "description":  "Configuration summary retrieved successfully"
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "bitcoin"
                                                                             ],
                                                                    "security":  [
                                                                                     {
                                                                                         "bearer":  [

                                                                                                    ]
                                                                                     }
                                                                                 ]
                                                                }
                                                    },
                  "/api/v1/bitcoin/configuration/validate":  {
                                                                 "post":  {
                                                                              "operationId":  "validateConfiguration",
                                                                              "summary":  "Validate all provider configurations",
                                                                              "parameters":  [

                                                                                             ],
                                                                              "responses":  {
                                                                                                "200":  {
                                                                                                            "description":  "Configuration validation completed"
                                                                                                        }
                                                                                            },
                                                                              "tags":  [
                                                                                           "bitcoin"
                                                                                       ],
                                                                              "security":  [
                                                                                               {
                                                                                                   "bearer":  [

                                                                                                              ]
                                                                                               }
                                                                                           ]
                                                                          }
                                                             },
                  "/api/v1/bitcoin/webhook":  {
                                                  "post":  {
                                                               "operationId":  "handleLightningWebhook",
                                                               "summary":  "Handle Lightning webhooks from any provider",
                                                               "parameters":  [
                                                                                  {
                                                                                      "name":  "x-webhook-signature",
                                                                                      "required":  true,
                                                                                      "in":  "header",
                                                                                      "schema":  {
                                                                                                     "type":  "string"
                                                                                                 }
                                                                                  },
                                                                                  {
                                                                                      "name":  "X-Webhook-Signature",
                                                                                      "in":  "header",
                                                                                      "description":  "Webhook signature for verification",
                                                                                      "schema":  {
                                                                                                     "type":  "string"
                                                                                                 }
                                                                                  }
                                                                              ],
                                                               "responses":  {
                                                                                 "200":  {
                                                                                             "description":  "Webhook processed successfully"
                                                                                         },
                                                                                 "400":  {
                                                                                             "description":  "Invalid webhook payload"
                                                                                         }
                                                                             },
                                                               "tags":  [
                                                                            "bitcoin"
                                                                        ],
                                                               "security":  [
                                                                                {
                                                                                    "bearer":  [

                                                                                               ]
                                                                                }
                                                                            ]
                                                           }
                                              },
                  "/api/v1/spec":  {
                                       "get":  {
                                                   "operationId":  "getOpenApiSpec",
                                                   "summary":  "Get OpenAPI specification",
                                                   "description":  "Returns the complete OpenAPI 3.0 specification for the Minmo API.\n\n    **Specification Contents:**\n    - All API endpoints with full documentation\n    - Request/response schemas\n    - Authentication requirements\n    - Data models and DTOs\n    - Error response formats\n    - Example values\n\n    **OpenAPI Features:**\n    - Version 3.0 compliant\n    - Interactive documentation available at /api-docs\n    - Code generation support\n    - Postman/Insomnia import compatible\n    - Mock server generation\n\n    **API Sections:**\n    - Authentication (auth)\n    - Agent Management (agents)\n    - Swap Operations (swap)\n    - Bitcoin/Lightning (bitcoin)\n    - Liquidity Management (liquidity)\n    - FX Rates (fx)\n    - Health Monitoring (health)\n\n    **Usage:**\n    - Import into API testing tools\n    - Generate client SDKs\n    - API documentation\n    - Contract testing\n    - Mock development\n\n    **Updates:**\n    - Automatically generated from code\n    - Always up-to-date\n    - Version controlled\n    - Breaking changes documented",
                                                   "parameters":  [

                                                                  ],
                                                   "responses":  {
                                                                     "200":  {
                                                                                 "description":  "OpenAPI specification returned successfully",
                                                                                 "content":  {
                                                                                                 "application/json":  {
                                                                                                                          "schema":  {
                                                                                                                                         "type":  "object",
                                                                                                                                         "properties":  {
                                                                                                                                                            "openapi":  {
                                                                                                                                                                            "type":  "string",
                                                                                                                                                                            "example":  "3.0.0"
                                                                                                                                                                        },
                                                                                                                                                            "info":  {
                                                                                                                                                                         "type":  "object",
                                                                                                                                                                         "properties":  "@{title=; description=; version=; contact=; license=}"
                                                                                                                                                                     },
                                                                                                                                                            "servers":  {
                                                                                                                                                                            "type":  "array",
                                                                                                                                                                            "items":  "@{type=object; properties=}"
                                                                                                                                                                        },
                                                                                                                                                            "paths":  {
                                                                                                                                                                          "type":  "object",
                                                                                                                                                                          "description":  "All API endpoints"
                                                                                                                                                                      },
                                                                                                                                                            "components":  {
                                                                                                                                                                               "type":  "object",
                                                                                                                                                                               "properties":  "@{schemas=; securitySchemes=}"
                                                                                                                                                                           },
                                                                                                                                                            "tags":  {
                                                                                                                                                                         "type":  "array",
                                                                                                                                                                         "items":  "@{type=object; properties=}"
                                                                                                                                                                     }
                                                                                                                                                        }
                                                                                                                                     }
                                                                                                                      }
                                                                                             }
                                                                             }
                                                                 },
                                                   "tags":  [
                                                                "documentation"
                                                            ]
                                               }
                                   },
                  "/api/v1/agents/register":  {
                                                  "post":  {
                                                               "operationId":  "register",
                                                               "summary":  "Register as an agent",
                                                               "description":  "Register a new agent in the system. This endpoint supports both self-registration and admin registration.\n\n    **Self-Registration:**\n    - Users register themselves as agents\n    - userId field is optional (uses authenticated user\u0027s ID)\n    - Requires authentication token\n\n    **Admin Registration:**\n    - Admins can register other users as agents\n    - Provide userId to register a specific user\n    - Requires admin privileges\n\n    **Agent Capabilities:**\n    - Support multiple currencies and payment channels\n    - Set transaction limits and margins\n    - Configure operating hours\n    - Enable automated gateways for payment processing",
                                                               "parameters":  [

                                                                              ],
                                                               "requestBody":  {
                                                                                   "required":  true,
                                                                                   "content":  {
                                                                                                   "application/json":  {
                                                                                                                            "schema":  {
                                                                                                                                           "$ref":  "#/components/schemas/RegisterAgentDto"
                                                                                                                                       }
                                                                                                                        }
                                                                                               }
                                                                               },
                                                               "responses":  {
                                                                                 "201":  {
                                                                                             "description":  "Agent registered successfully - Returns complete agent profile with ID",
                                                                                             "content":  {
                                                                                                             "application/json":  {
                                                                                                                                      "schema":  {
                                                                                                                                                     "$ref":  "#/components/schemas/AgentResponse"
                                                                                                                                                 }
                                                                                                                                  }
                                                                                                         }
                                                                                         },
                                                                                 "400":  {
                                                                                             "description":  "Bad request - Invalid registration data or validation failed"
                                                                                         },
                                                                                 "401":  {
                                                                                             "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                         },
                                                                                 "409":  {
                                                                                             "description":  "Conflict - Agent profile already exists for this user"
                                                                                         }
                                                                             },
                                                               "tags":  [
                                                                            "agents"
                                                                        ],
                                                               "security":  [
                                                                                {
                                                                                    "bearer":  [

                                                                                               ]
                                                                                }
                                                                            ]
                                                           }
                                              },
                  "/api/v1/agents/availability":  {
                                                      "post":  {
                                                                   "operationId":  "updateOwnAvailability",
                                                                   "summary":  "Update own agent availability status",
                                                                   "description":  "Update your own agent availability status to control whether you can accept new swaps.\n\n    **Status Options:**\n    - ACTIVE: Agent is available and can accept swaps\n    - BUSY: Agent is temporarily unavailable\n    - INACTIVE: Agent is offline and cannot accept swaps\n\n    **Impact:**\n    - ACTIVE agents appear in search results and can claim swaps\n    - BUSY agents complete existing swaps but don\u0027t accept new ones\n    - INACTIVE agents are hidden from all operations",
                                                                   "parameters":  [

                                                                                  ],
                                                                   "responses":  {
                                                                                     "200":  {
                                                                                                 "description":  "Availability updated successfully",
                                                                                                 "content":  {
                                                                                                                 "application/json":  {
                                                                                                                                          "schema":  {
                                                                                                                                                         "type":  "object",
                                                                                                                                                         "properties":  {
                                                                                                                                                                            "message":  {
                                                                                                                                                                                            "type":  "string",
                                                                                                                                                                                            "example":  "Agent availability updated to ACTIVE"
                                                                                                                                                                                        }
                                                                                                                                                                        }
                                                                                                                                                     }
                                                                                                                                      }
                                                                                                             }
                                                                                             },
                                                                                     "401":  {
                                                                                                 "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                             },
                                                                                     "404":  {
                                                                                                 "description":  "Not found - Agent profile not found for user"
                                                                                             }
                                                                                 },
                                                                   "tags":  [
                                                                                "agents"
                                                                            ],
                                                                   "security":  [
                                                                                    {
                                                                                        "bearer":  [

                                                                                                   ]
                                                                                    }
                                                                                ]
                                                               }
                                                  },
                  "/api/v1/agents/availability/{agentId}":  {
                                                                "post":  {
                                                                             "operationId":  "updateAgentAvailability",
                                                                             "summary":  "Update any agent\u0027s availability status (Admin only)",
                                                                             "description":  "Admin endpoint to update any agent\u0027s availability status.\n\n    **Status Options:**\n    - ACTIVE: Agent is available and can accept swaps\n    - BUSY: Agent is temporarily unavailable\n    - INACTIVE: Agent is offline and cannot accept swaps\n\n    **Admin Use Cases:**\n    - Emergency deactivation of problematic agents\n    - Reactivating agents after issue resolution\n    - Managing agent availability during maintenance",
                                                                             "parameters":  [
                                                                                                {
                                                                                                    "name":  "agentId",
                                                                                                    "required":  true,
                                                                                                    "in":  "path",
                                                                                                    "description":  "Unique identifier of the agent to update",
                                                                                                    "schema":  {
                                                                                                                   "format":  "uuid",
                                                                                                                   "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                                   "type":  "string"
                                                                                                               }
                                                                                                }
                                                                                            ],
                                                                             "responses":  {
                                                                                               "200":  {
                                                                                                           "description":  "Availability updated successfully",
                                                                                                           "content":  {
                                                                                                                           "application/json":  {
                                                                                                                                                    "schema":  {
                                                                                                                                                                   "type":  "object",
                                                                                                                                                                   "properties":  {
                                                                                                                                                                                      "message":  {
                                                                                                                                                                                                      "type":  "string",
                                                                                                                                                                                                      "example":  "Agent availability updated to ACTIVE"
                                                                                                                                                                                                  }
                                                                                                                                                                                  }
                                                                                                                                                               }
                                                                                                                                                }
                                                                                                                       }
                                                                                                       },
                                                                                               "401":  {
                                                                                                           "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                                       },
                                                                                               "403":  {
                                                                                                           "description":  "Forbidden - Admin access required"
                                                                                                       },
                                                                                               "404":  {
                                                                                                           "description":  "Not found - Agent not found"
                                                                                                       }
                                                                                           },
                                                                             "tags":  [
                                                                                          "agents"
                                                                                      ],
                                                                             "security":  [
                                                                                              {
                                                                                                  "bearer":  [

                                                                                                             ]
                                                                                              }
                                                                                          ]
                                                                         }
                                                            },
                  "/api/v1/agents/search":  {
                                                "get":  {
                                                            "operationId":  "searchAgents",
                                                            "summary":  "Search for available agents",
                                                            "description":  "Search for agents that match specific swap requirements. This endpoint is used internally by the swap matching algorithm.\n\n    **Matching Criteria:**\n    - Currency support (agents must support the specified currency)\n    - Payment channel compatibility\n    - Transaction amount within agent limits\n    - Swap type (onramp/offramp)\n    - Agent availability status\n\n    **Results Ordering:**\n    - Agents are sorted by best margin rates\n    - Higher-rated agents are prioritized\n    - Response time is considered for ranking\n\n    **Use Cases:**\n    - Automatic agent matching for new swaps\n    - Finding backup agents for transfers\n    - Discovering agents for specific corridors",
                                                            "parameters":  [
                                                                               {
                                                                                   "name":  "currency",
                                                                                   "required":  true,
                                                                                   "in":  "query",
                                                                                   "description":  "Currency to filter agents by",
                                                                                   "schema":  {
                                                                                                  "$ref":  "#/components/schemas/Currency"
                                                                                              }
                                                                               },
                                                                               {
                                                                                   "name":  "channel",
                                                                                   "required":  true,
                                                                                   "in":  "query",
                                                                                   "description":  "Payment channel to filter agents by",
                                                                                   "schema":  {
                                                                                                  "$ref":  "#/components/schemas/PaymentChannel"
                                                                                              }
                                                                               },
                                                                               {
                                                                                   "name":  "amount",
                                                                                   "required":  false,
                                                                                   "in":  "query",
                                                                                   "description":  "Transaction amount to check against agent limits (in smallest units)",
                                                                                   "schema":  {
                                                                                                  "pattern":  "^[0-9]+$",
                                                                                                  "example":  "10000",
                                                                                                  "type":  "string"
                                                                                              }
                                                                               },
                                                                               {
                                                                                   "name":  "type",
                                                                                   "required":  false,
                                                                                   "in":  "query",
                                                                                   "description":  "Swap type for margin optimization",
                                                                                   "schema":  {
                                                                                                  "$ref":  "#/components/schemas/SwapType"
                                                                                              }
                                                                               },
                                                                               {
                                                                                   "name":  "automatedOnly",
                                                                                   "required":  false,
                                                                                   "in":  "query",
                                                                                   "description":  "Filter to show only automated agents (using payment gateways)",
                                                                                   "schema":  {
                                                                                                  "example":  false,
                                                                                                  "type":  "boolean"
                                                                                              }
                                                                               }
                                                                           ],
                                                            "responses":  {
                                                                              "200":  {
                                                                                          "description":  "List of matching agents sorted by suitability",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "type":  "array",
                                                                                                                                                  "items":  {
                                                                                                                                                                "$ref":  "#/components/schemas/"
                                                                                                                                                            }
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      },
                                                                              "400":  {
                                                                                          "description":  "Bad request - Invalid search parameters"
                                                                                      },
                                                                              "401":  {
                                                                                          "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                      }
                                                                          },
                                                            "tags":  [
                                                                         "agents"
                                                                     ],
                                                            "security":  [
                                                                             {
                                                                                 "bearer":  [

                                                                                            ]
                                                                             }
                                                                         ]
                                                        }
                                            },
                  "/api/v1/agents/available":  {
                                                   "get":  {
                                                               "operationId":  "getAvailableAgents",
                                                               "summary":  "Get available agents for direct selection",
                                                               "description":  "Discover agents available for direct selection in swap creation. This endpoint enables users to browse and select specific agents before creating a swap.\n\n**Features:**\n- Public endpoint (no authentication required)\n- Paginated results with configurable limits\n- Multiple filtering options for precise agent matching\n- Results sorted by margin rates for optimal pricing\n- Agent data sanitized to exclude sensitive information\n\n**Usage Flow:**\n1. Call this endpoint to discover available agents\n2. Optionally filter by currency, payment channel, amount, or swap type\n3. Use agent ID from results in swap creation with \u0027agentId\u0027 parameter\n\n**Performance:**\n- Results are limited to 50 agents per page for optimal performance\n- Database indexes ensure fast queries even with multiple filters\n- Cached agent metrics for consistent response times",
                                                               "parameters":  [
                                                                                  {
                                                                                      "name":  "currency",
                                                                                      "required":  false,
                                                                                      "in":  "query",
                                                                                      "description":  "Filter by supported currency",
                                                                                      "schema":  {
                                                                                                     "enum":  [
                                                                                                                  "BTC",
                                                                                                                  "KES",
                                                                                                                  "USDT",
                                                                                                                  "USD",
                                                                                                                  "UNRECOGNIZED"
                                                                                                              ],
                                                                                                     "type":  "string"
                                                                                                 }
                                                                                  },
                                                                                  {
                                                                                      "name":  "paymentChannel",
                                                                                      "required":  false,
                                                                                      "in":  "query",
                                                                                      "description":  "Filter by supported payment channel",
                                                                                      "schema":  {
                                                                                                     "enum":  [
                                                                                                                  "mpesa_phone",
                                                                                                                  "mpesa_till",
                                                                                                                  "mpesa_paybill",
                                                                                                                  "bank_transfer",
                                                                                                                  "card"
                                                                                                              ],
                                                                                                     "type":  "string"
                                                                                                 }
                                                                                  },
                                                                                  {
                                                                                      "name":  "amount",
                                                                                      "required":  false,
                                                                                      "in":  "query",
                                                                                      "description":  "Filter by amount (must be within agent limits and available liquidity)",
                                                                                      "schema":  {
                                                                                                     "example":  "10000",
                                                                                                     "type":  "string"
                                                                                                 }
                                                                                  },
                                                                                  {
                                                                                      "name":  "type",
                                                                                      "required":  false,
                                                                                      "in":  "query",
                                                                                      "description":  "Swap type for margin optimization (results ordered by relevant margin rates)",
                                                                                      "schema":  {
                                                                                                     "enum":  [
                                                                                                                  "onramp",
                                                                                                                  "offramp"
                                                                                                              ],
                                                                                                     "type":  "string"
                                                                                                 }
                                                                                  },
                                                                                  {
                                                                                      "name":  "page",
                                                                                      "required":  false,
                                                                                      "in":  "query",
                                                                                      "description":  "Page number (default: 1)",
                                                                                      "schema":  {
                                                                                                     "example":  1,
                                                                                                     "type":  "number"
                                                                                                 }
                                                                                  },
                                                                                  {
                                                                                      "name":  "limit",
                                                                                      "required":  false,
                                                                                      "in":  "query",
                                                                                      "description":  "Items per page (default: 20, max: 50)",
                                                                                      "schema":  {
                                                                                                     "example":  20,
                                                                                                     "type":  "number"
                                                                                                 }
                                                                                  }
                                                                              ],
                                                               "responses":  {
                                                                                 "200":  {
                                                                                             "description":  "Available agents for direct selection",
                                                                                             "content":  {
                                                                                                             "application/json":  {
                                                                                                                                      "schema":  {
                                                                                                                                                     "$ref":  "#/components/schemas/PaginatedAgentsResponse"
                                                                                                                                                 }
                                                                                                                                  }
                                                                                                         }
                                                                                         },
                                                                                 "400":  {
                                                                                             "description":  "Invalid query parameters"
                                                                                         }
                                                                             },
                                                               "tags":  [
                                                                            "agents"
                                                                        ]
                                                           }
                                               },
                  "/api/v1/agents/{id}/validate":  {
                                                       "post":  {
                                                                    "operationId":  "validateAgentForSwap",
                                                                    "summary":  "Validate agent for direct swap selection",
                                                                    "description":  "Validate whether a specific agent can handle a swap with the given parameters before creating the swap. This endpoint performs comprehensive validation including:\n\n**Validation Checks:**\n- Agent exists and is active\n- Agent supports the specified currency and payment channel\n- Amount is within agent\u0027s transaction limits (min/max)\n- Agent has sufficient available liquidity\n- Agent is currently accepting swaps\n\n**Usage Flow:**\n1. Discover agents using /agents/available\n2. Validate specific agent before swap creation\n3. Create swap with validated agent ID\n\n**Error Scenarios:**\n- Agent not found or inactive\n- Currency/channel not supported\n- Amount outside transaction limits\n- Insufficient liquidity\n- Agent temporarily unavailable\n\n**Performance:**\n- Fast validation using cached agent data\n- Real-time liquidity checks\n- Immediate response with detailed error messages",
                                                                    "parameters":  [
                                                                                       {
                                                                                           "name":  "id",
                                                                                           "required":  true,
                                                                                           "in":  "path",
                                                                                           "schema":  {
                                                                                                          "type":  "string"
                                                                                                      }
                                                                                       }
                                                                                   ],
                                                                    "requestBody":  {
                                                                                        "required":  true,
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "$ref":  "#/components/schemas/ValidateAgentDto"
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    },
                                                                    "responses":  {
                                                                                      "200":  {
                                                                                                  "description":  "Agent validation successful - agent can handle the swap",
                                                                                                  "content":  {
                                                                                                                  "application/json":  {
                                                                                                                                           "schema":  {
                                                                                                                                                          "$ref":  "#/components/schemas/AgentResponse"
                                                                                                                                                      }
                                                                                                                                       }
                                                                                                              }
                                                                                              },
                                                                                      "400":  {
                                                                                                  "description":  "Agent validation failed"
                                                                                              },
                                                                                      "404":  {
                                                                                                  "description":  "Agent not found"
                                                                                              }
                                                                                  },
                                                                    "tags":  [
                                                                                 "agents"
                                                                             ]
                                                                }
                                                   },
                  "/api/v1/agents/stats":  {
                                               "get":  {
                                                           "operationId":  "getStats",
                                                           "summary":  "Get agent statistics",
                                                           "description":  "Retrieve comprehensive statistics and performance metrics for the authenticated agent.\n\n    **Metrics Included:**\n    - Total completed swaps\n    - Success rate percentage\n    - Average completion time\n    - Total volume processed\n    - Volume by currency\n    - Volume by swap type (onramp/offramp)\n    - Daily, weekly, monthly trends\n    - Current rating and reviews\n    - Active swaps count\n    - Liquidity utilization\n\n    **Time Periods:**\n    - Real-time current statistics\n    - Historical data for trend analysis\n    - Comparative metrics vs platform average",
                                                           "parameters":  [

                                                                          ],
                                                           "responses":  {
                                                                             "200":  {
                                                                                         "description":  "Agent statistics retrieved successfully",
                                                                                         "content":  {
                                                                                                         "application/json":  {
                                                                                                                                  "schema":  {
                                                                                                                                                 "type":  "object",
                                                                                                                                                 "properties":  {
                                                                                                                                                                    "completedSwaps":  {
                                                                                                                                                                                           "type":  "number",
                                                                                                                                                                                           "example":  150
                                                                                                                                                                                       },
                                                                                                                                                                    "successRate":  {
                                                                                                                                                                                        "type":  "number",
                                                                                                                                                                                        "example":  98.5
                                                                                                                                                                                    },
                                                                                                                                                                    "averageCompletionTime":  {
                                                                                                                                                                                                  "type":  "number",
                                                                                                                                                                                                  "example":  45,
                                                                                                                                                                                                  "description":  "Minutes"
                                                                                                                                                                                              },
                                                                                                                                                                    "totalVolume":  {
                                                                                                                                                                                        "type":  "number",
                                                                                                                                                                                        "example":  1000000
                                                                                                                                                                                    },
                                                                                                                                                                    "volumeByCurrency":  {
                                                                                                                                                                                             "type":  "object",
                                                                                                                                                                                             "example":  "@{USD=500000; KES=300000}"
                                                                                                                                                                                         },
                                                                                                                                                                    "volumeByType":  {
                                                                                                                                                                                         "type":  "object",
                                                                                                                                                                                         "example":  "@{onramp=600000; offramp=400000}"
                                                                                                                                                                                     },
                                                                                                                                                                    "currentRating":  {
                                                                                                                                                                                          "type":  "number",
                                                                                                                                                                                          "example":  4.8
                                                                                                                                                                                      },
                                                                                                                                                                    "activeSwaps":  {
                                                                                                                                                                                        "type":  "number",
                                                                                                                                                                                        "example":  3
                                                                                                                                                                                    },
                                                                                                                                                                    "liquidityUtilization":  {
                                                                                                                                                                                                 "type":  "number",
                                                                                                                                                                                                 "example":  65.5
                                                                                                                                                                                             }
                                                                                                                                                                }
                                                                                                                                             }
                                                                                                                              }
                                                                                                     }
                                                                                     },
                                                                             "401":  {
                                                                                         "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                     },
                                                                             "404":  {
                                                                                         "description":  "Not found - Agent profile not found for authenticated user"
                                                                                     }
                                                                         },
                                                           "tags":  [
                                                                        "agents"
                                                                    ],
                                                           "security":  [
                                                                            {
                                                                                "bearer":  [

                                                                                           ]
                                                                            }
                                                                        ]
                                                       }
                                           },
                  "/api/v1/agents":  {
                                         "get":  {
                                                     "operationId":  "getAllAgents",
                                                     "summary":  "Get all agents with pagination",
                                                     "description":  "Retrieve a paginated list of all agents in the system with optional filtering.\n\n    **Filtering Options:**\n    - Status: Filter by agent status (ACTIVE, BUSY, INACTIVE)\n    - Automation: Filter by automated/manual agents\n    - Search: Text search across email, name, agent ID, and currencies\n\n    **Pagination:**\n    - Configurable page size (default: 20, max: 100)\n    - Page-based navigation\n    - Total count included for UI pagination\n\n    **Use Cases:**\n    - Admin dashboard agent management\n    - Agent directory browsing\n    - Performance monitoring and reporting",
                                                     "parameters":  [
                                                                        {
                                                                            "name":  "status",
                                                                            "required":  false,
                                                                            "in":  "query",
                                                                            "description":  "Filter by agent status",
                                                                            "schema":  {
                                                                                           "type":  "string"
                                                                                       }
                                                                        },
                                                                        {
                                                                            "name":  "isAutomated",
                                                                            "required":  false,
                                                                            "in":  "query",
                                                                            "description":  "Filter by whether agent is automated",
                                                                            "schema":  {
                                                                                           "type":  "boolean"
                                                                                       }
                                                                        },
                                                                        {
                                                                            "name":  "search",
                                                                            "required":  false,
                                                                            "in":  "query",
                                                                            "description":  "Search agents by user email, name, agent ID, or supported currencies",
                                                                            "schema":  {
                                                                                           "type":  "string"
                                                                                       }
                                                                        },
                                                                        {
                                                                            "name":  "limit",
                                                                            "required":  false,
                                                                            "in":  "query",
                                                                            "description":  "Items per page (default: 20)",
                                                                            "schema":  {
                                                                                           "type":  "number"
                                                                                       }
                                                                        },
                                                                        {
                                                                            "name":  "page",
                                                                            "required":  false,
                                                                            "in":  "query",
                                                                            "description":  "Page number (default: 1)",
                                                                            "schema":  {
                                                                                           "type":  "number"
                                                                                       }
                                                                        }
                                                                    ],
                                                     "responses":  {
                                                                       "200":  {
                                                                                   "description":  "List of agents retrieved",
                                                                                   "content":  {
                                                                                                   "application/json":  {
                                                                                                                            "schema":  {
                                                                                                                                           "$ref":  "#/components/schemas/PaginatedAgentsResponse"
                                                                                                                                       }
                                                                                                                        }
                                                                                               }
                                                                               }
                                                                   },
                                                     "tags":  [
                                                                  "agents"
                                                              ],
                                                     "security":  [
                                                                      {
                                                                          "bearer":  [

                                                                                     ]
                                                                      }
                                                                  ]
                                                 }
                                     },
                  "/api/v1/agents/{id}":  {
                                              "get":  {
                                                          "operationId":  "getAgent",
                                                          "summary":  "Get agent by ID",
                                                          "description":  "Retrieve detailed information about a specific agent.\n\n    **Information Included:**\n    - Agent profile and configuration\n    - Supported currencies and payment channels\n    - Transaction limits and margin rates\n    - Performance metrics and rating\n    - Operating hours and availability\n    - Liquidity status\n    - Automation settings (if applicable)\n\n    **Access Control:**\n    - Public endpoint for basic agent information\n    - Sensitive details may be restricted based on user role",
                                                          "parameters":  [
                                                                             {
                                                                                 "name":  "id",
                                                                                 "required":  true,
                                                                                 "in":  "path",
                                                                                 "description":  "Unique identifier of the agent",
                                                                                 "schema":  {
                                                                                                "format":  "uuid",
                                                                                                "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                "type":  "string"
                                                                                            }
                                                                             }
                                                                         ],
                                                          "responses":  {
                                                                            "200":  {
                                                                                        "description":  "Agent details retrieved successfully",
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "$ref":  "#/components/schemas/AgentResponse"
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    },
                                                                            "400":  {
                                                                                        "description":  "Bad request - Invalid agent ID format"
                                                                                    },
                                                                            "401":  {
                                                                                        "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                    },
                                                                            "404":  {
                                                                                        "description":  "Not found - Agent with specified ID does not exist"
                                                                                    }
                                                                        },
                                                          "tags":  [
                                                                       "agents"
                                                                   ],
                                                          "security":  [
                                                                           {
                                                                               "bearer":  [

                                                                                          ]
                                                                           }
                                                                       ]
                                                      },
                                              "put":  {
                                                          "operationId":  "updateAgent",
                                                          "summary":  "Update agent configuration",
                                                          "description":  "Update an agent\u0027s configuration and settings.\n\n    **Updatable Fields:**\n    - Supported currencies and payment channels\n    - Transaction limits (min/max amounts)\n    - Margin rates for onramp/offramp\n    - Operating hours and availability windows\n    - Automation settings and gateway configuration\n    - Contact information and preferences\n\n    **Access Control:**\n    - Agents can update their own profile\n    - Admins can update any agent profile\n    - Some fields may require admin privileges\n\n    **Validation:**\n    - Currency codes must be valid\n    - Limits must be positive numbers\n    - Margin rates must be reasonable (0-10000 basis points)\n    - Operating hours must be valid time ranges",
                                                          "parameters":  [
                                                                             {
                                                                                 "name":  "id",
                                                                                 "required":  true,
                                                                                 "in":  "path",
                                                                                 "description":  "Unique identifier of the agent to update",
                                                                                 "schema":  {
                                                                                                "format":  "uuid",
                                                                                                "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                "type":  "string"
                                                                                            }
                                                                             }
                                                                         ],
                                                          "requestBody":  {
                                                                              "required":  true,
                                                                              "content":  {
                                                                                              "application/json":  {
                                                                                                                       "schema":  {
                                                                                                                                      "$ref":  "#/components/schemas/UpdateAgentDto"
                                                                                                                                  }
                                                                                                                   }
                                                                                          }
                                                                          },
                                                          "responses":  {
                                                                            "200":  {
                                                                                        "description":  "Agent configuration updated successfully - Returns updated agent profile",
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "$ref":  "#/components/schemas/AgentResponse"
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    },
                                                                            "400":  {
                                                                                        "description":  "Bad request - Invalid update data or validation failed"
                                                                                    },
                                                                            "401":  {
                                                                                        "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                    },
                                                                            "403":  {
                                                                                        "description":  "Forbidden - Insufficient permissions to update this agent"
                                                                                    },
                                                                            "404":  {
                                                                                        "description":  "Not found - Agent with specified ID does not exist"
                                                                                    }
                                                                        },
                                                          "tags":  [
                                                                       "agents"
                                                                   ],
                                                          "security":  [
                                                                           {
                                                                               "bearer":  [

                                                                                          ]
                                                                           }
                                                                       ]
                                                      },
                                              "delete":  {
                                                             "operationId":  "deactivateAgent",
                                                             "summary":  "Deactivate an agent",
                                                             "description":  "Deactivate an agent profile, preventing them from accepting new swaps.\n\n    **Deactivation Effects:**\n    - Agent status set to INACTIVE\n    - Cannot claim or be assigned new swaps\n    - Existing swaps continue to completion\n    - Profile hidden from search results\n    - Liquidity released after swap completion\n\n    **Access Control:**\n    - Agents can only deactivate their own profile\n    - Admins may have override capabilities\n    - Deactivation is reversible through status update\n\n    **Important:**\n    - Complete all active swaps before deactivation\n    - Withdraw any remaining liquidity\n    - Update automated systems if applicable",
                                                             "parameters":  [
                                                                                {
                                                                                    "name":  "id",
                                                                                    "required":  true,
                                                                                    "in":  "path",
                                                                                    "description":  "Unique identifier of the agent to deactivate",
                                                                                    "schema":  {
                                                                                                   "format":  "uuid",
                                                                                                   "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                   "type":  "string"
                                                                                               }
                                                                                }
                                                                            ],
                                                             "responses":  {
                                                                               "200":  {
                                                                                           "description":  "Agent deactivated successfully",
                                                                                           "content":  {
                                                                                                           "application/json":  {
                                                                                                                                    "schema":  {
                                                                                                                                                   "type":  "object",
                                                                                                                                                   "properties":  {
                                                                                                                                                                      "message":  {
                                                                                                                                                                                      "type":  "string",
                                                                                                                                                                                      "example":  "Agent profile deactivated successfully"
                                                                                                                                                                                  },
                                                                                                                                                                      "agentId":  {
                                                                                                                                                                                      "type":  "string",
                                                                                                                                                                                      "example":  "550e8400-e29b-41d4-a716-446655440000"
                                                                                                                                                                                  }
                                                                                                                                                                  }
                                                                                                                                               }
                                                                                                                                }
                                                                                                       }
                                                                                       },
                                                                               "401":  {
                                                                                           "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                       },
                                                                               "403":  {
                                                                                           "description":  "Forbidden - You can only deactivate your own agent profile"
                                                                                       },
                                                                               "404":  {
                                                                                           "description":  "Not found - Agent with specified ID does not exist"
                                                                                       },
                                                                               "409":  {
                                                                                           "description":  "Conflict - Cannot deactivate agent with active swaps"
                                                                                       }
                                                                           },
                                                             "tags":  [
                                                                          "agents"
                                                                      ],
                                                             "security":  [
                                                                              {
                                                                                  "bearer":  [

                                                                                             ]
                                                                              }
                                                                          ]
                                                         }
                                          },
                  "/api/v1/agents/{id}/swaps":  {
                                                    "get":  {
                                                                "operationId":  "getAgentSwaps",
                                                                "summary":  "Get agent swap history",
                                                                "description":  "Retrieve paginated swap history for a specific agent.\n\n    **Information Included:**\n    - Swap details (ID, reference, type, state)\n    - Transaction amounts and currencies\n    - Counterparty information\n    - Timestamps (created, claimed, completed)\n    - Payment details and confirmations\n    - Dispute status if applicable\n\n    **Filtering Options:**\n    - Filter by swap state\n    - Pagination support\n    - Sorted by most recent first\n\n    **Use Cases:**\n    - Agent transaction history\n    - Performance analysis\n    - Dispute resolution\n    - Audit trail",
                                                                "parameters":  [
                                                                                   {
                                                                                       "name":  "id",
                                                                                       "required":  true,
                                                                                       "in":  "path",
                                                                                       "description":  "Unique identifier of the agent",
                                                                                       "schema":  {
                                                                                                      "format":  "uuid",
                                                                                                      "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                   },
                                                                                   {
                                                                                       "name":  "state",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "Filter by swap state",
                                                                                       "schema":  {
                                                                                                      "enum":  [
                                                                                                                   "created",
                                                                                                                   "agent_matched",
                                                                                                                   "escrow_pending",
                                                                                                                   "escrow_locked",
                                                                                                                   "payment_instructed",
                                                                                                                   "payment_pending",
                                                                                                                   "payment_submitted",
                                                                                                                   "payment_confirmed_user",
                                                                                                                   "payment_confirmed_agent",
                                                                                                                   "confirmation_pending",
                                                                                                                   "completed",
                                                                                                                   "cancelled",
                                                                                                                   "disputed",
                                                                                                                   "dispute_evidence_collection",
                                                                                                                   "dispute_internal_review",
                                                                                                                   "dispute_resolved",
                                                                                                                   "dispute_review",
                                                                                                                   "refunded",
                                                                                                                   "expired",
                                                                                                                   "agent_timeout",
                                                                                                                   "transferred_to_backup"
                                                                                                               ],
                                                                                                      "type":  "string"
                                                                                                  }
                                                                                   },
                                                                                   {
                                                                                       "name":  "limit",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "Items per page (default: 20)",
                                                                                       "schema":  {
                                                                                                      "type":  "number"
                                                                                                  }
                                                                                   },
                                                                                   {
                                                                                       "name":  "page",
                                                                                       "required":  false,
                                                                                       "in":  "query",
                                                                                       "description":  "Page number (default: 1)",
                                                                                       "schema":  {
                                                                                                      "type":  "number"
                                                                                                  }
                                                                                   }
                                                                               ],
                                                                "responses":  {
                                                                                  "200":  {
                                                                                              "description":  "Agent trade history retrieved",
                                                                                              "content":  {
                                                                                                              "application/json":  {
                                                                                                                                       "schema":  {
                                                                                                                                                      "$ref":  "#/components/schemas/AgentSwapHistoryResponse"
                                                                                                                                                  }
                                                                                                                                   }
                                                                                                          }
                                                                                          },
                                                                                  "404":  {
                                                                                              "description":  "Agent not found"
                                                                                          }
                                                                              },
                                                                "tags":  [
                                                                             "agents"
                                                                         ],
                                                                "security":  [
                                                                                 {
                                                                                     "bearer":  [

                                                                                                ]
                                                                                 }
                                                                             ]
                                                            }
                                                },
                  "/api/v1/agents/webhook/{agentId}":  {
                                                           "post":  {
                                                                        "operationId":  "handleGatewayWebhook",
                                                                        "summary":  "Handle webhook for a specific agent",
                                                                        "description":  "Process webhook notifications from external payment gateways for automated agents.\n\n    **Webhook Types:**\n    - Payment received confirmations\n    - Payment sent notifications\n    - Transaction status updates\n    - Account balance changes\n    - Error notifications\n\n    **Gateway Support:**\n    - Mobile money providers (M-Pesa, etc.)\n    - Bank payment gateways\n    - Cryptocurrency payment processors\n    - Custom integration webhooks\n\n    **Processing:**\n    - Automatic signature validation\n    - Idempotency handling\n    - Event deduplication\n    - Automatic swap state updates\n    - Error retry logic\n\n    **Security:**\n    - HMAC signature validation\n    - IP whitelisting (if configured)\n    - Rate limiting per agent\n    - Audit logging",
                                                                        "parameters":  [
                                                                                           {
                                                                                               "name":  "agentId",
                                                                                               "required":  true,
                                                                                               "in":  "path",
                                                                                               "description":  "Unique identifier of the agent receiving the webhook",
                                                                                               "schema":  {
                                                                                                              "format":  "uuid",
                                                                                                              "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                              "type":  "string"
                                                                                                          }
                                                                                           }
                                                                                       ],
                                                                        "responses":  {
                                                                                          "200":  {
                                                                                                      "description":  "Webhook processed successfully",
                                                                                                      "content":  {
                                                                                                                      "application/json":  {
                                                                                                                                               "schema":  {
                                                                                                                                                              "type":  "object",
                                                                                                                                                              "properties":  {
                                                                                                                                                                                 "status":  {
                                                                                                                                                                                                "type":  "string",
                                                                                                                                                                                                "example":  "ok"
                                                                                                                                                                                            },
                                                                                                                                                                                 "message":  {
                                                                                                                                                                                                 "type":  "string",
                                                                                                                                                                                                 "example":  "Webhook processed successfully"
                                                                                                                                                                                             }
                                                                                                                                                                             }
                                                                                                                                                          }
                                                                                                                                           }
                                                                                                                  }
                                                                                                  },
                                                                                          "400":  {
                                                                                                      "description":  "Bad request - Invalid webhook payload or signature verification failed"
                                                                                                  },
                                                                                          "404":  {
                                                                                                      "description":  "Not found - Agent not found or not configured for webhooks"
                                                                                                  },
                                                                                          "500":  {
                                                                                                      "description":  "Internal error - Webhook processing failed"
                                                                                                  }
                                                                                      },
                                                                        "tags":  [
                                                                                     "agents"
                                                                                 ]
                                                                    }
                                                       },
                  "/api/v1/liquidity/agent/{agentId}":  {
                                                            "get":  {
                                                                        "operationId":  "getAgentLiquidity",
                                                                        "summary":  "Get agent liquidity profile",
                                                                        "description":  "Retrieve comprehensive liquidity information for a specific agent.\n\n    **Profile Information:**\n    - Total declared liquidity per currency\n    - Available liquidity (not locked in swaps)\n    - Locked liquidity (reserved for active swaps)\n    - Custodial balances (BTC from Lightning)\n    - Non-custodial balances (declared fiat)\n\n    **Currency Support:**\n    - All supported fiat currencies\n    - Bitcoin (BTC) from Lightning wallet\n    - Real-time balance synchronization\n\n    **Use Cases:**\n    - Agent dashboard display\n    - Swap matching decisions\n    - Liquidity reporting\n    - Risk assessment\n\n    **Access Control:**\n    - Agents can view own liquidity\n    - Admins can view any agent\u0027s liquidity\n    - Public access restricted",
                                                                        "parameters":  [
                                                                                           {
                                                                                               "name":  "agentId",
                                                                                               "required":  true,
                                                                                               "in":  "path",
                                                                                               "description":  "Unique identifier of the agent",
                                                                                               "schema":  {
                                                                                                              "format":  "uuid",
                                                                                                              "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                              "type":  "string"
                                                                                                          }
                                                                                           }
                                                                                       ],
                                                                        "responses":  {
                                                                                          "200":  {
                                                                                                      "description":  "Agent liquidity profile retrieved successfully",
                                                                                                      "content":  {
                                                                                                                      "application/json":  {
                                                                                                                                               "schema":  {
                                                                                                                                                              "type":  "object",
                                                                                                                                                              "properties":  {
                                                                                                                                                                                 "agentId":  {
                                                                                                                                                                                                 "type":  "string",
                                                                                                                                                                                                 "format":  "uuid"
                                                                                                                                                                                             },
                                                                                                                                                                                 "liquidity":  {
                                                                                                                                                                                                   "type":  "array",
                                                                                                                                                                                                   "items":  "@{type=object; properties=}"
                                                                                                                                                                                               },
                                                                                                                                                                                 "lastSyncedAt":  {
                                                                                                                                                                                                      "type":  "string",
                                                                                                                                                                                                      "format":  "date-time"
                                                                                                                                                                                                  },
                                                                                                                                                                                 "totalValueUSD":  {
                                                                                                                                                                                                       "type":  "number",
                                                                                                                                                                                                       "example":  150000
                                                                                                                                                                                                   }
                                                                                                                                                                             }
                                                                                                                                                          }
                                                                                                                                           }
                                                                                                                  }
                                                                                                  },
                                                                                          "401":  {
                                                                                                      "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                                  },
                                                                                          "403":  {
                                                                                                      "description":  "Forbidden - Insufficient permissions to view this agent\u0027s liquidity"
                                                                                                  },
                                                                                          "404":  {
                                                                                                      "description":  "Not found - Agent with specified ID does not exist"
                                                                                                  }
                                                                                      },
                                                                        "tags":  [
                                                                                     "liquidity"
                                                                                 ],
                                                                        "security":  [
                                                                                         {
                                                                                             "bearer":  [

                                                                                                        ]
                                                                                         }
                                                                                     ]
                                                                    }
                                                        },
                  "/api/v1/liquidity/agent/{agentId}/declare":  {
                                                                    "post":  {
                                                                                 "operationId":  "declareLiquidity",
                                                                                 "summary":  "Declare fiat liquidity for an agent",
                                                                                 "description":  "Manually declare or update fiat liquidity for a specific currency.\n\n    **Declaration Process:**\n    - Validates amount is positive\n    - Updates or creates currency liquidity record\n    - Replaces previous declaration\n    - Triggers recalculation of available amounts\n\n    **Important Notes:**\n    - Only for non-custodial (fiat) currencies\n    - BTC liquidity synced from Lightning wallet\n    - Declaration is the total available amount\n    - Not additive - replaces existing value\n\n    **Validation:**\n    - Amount must be positive\n    - Currency must be supported\n    - Agent must be active\n    - Proper authorization required\n\n    **Impact:**\n    - Affects swap matching\n    - Updates liquidity reports\n    - May trigger notifications\n    - Recorded in audit log",
                                                                                 "parameters":  [
                                                                                                    {
                                                                                                        "name":  "agentId",
                                                                                                        "required":  true,
                                                                                                        "in":  "path",
                                                                                                        "description":  "Unique identifier of the agent",
                                                                                                        "schema":  {
                                                                                                                       "format":  "uuid",
                                                                                                                       "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                                       "type":  "string"
                                                                                                                   }
                                                                                                    }
                                                                                                ],
                                                                                 "requestBody":  {
                                                                                                     "required":  true,
                                                                                                     "description":  "Liquidity declaration details",
                                                                                                     "content":  {
                                                                                                                     "application/json":  {
                                                                                                                                              "schema":  {
                                                                                                                                                             "$ref":  "#/components/schemas/DeclareLiquidityDto"
                                                                                                                                                         }
                                                                                                                                          }
                                                                                                                 }
                                                                                                 },
                                                                                 "responses":  {
                                                                                                   "200":  {
                                                                                                               "description":  "Liquidity declared successfully - Returns updated currency liquidity",
                                                                                                               "content":  {
                                                                                                                               "application/json":  {
                                                                                                                                                        "schema":  {
                                                                                                                                                                       "type":  "object",
                                                                                                                                                                       "properties":  {
                                                                                                                                                                                          "currency":  {
                                                                                                                                                                                                           "type":  "string",
                                                                                                                                                                                                           "example":  "USD"
                                                                                                                                                                                                       },
                                                                                                                                                                                          "total":  {
                                                                                                                                                                                                        "type":  "string",
                                                                                                                                                                                                        "example":  "100000"
                                                                                                                                                                                                    },
                                                                                                                                                                                          "available":  {
                                                                                                                                                                                                            "type":  "string",
                                                                                                                                                                                                            "example":  "100000"
                                                                                                                                                                                                        },
                                                                                                                                                                                          "locked":  {
                                                                                                                                                                                                         "type":  "string",
                                                                                                                                                                                                         "example":  "0"
                                                                                                                                                                                                     },
                                                                                                                                                                                          "isCustodial":  {
                                                                                                                                                                                                              "type":  "boolean",
                                                                                                                                                                                                              "example":  false
                                                                                                                                                                                                          },
                                                                                                                                                                                          "lastUpdated":  {
                                                                                                                                                                                                              "type":  "string",
                                                                                                                                                                                                              "format":  "date-time"
                                                                                                                                                                                                          }
                                                                                                                                                                                      }
                                                                                                                                                                   }
                                                                                                                                                    }
                                                                                                                           }
                                                                                                           },
                                                                                                   "400":  {
                                                                                                               "description":  "Bad request - Invalid amount, unsupported currency, or validation failed"
                                                                                                           },
                                                                                                   "401":  {
                                                                                                               "description":  "Unauthorized - Invalid or missing authentication token"
                                                                                                           },
                                                                                                   "403":  {
                                                                                                               "description":  "Forbidden - Not authorized to declare liquidity for this agent"
                                                                                                           },
                                                                                                   "404":  {
                                                                                                               "description":  "Not found - Agent not found"
                                                                                                           }
                                                                                               },
                                                                                 "tags":  [
                                                                                              "liquidity"
                                                                                          ],
                                                                                 "security":  [
                                                                                                  {
                                                                                                      "bearer":  [

                                                                                                                 ]
                                                                                                  }
                                                                                              ]
                                                                             }
                                                                },
                  "/api/v1/liquidity/agent/{agentId}/declare-bulk":  {
                                                                         "post":  {
                                                                                      "operationId":  "bulkDeclareLiquidity",
                                                                                      "summary":  "Bulk declare liquidity for multiple currencies",
                                                                                      "parameters":  [
                                                                                                         {
                                                                                                             "name":  "agentId",
                                                                                                             "required":  true,
                                                                                                             "in":  "path",
                                                                                                             "schema":  {
                                                                                                                            "format":  "uuid",
                                                                                                                            "type":  "string"
                                                                                                                        }
                                                                                                         }
                                                                                                     ],
                                                                                      "requestBody":  {
                                                                                                          "required":  true,
                                                                                                          "content":  {
                                                                                                                          "application/json":  {
                                                                                                                                                   "schema":  {
                                                                                                                                                                  "$ref":  "#/components/schemas/BulkDeclareLiquidityDto"
                                                                                                                                                              }
                                                                                                                                               }
                                                                                                                      }
                                                                                                      },
                                                                                      "responses":  {
                                                                                                        "200":  {
                                                                                                                    "description":  "Bulk liquidity declared successfully"
                                                                                                                },
                                                                                                        "400":  {
                                                                                                                    "description":  "Invalid request"
                                                                                                                }
                                                                                                    },
                                                                                      "tags":  [
                                                                                                   "liquidity"
                                                                                               ],
                                                                                      "security":  [
                                                                                                       {
                                                                                                           "bearer":  [

                                                                                                                      ]
                                                                                                       }
                                                                                                   ]
                                                                                  }
                                                                     },
                  "/api/v1/liquidity/agent/{agentId}/sync":  {
                                                                 "post":  {
                                                                              "operationId":  "syncLiquidity",
                                                                              "summary":  "Sync custodial liquidity (BTC)",
                                                                              "parameters":  [
                                                                                                 {
                                                                                                     "name":  "agentId",
                                                                                                     "required":  true,
                                                                                                     "in":  "path",
                                                                                                     "schema":  {
                                                                                                                    "format":  "uuid",
                                                                                                                    "type":  "string"
                                                                                                                }
                                                                                                 },
                                                                                                 {
                                                                                                     "name":  "currency",
                                                                                                     "required":  false,
                                                                                                     "in":  "query",
                                                                                                     "description":  "Currency to sync (only BTC supported)",
                                                                                                     "schema":  {
                                                                                                                    "enum":  [
                                                                                                                                 "BTC",
                                                                                                                                 "KES",
                                                                                                                                 "USDT",
                                                                                                                                 "USD",
                                                                                                                                 "UNRECOGNIZED"
                                                                                                                             ],
                                                                                                                    "type":  "string"
                                                                                                                }
                                                                                                 }
                                                                                             ],
                                                                              "responses":  {
                                                                                                "204":  {
                                                                                                            "description":  "Liquidity synced successfully"
                                                                                                        },
                                                                                                "400":  {
                                                                                                            "description":  "Invalid currency"
                                                                                                        }
                                                                                            },
                                                                              "tags":  [
                                                                                           "liquidity"
                                                                                       ],
                                                                              "security":  [
                                                                                               {
                                                                                                   "bearer":  [

                                                                                                              ]
                                                                                               }
                                                                                           ]
                                                                          }
                                                             },
                  "/api/v1/liquidity/validate":  {
                                                     "post":  {
                                                                  "operationId":  "validateLiquidity",
                                                                  "summary":  "Validate liquidity for a swap",
                                                                  "parameters":  [

                                                                                 ],
                                                                  "requestBody":  {
                                                                                      "required":  true,
                                                                                      "content":  {
                                                                                                      "application/json":  {
                                                                                                                               "schema":  {
                                                                                                                                              "$ref":  "#/components/schemas/ValidateLiquidityDto"
                                                                                                                                          }
                                                                                                                           }
                                                                                                  }
                                                                                  },
                                                                  "responses":  {
                                                                                    "200":  {
                                                                                                "description":  "Liquidity validation result"
                                                                                            }
                                                                                },
                                                                  "tags":  [
                                                                               "liquidity"
                                                                           ],
                                                                  "security":  [
                                                                                   {
                                                                                       "bearer":  [

                                                                                                  ]
                                                                                   }
                                                                               ]
                                                              }
                                                 },
                  "/api/v1/liquidity/agent/{agentId}/history":  {
                                                                    "get":  {
                                                                                "operationId":  "getHistory",
                                                                                "summary":  "Get liquidity history for an agent",
                                                                                "parameters":  [
                                                                                                   {
                                                                                                       "name":  "agentId",
                                                                                                       "required":  true,
                                                                                                       "in":  "path",
                                                                                                       "schema":  {
                                                                                                                      "format":  "uuid",
                                                                                                                      "type":  "string"
                                                                                                                  }
                                                                                                   },
                                                                                                   {
                                                                                                       "name":  "currency",
                                                                                                       "required":  false,
                                                                                                       "in":  "query",
                                                                                                       "description":  "Filter by currency",
                                                                                                       "schema":  {
                                                                                                                      "enum":  [
                                                                                                                                   "BTC",
                                                                                                                                   "KES",
                                                                                                                                   "USDT",
                                                                                                                                   "USD",
                                                                                                                                   "UNRECOGNIZED"
                                                                                                                               ],
                                                                                                                      "type":  "string"
                                                                                                                  }
                                                                                                   },
                                                                                                   {
                                                                                                       "name":  "changeType",
                                                                                                       "required":  false,
                                                                                                       "in":  "query",
                                                                                                       "description":  "Filter by change type",
                                                                                                       "schema":  {
                                                                                                                      "enum":  [
                                                                                                                                   "deposit",
                                                                                                                                   "withdrawal",
                                                                                                                                   "swap_reserved",
                                                                                                                                   "swap_completed",
                                                                                                                                   "swap_cancelled",
                                                                                                                                   "manual_adjustment",
                                                                                                                                   "custodial_sync",
                                                                                                                                   "declaration"
                                                                                                                               ],
                                                                                                                      "type":  "string"
                                                                                                                  }
                                                                                                   },
                                                                                                   {
                                                                                                       "name":  "startDate",
                                                                                                       "required":  false,
                                                                                                       "in":  "query",
                                                                                                       "description":  "Start date (ISO 8601)",
                                                                                                       "schema":  {
                                                                                                                      "type":  "string"
                                                                                                                  }
                                                                                                   },
                                                                                                   {
                                                                                                       "name":  "endDate",
                                                                                                       "required":  false,
                                                                                                       "in":  "query",
                                                                                                       "description":  "End date (ISO 8601)",
                                                                                                       "schema":  {
                                                                                                                      "type":  "string"
                                                                                                                  }
                                                                                                   },
                                                                                                   {
                                                                                                       "name":  "limit",
                                                                                                       "required":  false,
                                                                                                       "in":  "query",
                                                                                                       "description":  "Number of records to return",
                                                                                                       "schema":  {
                                                                                                                      "type":  "number"
                                                                                                                  }
                                                                                                   },
                                                                                                   {
                                                                                                       "name":  "offset",
                                                                                                       "required":  false,
                                                                                                       "in":  "query",
                                                                                                       "description":  "Number of records to skip",
                                                                                                       "schema":  {
                                                                                                                      "type":  "number"
                                                                                                                  }
                                                                                                   }
                                                                                               ],
                                                                                "responses":  {
                                                                                                  "200":  {
                                                                                                              "description":  "Liquidity history retrieved successfully"
                                                                                                          }
                                                                                              },
                                                                                "tags":  [
                                                                                             "liquidity"
                                                                                         ],
                                                                                "security":  [
                                                                                                 {
                                                                                                     "bearer":  [

                                                                                                                ]
                                                                                                 }
                                                                                             ]
                                                                            }
                                                                },
                  "/api/v1/liquidity/agent/{agentId}/report":  {
                                                                   "get":  {
                                                                               "operationId":  "generateReport",
                                                                               "summary":  "Generate liquidity report for an agent",
                                                                               "parameters":  [
                                                                                                  {
                                                                                                      "name":  "agentId",
                                                                                                      "required":  true,
                                                                                                      "in":  "path",
                                                                                                      "schema":  {
                                                                                                                     "format":  "uuid",
                                                                                                                     "type":  "string"
                                                                                                                 }
                                                                                                  },
                                                                                                  {
                                                                                                      "name":  "startDate",
                                                                                                      "required":  true,
                                                                                                      "in":  "query",
                                                                                                      "description":  "Report start date (ISO 8601)",
                                                                                                      "schema":  {
                                                                                                                     "type":  "string"
                                                                                                                 }
                                                                                                  },
                                                                                                  {
                                                                                                      "name":  "endDate",
                                                                                                      "required":  true,
                                                                                                      "in":  "query",
                                                                                                      "description":  "Report end date (ISO 8601)",
                                                                                                      "schema":  {
                                                                                                                     "type":  "string"
                                                                                                                 }
                                                                                                  }
                                                                                              ],
                                                                               "responses":  {
                                                                                                 "200":  {
                                                                                                             "description":  "Liquidity report generated successfully"
                                                                                                         },
                                                                                                 "400":  {
                                                                                                             "description":  "Invalid date range"
                                                                                                         }
                                                                                             },
                                                                               "tags":  [
                                                                                            "liquidity"
                                                                                        ],
                                                                               "security":  [
                                                                                                {
                                                                                                    "bearer":  [

                                                                                                               ]
                                                                                                }
                                                                                            ]
                                                                           }
                                                               },
                  "/api/v1":  {
                                  "get":  {
                                              "operationId":  "getInfo",
                                              "summary":  "API information",
                                              "description":  "Get general information about the Minmo API service.\n\n    **Information Provided:**\n    - API name and description\n    - Current version\n    - Environment (production/staging/development)\n    - Build information\n    - Deployment timestamp\n    - Service uptime\n\n    **API Features:**\n    - RESTful design\n    - JWT authentication\n    - Role-based access control\n    - Real-time webhooks\n    - Comprehensive logging\n\n    **Available Modules:**\n    - Authentication \u0026 Users\n    - Agent Management\n    - Swap Operations\n    - Bitcoin/Lightning Integration\n    - Liquidity Management\n    - FX Rate Services\n\n    **Documentation:**\n    - OpenAPI/Swagger at /api-docs\n    - Detailed endpoint descriptions\n    - Request/response examples\n    - Authentication guide",
                                              "parameters":  [

                                                             ],
                                              "responses":  {
                                                                "200":  {
                                                                            "description":  "API information retrieved successfully",
                                                                            "content":  {
                                                                                            "application/json":  {
                                                                                                                     "schema":  {
                                                                                                                                    "type":  "object",
                                                                                                                                    "properties":  {
                                                                                                                                                       "name":  {
                                                                                                                                                                    "type":  "string",
                                                                                                                                                                    "example":  "Minmo API"
                                                                                                                                                                },
                                                                                                                                                       "description":  {
                                                                                                                                                                           "type":  "string",
                                                                                                                                                                           "example":  "P2P Bitcoin exchange platform API"
                                                                                                                                                                       },
                                                                                                                                                       "version":  {
                                                                                                                                                                       "type":  "string",
                                                                                                                                                                       "example":  "2.0.0"
                                                                                                                                                                   },
                                                                                                                                                       "environment":  {
                                                                                                                                                                           "type":  "string",
                                                                                                                                                                           "example":  "production"
                                                                                                                                                                       },
                                                                                                                                                       "buildNumber":  {
                                                                                                                                                                           "type":  "string",
                                                                                                                                                                           "example":  "build-2024.1.15-1234"
                                                                                                                                                                       },
                                                                                                                                                       "deployedAt":  {
                                                                                                                                                                          "type":  "string",
                                                                                                                                                                          "format":  "date-time"
                                                                                                                                                                      },
                                                                                                                                                       "uptime":  {
                                                                                                                                                                      "type":  "number",
                                                                                                                                                                      "example":  3600000,
                                                                                                                                                                      "description":  "Uptime in milliseconds"
                                                                                                                                                                  },
                                                                                                                                                       "documentation":  {
                                                                                                                                                                             "type":  "string",
                                                                                                                                                                             "example":  "/api-docs"
                                                                                                                                                                         },
                                                                                                                                                       "support":  {
                                                                                                                                                                       "type":  "string",
                                                                                                                                                                       "example":  "support@minmo.io"
                                                                                                                                                                   }
                                                                                                                                                   }
                                                                                                                                }
                                                                                                                 }
                                                                                        }
                                                                        }
                                                            },
                                              "tags":  [
                                                           "health"
                                                       ]
                                          }
                              },
                  "/api/v1/health":  {
                                         "get":  {
                                                     "operationId":  "getHealth",
                                                     "summary":  "Health check endpoint",
                                                     "description":  "Check the overall health status of the API service.\n\n    **Health Checks:**\n    - API service status\n    - Database connectivity\n    - Redis cache availability\n    - Lightning node connection\n    - External service dependencies\n\n    **Response Codes:**\n    - 200: All systems operational\n    - 503: Service degraded or unavailable\n\n    **Monitoring Integration:**\n    - Used by load balancers\n    - Kubernetes liveness probe\n    - Uptime monitoring services\n    - Alert systems\n\n    **Check Frequency:**\n    - Load balancer: Every 10 seconds\n    - Monitoring: Every 30 seconds\n    - Kubernetes: Every 60 seconds\n\n    **Dependencies Checked:**\n    - PostgreSQL database\n    - Redis cache\n    - Keycloak authentication\n    - Lightning providers\n    - FX rate sources",
                                                     "parameters":  [

                                                                    ],
                                                     "responses":  {
                                                                       "200":  {
                                                                                   "description":  "Service is healthy - All systems operational",
                                                                                   "content":  {
                                                                                                   "application/json":  {
                                                                                                                            "schema":  {
                                                                                                                                           "type":  "object",
                                                                                                                                           "properties":  {
                                                                                                                                                              "status":  {
                                                                                                                                                                             "type":  "string",
                                                                                                                                                                             "example":  "healthy",
                                                                                                                                                                             "enum":  "healthy degraded unhealthy"
                                                                                                                                                                         },
                                                                                                                                                              "timestamp":  {
                                                                                                                                                                                "type":  "string",
                                                                                                                                                                                "format":  "date-time"
                                                                                                                                                                            },
                                                                                                                                                              "uptime":  {
                                                                                                                                                                             "type":  "number",
                                                                                                                                                                             "example":  3600000,
                                                                                                                                                                             "description":  "Service uptime in milliseconds"
                                                                                                                                                                         },
                                                                                                                                                              "checks":  {
                                                                                                                                                                             "type":  "object",
                                                                                                                                                                             "properties":  "@{database=; cache=; authentication=; lightning=; fxRates=}"
                                                                                                                                                                         },
                                                                                                                                                              "version":  {
                                                                                                                                                                              "type":  "string",
                                                                                                                                                                              "example":  "2.0.0"
                                                                                                                                                                          }
                                                                                                                                                          }
                                                                                                                                       }
                                                                                                                        }
                                                                                               }
                                                                               },
                                                                       "503":  {
                                                                                   "description":  "Service unavailable - One or more critical components are down",
                                                                                   "content":  {
                                                                                                   "application/json":  {
                                                                                                                            "schema":  {
                                                                                                                                           "type":  "object",
                                                                                                                                           "properties":  {
                                                                                                                                                              "status":  {
                                                                                                                                                                             "type":  "string",
                                                                                                                                                                             "example":  "unhealthy"
                                                                                                                                                                         },
                                                                                                                                                              "message":  {
                                                                                                                                                                              "type":  "string",
                                                                                                                                                                              "example":  "Database connection failed"
                                                                                                                                                                          },
                                                                                                                                                              "failedChecks":  {
                                                                                                                                                                                   "type":  "array",
                                                                                                                                                                                   "items":  "@{type=string}",
                                                                                                                                                                                   "example":  "database"
                                                                                                                                                                               }
                                                                                                                                                          }
                                                                                                                                       }
                                                                                                                        }
                                                                                               }
                                                                               }
                                                                   },
                                                     "tags":  [
                                                                  "health"
                                                              ]
                                                 }
                                     }
              },
    "info":  {
                 "title":  "MINMO API Documentation",
                 "description":  "Comprehensive API documentation for MINMO service",
                 "version":  "1.0",
                 "contact":  {

                             }
             },
    "tags":  [
                 {
                     "name":  "agents",
                     "description":  "Agent management operations"
                 },
                 {
                     "name":  "api-keys",
                     "description":  "API key management for authentication and authorization"
                 },
                 {
                     "name":  "auth",
                     "description":  "Authentication and authorization operations including user registration, login, password management, and session handling"
                 },
                 {
                     "name":  "bitcoin",
                     "description":  "Bitcoin Lightning Network payment operations"
                 },
                 {
                     "name":  "documentation",
                     "description":  "documentation operations"
                 },
                 {
                     "name":  "fx",
                     "description":  "Foreign exchange (FX) rate operations for real-time currency conversion and rate management"
                 },
                 {
                     "name":  "health",
                     "description":  "System health monitoring and API information endpoints"
                 },
                 {
                     "name":  "liquidity",
                     "description":  "liquidity operations"
                 },
                 {
                     "name":  "Service Accounts",
                     "description":  "Service Accounts operations"
                 },
                 {
                     "name":  "swap",
                     "description":  "Cryptocurrency swap operations"
                 }
             ],
    "servers":  [

                ],
    "components":  {
                       "securitySchemes":  {
                                               "bearerAuth":  {
                                                                  "scheme":  "bearer",
                                                                  "bearerFormat":  "JWT",
                                                                  "type":  "http",
                                                                  "description":  "access token authentication"
                                                              }
                                           },
                       "schemas":  {
                                       "RegisterDto":  {
                                                           "type":  "object",
                                                           "properties":  {
                                                                              "email":  {
                                                                                            "type":  "string",
                                                                                            "description":  "User email address",
                                                                                            "example":  "example@minmo.to",
                                                                                            "default":  "example@minmo.to"
                                                                                        },
                                                                              "password":  {
                                                                                               "type":  "string",
                                                                                               "description":  "User password (minimum 8 characters, must contain uppercase, lowercase, number, and special character)",
                                                                                               "example":  "Test123!",
                                                                                               "default":  "Test123!"
                                                                                           },
                                                                              "firstName":  {
                                                                                                "type":  "string",
                                                                                                "description":  "User first name",
                                                                                                "example":  "Test",
                                                                                                "default":  "Test"
                                                                                            },
                                                                              "lastName":  {
                                                                                               "type":  "string",
                                                                                               "description":  "User last name",
                                                                                               "example":  "User",
                                                                                               "default":  "User"
                                                                                           },
                                                                              "phoneNumber":  {
                                                                                                  "type":  "string",
                                                                                                  "description":  "User phone number (optional)",
                                                                                                  "example":  "+254700000000"
                                                                                              },
                                                                              "createOrganization":  {
                                                                                                         "type":  "boolean",
                                                                                                         "description":  "Whether to create a default organization for the user",
                                                                                                         "example":  true,
                                                                                                         "default":  false
                                                                                                     },
                                                                              "organizationName":  {
                                                                                                       "type":  "string",
                                                                                                       "description":  "Organization name (required if createOrganization is true)",
                                                                                                       "example":  "My Company"
                                                                                                   },
                                                                              "country":  {
                                                                                              "type":  "string",
                                                                                              "description":  "Organization country code",
                                                                                              "example":  "KE",
                                                                                              "default":  "KE"
                                                                                          }
                                                                          },
                                                           "required":  [
                                                                            "email",
                                                                            "password",
                                                                            "firstName",
                                                                            "lastName"
                                                                        ]
                                                       },
                                       "LoginDto":  {
                                                        "type":  "object",
                                                        "properties":  {
                                                                           "email":  {
                                                                                         "type":  "string",
                                                                                         "description":  "User email address",
                                                                                         "example":  "example@minmo.to",
                                                                                         "default":  "example@minmo.to"
                                                                                     },
                                                                           "password":  {
                                                                                            "type":  "string",
                                                                                            "description":  "User password (minimum 6 characters)",
                                                                                            "example":  "Test123!",
                                                                                            "default":  "Test123!"
                                                                                        }
                                                                       },
                                                        "required":  [
                                                                         "email",
                                                                         "password"
                                                                     ]
                                                    },
                                       "RefreshTokenDto":  {
                                                               "type":  "object",
                                                               "properties":  {
                                                                                  "refresh_token":  {
                                                                                                        "type":  "string",
                                                                                                        "description":  "Refresh token obtained from login",
                                                                                                        "example":  "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9..."
                                                                                                    }
                                                                              },
                                                               "required":  [
                                                                                "refresh_token"
                                                                            ]
                                                           },
                                       "LogoutDto":  {
                                                         "type":  "object",
                                                         "properties":  {
                                                                            "refresh_token":  {
                                                                                                  "type":  "string",
                                                                                                  "description":  "Refresh token to invalidate",
                                                                                                  "example":  "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9..."
                                                                                              }
                                                                        },
                                                         "required":  [
                                                                          "refresh_token"
                                                                      ]
                                                     },
                                       "ResetPasswordDto":  {
                                                                "type":  "object",
                                                                "properties":  {
                                                                                   "token":  {
                                                                                                 "type":  "string",
                                                                                                 "description":  "Password reset token from email",
                                                                                                 "example":  "abc123-reset-token-xyz789"
                                                                                             },
                                                                                   "newPassword":  {
                                                                                                       "type":  "string",
                                                                                                       "description":  "New password",
                                                                                                       "example":  "NewSecurePassword123!"
                                                                                                   }
                                                                               },
                                                                "required":  [
                                                                                 "token",
                                                                                 "newPassword"
                                                                             ]
                                                            },
                                       "ChangePasswordDto":  {
                                                                 "type":  "object",
                                                                 "properties":  {
                                                                                    "currentPassword":  {
                                                                                                            "type":  "string",
                                                                                                            "description":  "Current password",
                                                                                                            "example":  "CurrentPassword123!"
                                                                                                        },
                                                                                    "newPassword":  {
                                                                                                        "type":  "string",
                                                                                                        "description":  "New password",
                                                                                                        "example":  "NewSecurePassword123!"
                                                                                                    }
                                                                                },
                                                                 "required":  [
                                                                                  "currentPassword",
                                                                                  "newPassword"
                                                                              ]
                                                             },
                                       "CreateApiKeyDto":  {
                                                               "type":  "object",
                                                               "properties":  {
                                                                                  "name":  {
                                                                                               "type":  "string",
                                                                                               "description":  "Name for the API key"
                                                                                           },
                                                                                  "description":  {
                                                                                                      "type":  "string",
                                                                                                      "description":  "Description of the API key\u0027s purpose"
                                                                                                  },
                                                                                  "type":  {
                                                                                               "type":  "string",
                                                                                               "enum":  [
                                                                                                            "user",
                                                                                                            "service",
                                                                                                            "partner",
                                                                                                            "anonymous"
                                                                                                        ],
                                                                                               "description":  "Type of API key"
                                                                                           },
                                                                                  "userId":  {
                                                                                                 "type":  "string",
                                                                                                 "description":  "User ID for user-type keys"
                                                                                             },
                                                                                  "serviceAccountId":  {
                                                                                                           "type":  "string",
                                                                                                           "description":  "Service account ID for service-type keys"
                                                                                                       },
                                                                                  "partnerId":  {
                                                                                                    "type":  "string",
                                                                                                    "description":  "Partner ID for partner-type keys"
                                                                                                },
                                                                                  "scopes":  {
                                                                                                 "description":  "Scopes/permissions for the API key",
                                                                                                 "type":  "array",
                                                                                                 "items":  {
                                                                                                               "type":  "string"
                                                                                                           }
                                                                                             },
                                                                                  "permissions":  {
                                                                                                      "description":  "Additional permissions for the API key",
                                                                                                      "type":  "array",
                                                                                                      "items":  {
                                                                                                                    "type":  "string"
                                                                                                                }
                                                                                                  },
                                                                                  "rateLimitTier":  {
                                                                                                        "type":  "string",
                                                                                                        "enum":  [
                                                                                                                     "anonymous",
                                                                                                                     "basic",
                                                                                                                     "standard",
                                                                                                                     "premium",
                                                                                                                     "unlimited"
                                                                                                                 ],
                                                                                                        "description":  "Rate limit tier for the API key",
                                                                                                        "default":  "standard"
                                                                                                    },
                                                                                  "expiresAt":  {
                                                                                                    "format":  "date-time",
                                                                                                    "type":  "string",
                                                                                                    "description":  "Expiration date for the API key"
                                                                                                },
                                                                                  "ipWhitelist":  {
                                                                                                      "description":  "IP addresses allowed to use this key (supports CIDR notation)",
                                                                                                      "type":  "array",
                                                                                                      "items":  {
                                                                                                                    "type":  "string"
                                                                                                                }
                                                                                                  },
                                                                                  "allowedOrigins":  {
                                                                                                         "description":  "Origins allowed to use this key",
                                                                                                         "type":  "array",
                                                                                                         "items":  {
                                                                                                                       "type":  "string"
                                                                                                                   }
                                                                                                     },
                                                                                  "maxRequestsPerMinute":  {
                                                                                                               "type":  "number",
                                                                                                               "description":  "Maximum requests per minute"
                                                                                                           },
                                                                                  "maxRequestsPerDay":  {
                                                                                                            "type":  "number",
                                                                                                            "description":  "Maximum requests per day"
                                                                                                        }
                                                                              },
                                                               "required":  [
                                                                                "name",
                                                                                "type"
                                                                            ]
                                                           },
                                       "ApiKeyResponseDto":  {
                                                                 "type":  "object",
                                                                 "properties":  {
                                                                                    "id":  {
                                                                                               "type":  "string",
                                                                                               "description":  "Unique identifier of the API key",
                                                                                               "example":  "550e8400-e29b-41d4-a716-446655440000"
                                                                                           },
                                                                                    "name":  {
                                                                                                 "type":  "string",
                                                                                                 "description":  "Human-readable name for the API key",
                                                                                                 "example":  "Production API Key"
                                                                                             },
                                                                                    "description":  {
                                                                                                        "type":  "string",
                                                                                                        "description":  "Optional description of the API key\u0027s purpose",
                                                                                                        "example":  "Used for production environment integrations"
                                                                                                    },
                                                                                    "type":  {
                                                                                                 "type":  "string",
                                                                                                 "description":  "Type of API key",
                                                                                                 "enum":  [
                                                                                                              "user",
                                                                                                              "service",
                                                                                                              "partner",
                                                                                                              "anonymous"
                                                                                                          ],
                                                                                                 "example":  "user"
                                                                                             },
                                                                                    "keyPrefix":  {
                                                                                                      "type":  "string",
                                                                                                      "description":  "Key prefix for identification (visible part)",
                                                                                                      "example":  "uk_a1b2c3d4"
                                                                                                  },
                                                                                    "key":  {
                                                                                                "type":  "string",
                                                                                                "description":  "Full API key value (only returned on creation and rotation)",
                                                                                                "example":  "uk_a1b2c3d4_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnop"
                                                                                            },
                                                                                    "permissions":  {
                                                                                                        "description":  "Array of permission strings granted to this key",
                                                                                                        "example":  [
                                                                                                                        "swap:read",
                                                                                                                        "swap:create"
                                                                                                                    ],
                                                                                                        "type":  "array",
                                                                                                        "items":  {
                                                                                                                      "type":  "string"
                                                                                                                  }
                                                                                                    },
                                                                                    "ipRestrictions":  {
                                                                                                           "description":  "IP addresses or CIDR ranges allowed to use this key",
                                                                                                           "example":  [
                                                                                                                           "192.168.1.0/24",
                                                                                                                           "10.0.0.1"
                                                                                                                       ],
                                                                                                           "type":  "array",
                                                                                                           "items":  {
                                                                                                                         "type":  "string"
                                                                                                                     }
                                                                                                       },
                                                                                    "expiresAt":  {
                                                                                                      "format":  "date-time",
                                                                                                      "type":  "string",
                                                                                                      "description":  "Expiration date of the API key",
                                                                                                      "example":  "2024-12-31T23:59:59Z"
                                                                                                  },
                                                                                    "lastUsedAt":  {
                                                                                                       "format":  "date-time",
                                                                                                       "type":  "string",
                                                                                                       "description":  "Last time this API key was used",
                                                                                                       "example":  "2024-01-15T10:30:00Z"
                                                                                                   },
                                                                                    "createdAt":  {
                                                                                                      "format":  "date-time",
                                                                                                      "type":  "string",
                                                                                                      "description":  "Creation timestamp",
                                                                                                      "example":  "2024-01-01T00:00:00Z"
                                                                                                  },
                                                                                    "updatedAt":  {
                                                                                                      "format":  "date-time",
                                                                                                      "type":  "string",
                                                                                                      "description":  "Last update timestamp",
                                                                                                      "example":  "2024-01-01T00:00:00Z"
                                                                                                  }
                                                                                },
                                                                 "required":  [
                                                                                  "id",
                                                                                  "name",
                                                                                  "type",
                                                                                  "keyPrefix",
                                                                                  "createdAt",
                                                                                  "updatedAt"
                                                                              ]
                                                             },
                                       "ApiKeyListResponseDto":  {
                                                                     "type":  "object",
                                                                     "properties":  {
                                                                                        "items":  {
                                                                                                      "description":  "Array of API keys",
                                                                                                      "type":  "array",
                                                                                                      "items":  {
                                                                                                                    "$ref":  "#/components/schemas/ApiKeyResponseDto"
                                                                                                                }
                                                                                                  },
                                                                                        "total":  {
                                                                                                      "type":  "number",
                                                                                                      "description":  "Total number of API keys matching the query",
                                                                                                      "example":  42
                                                                                                  },
                                                                                        "page":  {
                                                                                                     "type":  "number",
                                                                                                     "description":  "Current page number",
                                                                                                     "example":  1
                                                                                                 },
                                                                                        "limit":  {
                                                                                                      "type":  "number",
                                                                                                      "description":  "Number of items per page",
                                                                                                      "example":  20
                                                                                                  },
                                                                                        "totalPages":  {
                                                                                                           "type":  "number",
                                                                                                           "description":  "Total number of pages",
                                                                                                           "example":  3
                                                                                                       }
                                                                                    },
                                                                     "required":  [
                                                                                      "items",
                                                                                      "total",
                                                                                      "page",
                                                                                      "limit",
                                                                                      "totalPages"
                                                                                  ]
                                                                 },
                                       "UpdateApiKeyDto":  {
                                                               "type":  "object",
                                                               "properties":  {
                                                                                  "name":  {
                                                                                               "type":  "string",
                                                                                               "description":  "Name for the API key"
                                                                                           },
                                                                                  "description":  {
                                                                                                      "type":  "string",
                                                                                                      "description":  "Description of the API key\u0027s purpose"
                                                                                                  },
                                                                                  "scopes":  {
                                                                                                 "description":  "Scopes/permissions for the API key",
                                                                                                 "type":  "array",
                                                                                                 "items":  {
                                                                                                               "type":  "string"
                                                                                                           }
                                                                                             },
                                                                                  "permissions":  {
                                                                                                      "description":  "Additional permissions for the API key",
                                                                                                      "type":  "array",
                                                                                                      "items":  {
                                                                                                                    "type":  "string"
                                                                                                                }
                                                                                                  },
                                                                                  "rateLimitTier":  {
                                                                                                        "type":  "string",
                                                                                                        "enum":  [
                                                                                                                     "anonymous",
                                                                                                                     "basic",
                                                                                                                     "standard",
                                                                                                                     "premium",
                                                                                                                     "unlimited"
                                                                                                                 ],
                                                                                                        "description":  "Rate limit tier for the API key",
                                                                                                        "default":  "standard"
                                                                                                    },
                                                                                  "expiresAt":  {
                                                                                                    "format":  "date-time",
                                                                                                    "type":  "string",
                                                                                                    "description":  "Expiration date for the API key"
                                                                                                },
                                                                                  "ipWhitelist":  {
                                                                                                      "description":  "IP addresses allowed to use this key (supports CIDR notation)",
                                                                                                      "type":  "array",
                                                                                                      "items":  {
                                                                                                                    "type":  "string"
                                                                                                                }
                                                                                                  },
                                                                                  "allowedOrigins":  {
                                                                                                         "description":  "Origins allowed to use this key",
                                                                                                         "type":  "array",
                                                                                                         "items":  {
                                                                                                                       "type":  "string"
                                                                                                                   }
                                                                                                     },
                                                                                  "maxRequestsPerMinute":  {
                                                                                                               "type":  "number",
                                                                                                               "description":  "Maximum requests per minute"
                                                                                                           },
                                                                                  "maxRequestsPerDay":  {
                                                                                                            "type":  "number",
                                                                                                            "description":  "Maximum requests per day"
                                                                                                        }
                                                                              }
                                                           },
                                       "RotateApiKeyDto":  {
                                                               "type":  "object",
                                                               "properties":  {
                                                                                  "gracePeriodHours":  {
                                                                                                           "type":  "number",
                                                                                                           "description":  "Grace period in hours for the old key to remain valid",
                                                                                                           "minimum":  0,
                                                                                                           "maximum":  168
                                                                                                       }
                                                                              }
                                                           },
                                       "CreateServiceAccountDto":  {
                                                                       "type":  "object",
                                                                       "properties":  {
                                                                                          "identifier":  {
                                                                                                             "type":  "string",
                                                                                                             "description":  "Unique identifier for the service account (auto-generated if not provided)",
                                                                                                             "example":  "payment-processor"
                                                                                                         },
                                                                                          "displayName":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "Display name for the service account",
                                                                                                              "example":  "Payment Processing Service"
                                                                                                          },
                                                                                          "description":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "Description of the service account\u0027s purpose",
                                                                                                              "example":  "Service account for processing payments and refunds"
                                                                                                          },
                                                                                          "contactEmail":  {
                                                                                                               "type":  "string",
                                                                                                               "description":  "Contact email for the service account",
                                                                                                               "example":  "payments@example.com"
                                                                                                           },
                                                                                          "roles":  {
                                                                                                        "description":  "Roles assigned to the service account",
                                                                                                        "example":  [
                                                                                                                        "service",
                                                                                                                        "payment-processor"
                                                                                                                    ],
                                                                                                        "type":  "array",
                                                                                                        "items":  {
                                                                                                                      "type":  "string"
                                                                                                                  }
                                                                                                    },
                                                                                          "permissions":  {
                                                                                                              "description":  "Permissions assigned to the service account",
                                                                                                              "example":  [
                                                                                                                              "payments:read",
                                                                                                                              "payments:write"
                                                                                                                          ],
                                                                                                              "type":  "array",
                                                                                                              "items":  {
                                                                                                                            "type":  "string"
                                                                                                                        }
                                                                                                          },
                                                                                          "metadata":  {
                                                                                                           "type":  "object",
                                                                                                           "description":  "Additional metadata for the service account",
                                                                                                           "example":  {
                                                                                                                           "department":  "finance",
                                                                                                                           "team":  "payments"
                                                                                                                       }
                                                                                                       }
                                                                                      },
                                                                       "required":  [
                                                                                        "displayName"
                                                                                    ]
                                                                   },
                                       "ServiceAccount":  {
                                                              "type":  "object",
                                                              "properties":  {

                                                                             }
                                                          },
                                       "ServiceAccountResponseDto":  {
                                                                         "type":  "object",
                                                                         "properties":  {
                                                                                            "id":  {
                                                                                                       "type":  "string",
                                                                                                       "description":  "Unique identifier of the service account",
                                                                                                       "example":  "550e8400-e29b-41d4-a716-446655440000"
                                                                                                   },
                                                                                            "identifier":  {
                                                                                                               "type":  "string",
                                                                                                               "description":  "Unique identifier string for the service account",
                                                                                                               "example":  "payment-processor"
                                                                                                           },
                                                                                            "displayName":  {
                                                                                                                "type":  "string",
                                                                                                                "description":  "Display name for the service account",
                                                                                                                "example":  "Payment Processing Service"
                                                                                                            },
                                                                                            "description":  {
                                                                                                                "type":  "string",
                                                                                                                "description":  "Description of the service account\u0027s purpose",
                                                                                                                "example":  "Service account for processing payments and refunds"
                                                                                                            },
                                                                                            "roles":  {
                                                                                                          "description":  "Roles assigned to the service account",
                                                                                                          "example":  [
                                                                                                                          "service",
                                                                                                                          "payment-processor"
                                                                                                                      ],
                                                                                                          "type":  "array",
                                                                                                          "items":  {
                                                                                                                        "type":  "string"
                                                                                                                    }
                                                                                                      },
                                                                                            "permissions":  {
                                                                                                                "description":  "Permissions assigned to the service account",
                                                                                                                "example":  [
                                                                                                                                "payments:read",
                                                                                                                                "payments:write"
                                                                                                                            ],
                                                                                                                "type":  "array",
                                                                                                                "items":  {
                                                                                                                              "type":  "string"
                                                                                                                          }
                                                                                                            },
                                                                                            "metadata":  {
                                                                                                             "type":  "object",
                                                                                                             "description":  "Additional metadata for the service account",
                                                                                                             "example":  {
                                                                                                                             "department":  "finance",
                                                                                                                             "team":  "payments"
                                                                                                                         }
                                                                                                         },
                                                                                            "contactEmail":  {
                                                                                                                 "type":  "string",
                                                                                                                 "description":  "Contact email for the service account",
                                                                                                                 "example":  "payments@example.com"
                                                                                                             },
                                                                                            "isActive":  {
                                                                                                             "type":  "boolean",
                                                                                                             "description":  "Whether the service account is active",
                                                                                                             "example":  true
                                                                                                         },
                                                                                            "createdAt":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "Creation timestamp as ISO string",
                                                                                                              "example":  "2024-01-01T00:00:00.000Z"
                                                                                                          },
                                                                                            "updatedAt":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "Last update timestamp as ISO string",
                                                                                                              "example":  "2024-01-01T00:00:00.000Z"
                                                                                                          },
                                                                                            "createdBy":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "ID of the user who created this service account",
                                                                                                              "example":  "550e8400-e29b-41d4-a716-446655440000"
                                                                                                          }
                                                                                        },
                                                                         "required":  [
                                                                                          "id",
                                                                                          "identifier",
                                                                                          "displayName",
                                                                                          "roles",
                                                                                          "permissions",
                                                                                          "metadata",
                                                                                          "isActive",
                                                                                          "createdAt",
                                                                                          "updatedAt"
                                                                                      ]
                                                                     },
                                       "UpdateServiceAccountDto":  {
                                                                       "type":  "object",
                                                                       "properties":  {
                                                                                          "identifier":  {
                                                                                                             "type":  "string",
                                                                                                             "description":  "Unique identifier for the service account (auto-generated if not provided)",
                                                                                                             "example":  "payment-processor"
                                                                                                         },
                                                                                          "displayName":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "Display name for the service account",
                                                                                                              "example":  "Payment Processing Service"
                                                                                                          },
                                                                                          "description":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "Description of the service account\u0027s purpose",
                                                                                                              "example":  "Service account for processing payments and refunds"
                                                                                                          },
                                                                                          "contactEmail":  {
                                                                                                               "type":  "string",
                                                                                                               "description":  "Contact email for the service account",
                                                                                                               "example":  "payments@example.com"
                                                                                                           },
                                                                                          "roles":  {
                                                                                                        "description":  "Roles assigned to the service account",
                                                                                                        "example":  [
                                                                                                                        "service",
                                                                                                                        "payment-processor"
                                                                                                                    ],
                                                                                                        "type":  "array",
                                                                                                        "items":  {
                                                                                                                      "type":  "string"
                                                                                                                  }
                                                                                                    },
                                                                                          "permissions":  {
                                                                                                              "description":  "Permissions assigned to the service account",
                                                                                                              "example":  [
                                                                                                                              "payments:read",
                                                                                                                              "payments:write"
                                                                                                                          ],
                                                                                                              "type":  "array",
                                                                                                              "items":  {
                                                                                                                            "type":  "string"
                                                                                                                        }
                                                                                                          },
                                                                                          "metadata":  {
                                                                                                           "type":  "object",
                                                                                                           "description":  "Additional metadata for the service account",
                                                                                                           "example":  {
                                                                                                                           "department":  "finance",
                                                                                                                           "team":  "payments"
                                                                                                                       }
                                                                                                       },
                                                                                          "isActive":  {
                                                                                                           "type":  "boolean",
                                                                                                           "description":  "Whether the service account is active",
                                                                                                           "example":  true
                                                                                                       }
                                                                                      }
                                                                   },
                                       "FxRateResponse":  {
                                                              "type":  "object",
                                                              "properties":  {
                                                                                 "baseCurrency":  {
                                                                                                      "type":  "string",
                                                                                                      "description":  "Base currency code",
                                                                                                      "example":  "BTC"
                                                                                                  },
                                                                                 "targetCurrency":  {
                                                                                                        "type":  "string",
                                                                                                        "description":  "Target currency code",
                                                                                                        "example":  "KES"
                                                                                                    },
                                                                                 "rate":  {
                                                                                              "type":  "number",
                                                                                              "description":  "FX rate",
                                                                                              "example":  7500000
                                                                                          },
                                                                                 "timestamp":  {
                                                                                                   "type":  "string",
                                                                                                   "description":  "Rate timestamp",
                                                                                                   "example":  "2024-01-01T00:00:00.000Z"
                                                                                               },
                                                                                 "source":  {
                                                                                                "type":  "string",
                                                                                                "description":  "Data source",
                                                                                                "example":  "aggregated"
                                                                                            },
                                                                                 "confidence":  {
                                                                                                    "type":  "number",
                                                                                                    "description":  "Confidence level (0-1)",
                                                                                                    "example":  0.95
                                                                                                }
                                                                             },
                                                              "required":  [
                                                                               "baseCurrency",
                                                                               "targetCurrency",
                                                                               "rate",
                                                                               "timestamp",
                                                                               "source"
                                                                           ]
                                                          },
                                       "AggregatedFxRateResponse":  {
                                                                        "type":  "object",
                                                                        "properties":  {
                                                                                           "baseCurrency":  {
                                                                                                                "type":  "string",
                                                                                                                "description":  "Base currency code",
                                                                                                                "example":  "BTC"
                                                                                                            },
                                                                                           "targetCurrency":  {
                                                                                                                  "type":  "string",
                                                                                                                  "description":  "Target currency code",
                                                                                                                  "example":  "KES"
                                                                                                              },
                                                                                           "rate":  {
                                                                                                        "type":  "number",
                                                                                                        "description":  "FX rate",
                                                                                                        "example":  7500000
                                                                                                    },
                                                                                           "timestamp":  {
                                                                                                             "type":  "string",
                                                                                                             "description":  "Rate timestamp",
                                                                                                             "example":  "2024-01-01T00:00:00.000Z"
                                                                                                         },
                                                                                           "source":  {
                                                                                                          "type":  "string",
                                                                                                          "description":  "Data source",
                                                                                                          "example":  "aggregated"
                                                                                                      },
                                                                                           "confidence":  {
                                                                                                              "type":  "number",
                                                                                                              "description":  "Confidence level (0-1)",
                                                                                                              "example":  0.95
                                                                                                          },
                                                                                           "sources":  {
                                                                                                           "type":  "array",
                                                                                                           "description":  "Individual source rates used in aggregation",
                                                                                                           "items":  {
                                                                                                                         "type":  "object",
                                                                                                                         "properties":  {
                                                                                                                                            "source":  {
                                                                                                                                                           "type":  "string",
                                                                                                                                                           "example":  "currency_api"
                                                                                                                                                       },
                                                                                                                                            "rate":  {
                                                                                                                                                         "type":  "number",
                                                                                                                                                         "example":  7500000
                                                                                                                                                     },
                                                                                                                                            "timestamp":  {
                                                                                                                                                              "type":  "string",
                                                                                                                                                              "example":  "2024-01-01T00:00:00.000Z"
                                                                                                                                                          }
                                                                                                                                        }
                                                                                                                     }
                                                                                                       }
                                                                                       },
                                                                        "required":  [
                                                                                         "baseCurrency",
                                                                                         "targetCurrency",
                                                                                         "rate",
                                                                                         "timestamp",
                                                                                         "source",
                                                                                         "sources"
                                                                                     ]
                                                                    },
                                       "SupportedPairsResponse":  {
                                                                      "type":  "object",
                                                                      "properties":  {
                                                                                         "pairs":  {
                                                                                                       "type":  "array",
                                                                                                       "description":  "List of supported currency pairs",
                                                                                                       "items":  {
                                                                                                                     "type":  "string"
                                                                                                                 },
                                                                                                       "example":  [
                                                                                                                       "BTC-KES",
                                                                                                                       "BTC-USD",
                                                                                                                       "USD-KES"
                                                                                                                   ]
                                                                                                   }
                                                                                     },
                                                                      "required":  [
                                                                                       "pairs"
                                                                                   ]
                                                                  },
                                       "HealthStatusResponse":  {
                                                                    "type":  "object",
                                                                    "properties":  {
                                                                                       "sources":  {
                                                                                                       "type":  "object",
                                                                                                       "description":  "Detailed health status of each rate source",
                                                                                                       "additionalProperties":  {
                                                                                                                                    "$ref":  "#/components/schemas/SourceHealthStatus"
                                                                                                                                },
                                                                                                       "example":  {
                                                                                                                       "currency_api":  {
                                                                                                                                            "status":  "healthy",
                                                                                                                                            "lastUpdate":  "2024-01-01T00:00:00.000Z",
                                                                                                                                            "responseTime":  250,
                                                                                                                                            "enabled":  true
                                                                                                                                        },
                                                                                                                       "coingecko":  {
                                                                                                                                         "status":  "error",
                                                                                                                                         "error":  "Rate limited",
                                                                                                                                         "responseTime":  1000,
                                                                                                                                         "enabled":  true
                                                                                                                                     }
                                                                                                                   }
                                                                                                   },
                                                                                       "healthy":  {
                                                                                                       "type":  "boolean",
                                                                                                       "description":  "Overall system health",
                                                                                                       "example":  true
                                                                                                   }
                                                                                   },
                                                                    "required":  [
                                                                                     "sources",
                                                                                     "healthy"
                                                                                 ]
                                                                },
                                       "CacheMetricsResponse":  {
                                                                    "type":  "object",
                                                                    "properties":  {
                                                                                       "totalEntries":  {
                                                                                                            "type":  "number",
                                                                                                            "description":  "Total cache entries",
                                                                                                            "example":  150
                                                                                                        },
                                                                                       "fxCacheEntries":  {
                                                                                                              "type":  "number",
                                                                                                              "description":  "FX rate cache entries",
                                                                                                              "example":  45
                                                                                                          },
                                                                                       "staleCacheEntries":  {
                                                                                                                 "type":  "number",
                                                                                                                 "description":  "Stale cache entries",
                                                                                                                 "example":  15
                                                                                                             },
                                                                                       "hitRate":  {
                                                                                                       "type":  "number",
                                                                                                       "description":  "Cache hit rate",
                                                                                                       "example":  0.85
                                                                                                   },
                                                                                       "sizeBytes":  {
                                                                                                         "type":  "number",
                                                                                                         "description":  "Cache size in bytes",
                                                                                                         "example":  1024000
                                                                                                     }
                                                                                   },
                                                                    "required":  [
                                                                                     "totalEntries",
                                                                                     "fxCacheEntries",
                                                                                     "staleCacheEntries",
                                                                                     "hitRate",
                                                                                     "sizeBytes"
                                                                                 ]
                                                                },
                                       "SwapType":  {
                                                        "type":  "string",
                                                        "description":  "Type of swap operation",
                                                        "enum":  [
                                                                     "onramp",
                                                                     "offramp"
                                                                 ]
                                                    },
                                       "Currency":  {
                                                        "type":  "string",
                                                        "description":  "Currency to validate liquidity for",
                                                        "enum":  [
                                                                     "BTC",
                                                                     "KES",
                                                                     "USDT",
                                                                     "USD",
                                                                     "UNRECOGNIZED"
                                                                 ]
                                                    },
                                       "PaymentChannel":  {
                                                              "type":  "string",
                                                              "description":  "Payment channel for the transaction",
                                                              "enum":  [
                                                                           "mpesa_phone",
                                                                           "mpesa_till",
                                                                           "mpesa_paybill",
                                                                           "bank_transfer",
                                                                           "card"
                                                                       ]
                                                          },
                                       "AgentSelectionMode":  {
                                                                  "type":  "string",
                                                                  "description":  "Agent selection mode. Automatically determined based on agentId presence",
                                                                  "enum":  [
                                                                               "direct",
                                                                               "auto"
                                                                           ]
                                                              },
                                       "CreateSwapDto":  {
                                                             "type":  "object",
                                                             "properties":  {
                                                                                "type":  {
                                                                                             "example":  "onramp",
                                                                                             "$ref":  "#/components/schemas/SwapType"
                                                                                         },
                                                                                "fiatAmount":  {
                                                                                                   "type":  "string",
                                                                                                   "description":  "Fiat amount in smallest units (e.g., cents for USD, pence for GBP)",
                                                                                                   "example":  "10000",
                                                                                                   "pattern":  "^[0-9]+$"
                                                                                               },
                                                                                "fiatCurrency":  {
                                                                                                     "example":  "USD",
                                                                                                     "$ref":  "#/components/schemas/Currency"
                                                                                                 },
                                                                                "paymentChannel":  {
                                                                                                       "example":  "bank_transfer",
                                                                                                       "$ref":  "#/components/schemas/PaymentChannel"
                                                                                                   },
                                                                                "agentMargin":  {
                                                                                                    "type":  "number",
                                                                                                    "description":  "Agent margin in basis points (100 basis points = 1%)",
                                                                                                    "example":  250,
                                                                                                    "minimum":  0,
                                                                                                    "maximum":  10000
                                                                                                },
                                                                                "reference":  {
                                                                                                  "type":  "string",
                                                                                                  "description":  "Unique reference identifier for the swap",
                                                                                                  "example":  "SWAP-2024-001234",
                                                                                                  "pattern":  "^[A-Z0-9-]+$"
                                                                                              },
                                                                                "paymentDetails":  {
                                                                                                       "type":  "object",
                                                                                                       "description":  "Payment details specific to the payment channel (bank account, mobile money, etc.)",
                                                                                                       "example":  {
                                                                                                                       "accountNumber":  "1234567890",
                                                                                                                       "accountName":  "John Doe",
                                                                                                                       "bankName":  "Example Bank",
                                                                                                                       "routingNumber":  "123456789"
                                                                                                                   }
                                                                                                   },
                                                                                "metadata":  {
                                                                                                 "type":  "object",
                                                                                                 "description":  "Additional metadata for the swap",
                                                                                                 "example":  {
                                                                                                                 "userNote":  "Urgent transfer",
                                                                                                                 "source":  "mobile_app",
                                                                                                                 "ipAddress":  "192.168.1.1"
                                                                                                             }
                                                                                             },
                                                                                "agentId":  {
                                                                                                "type":  "string",
                                                                                                "description":  "Pre-selected agent ID for direct selection. When provided, swap immediately moves to \u0027agent_matched\u0027 state",
                                                                                                "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                "format":  "uuid"
                                                                                            },
                                                                                "agentSelectionMode":  {
                                                                                                           "example":  "direct",
                                                                                                           "$ref":  "#/components/schemas/AgentSelectionMode"
                                                                                                       }
                                                                            },
                                                             "required":  [
                                                                              "type",
                                                                              "fiatAmount",
                                                                              "fiatCurrency",
                                                                              "paymentChannel"
                                                                          ]
                                                         },
                                       "SwapState":  {
                                                         "type":  "string",
                                                         "description":  "Current state of the swap in the workflow",
                                                         "enum":  [
                                                                      "created",
                                                                      "agent_matched",
                                                                      "escrow_pending",
                                                                      "escrow_locked",
                                                                      "payment_instructed",
                                                                      "payment_pending",
                                                                      "payment_submitted",
                                                                      "payment_confirmed_user",
                                                                      "payment_confirmed_agent",
                                                                      "confirmation_pending",
                                                                      "completed",
                                                                      "cancelled",
                                                                      "disputed",
                                                                      "dispute_evidence_collection",
                                                                      "dispute_internal_review",
                                                                      "dispute_resolved",
                                                                      "dispute_review",
                                                                      "refunded",
                                                                      "expired",
                                                                      "agent_timeout",
                                                                      "transferred_to_backup"
                                                                  ]
                                                     },
                                       "SwapAgentInfo":  {
                                                             "type":  "object",
                                                             "properties":  {
                                                                                "id":  {
                                                                                           "type":  "string",
                                                                                           "description":  "Unique identifier of the agent",
                                                                                           "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                           "format":  "uuid"
                                                                                       },
                                                                                "type":  {
                                                                                             "type":  "string",
                                                                                             "description":  "Type of agent (always \u0027human\u0027 - some may use automated gateways)",
                                                                                             "example":  "human",
                                                                                             "enum":  [
                                                                                                          "human"
                                                                                                      ]
                                                                                         },
                                                                                "isAutomated":  {
                                                                                                    "type":  "boolean",
                                                                                                    "description":  "Whether the agent uses automated payment gateways",
                                                                                                    "example":  false
                                                                                                },
                                                                                "rating":  {
                                                                                               "type":  "number",
                                                                                               "description":  "Agent\u0027s average rating (1.0 to 5.0)",
                                                                                               "example":  4.5,
                                                                                               "minimum":  1,
                                                                                               "maximum":  5
                                                                                           }
                                                                            },
                                                             "required":  [
                                                                              "id",
                                                                              "type"
                                                                          ]
                                                         },
                                       "SwapConfirmations":  {
                                                                 "type":  "object",
                                                                 "properties":  {
                                                                                    "user":  {
                                                                                                 "type":  "boolean",
                                                                                                 "description":  "Whether the user has confirmed the payment",
                                                                                                 "example":  true
                                                                                             },
                                                                                    "agent":  {
                                                                                                  "type":  "boolean",
                                                                                                  "description":  "Whether the agent has confirmed the payment",
                                                                                                  "example":  false
                                                                                              }
                                                                                },
                                                                 "required":  [
                                                                                  "user",
                                                                                  "agent"
                                                                              ]
                                                             },
                                       "SwapResponse":  {
                                                            "type":  "object",
                                                            "properties":  {
                                                                               "id":  {
                                                                                          "type":  "string",
                                                                                          "description":  "Unique identifier of the swap",
                                                                                          "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                          "format":  "uuid"
                                                                                      },
                                                                               "reference":  {
                                                                                                 "type":  "string",
                                                                                                 "description":  "Human-readable reference for the swap",
                                                                                                 "example":  "SWAP-2024-001234"
                                                                                             },
                                                                               "type":  {
                                                                                            "example":  "onramp",
                                                                                            "$ref":  "#/components/schemas/SwapType"
                                                                                        },
                                                                               "state":  {
                                                                                             "example":  "agent_matched",
                                                                                             "$ref":  "#/components/schemas/SwapState"
                                                                                         },
                                                                               "fiatAmount":  {
                                                                                                  "type":  "string",
                                                                                                  "description":  "Fiat amount in smallest units (e.g., cents)",
                                                                                                  "example":  "10000"
                                                                                              },
                                                                               "fiatCurrency":  {
                                                                                                    "example":  "USD",
                                                                                                    "$ref":  "#/components/schemas/Currency"
                                                                                                },
                                                                               "bitcoinAmount":  {
                                                                                                     "type":  "string",
                                                                                                     "description":  "Bitcoin amount in satoshis",
                                                                                                     "example":  "500000"
                                                                                                 },
                                                                               "exchangeRate":  {
                                                                                                    "type":  "string",
                                                                                                    "description":  "Exchange rate applied to the swap",
                                                                                                    "example":  "45000.50"
                                                                                                },
                                                                               "agentMargin":  {
                                                                                                   "type":  "number",
                                                                                                   "description":  "Agent margin in basis points",
                                                                                                   "example":  250
                                                                                               },
                                                                               "paymentChannel":  {
                                                                                                      "example":  "bank_transfer",
                                                                                                      "$ref":  "#/components/schemas/PaymentChannel"
                                                                                                  },
                                                                               "paymentDetails":  {
                                                                                                      "type":  "object",
                                                                                                      "description":  "Payment details (only visible after agent matching)",
                                                                                                      "example":  {
                                                                                                                      "accountNumber":  "1234567890",
                                                                                                                      "accountName":  "John Doe",
                                                                                                                      "bankName":  "Example Bank"
                                                                                                                  }
                                                                                                  },
                                                                               "agent":  {
                                                                                             "description":  "Agent information if matched",
                                                                                             "allOf":  [
                                                                                                           {
                                                                                                               "$ref":  "#/components/schemas/SwapAgentInfo"
                                                                                                           }
                                                                                                       ]
                                                                                         },
                                                                               "escrowInvoice":  {
                                                                                                     "type":  "string",
                                                                                                     "description":  "Lightning invoice for escrow (visible during escrow states)",
                                                                                                     "example":  "lnbc1000n1ps9qx3pp5..."
                                                                                                 },
                                                                               "confirmations":  {
                                                                                                     "description":  "Payment confirmation status from both parties",
                                                                                                     "allOf":  [
                                                                                                                   {
                                                                                                                       "$ref":  "#/components/schemas/SwapConfirmations"
                                                                                                                   }
                                                                                                               ]
                                                                                                 },
                                                                               "canCancel":  {
                                                                                                 "type":  "boolean",
                                                                                                 "description":  "Indicates whether the swap can be cancelled in its current state",
                                                                                                 "example":  true
                                                                                             },
                                                                               "createdAt":  {
                                                                                                 "type":  "string",
                                                                                                 "description":  "ISO 8601 timestamp when the swap was created",
                                                                                                 "example":  "2024-01-15T10:30:00.000Z",
                                                                                                 "format":  "date-time"
                                                                                             },
                                                                               "claimedAt":  {
                                                                                                 "type":  "string",
                                                                                                 "description":  "ISO 8601 timestamp when an agent claimed the swap",
                                                                                                 "example":  "2024-01-15T10:35:00.000Z",
                                                                                                 "format":  "date-time"
                                                                                             },
                                                                               "completedAt":  {
                                                                                                   "type":  "string",
                                                                                                   "description":  "ISO 8601 timestamp when the swap was completed",
                                                                                                   "example":  "2024-01-15T11:00:00.000Z",
                                                                                                   "format":  "date-time"
                                                                                               },
                                                                               "metadata":  {
                                                                                                "type":  "object",
                                                                                                "description":  "Additional metadata including dispute details and payment proofs",
                                                                                                "example":  {
                                                                                                                "disputeDetails":  null,
                                                                                                                "paymentProofUser":  null,
                                                                                                                "paymentProofAgent":  null,
                                                                                                                "agentSelectionMode":  "direct"
                                                                                                            }
                                                                                            }
                                                                           },
                                                            "required":  [
                                                                             "id",
                                                                             "reference",
                                                                             "type",
                                                                             "state",
                                                                             "fiatAmount",
                                                                             "fiatCurrency",
                                                                             "bitcoinAmount",
                                                                             "exchangeRate",
                                                                             "agentMargin",
                                                                             "paymentChannel",
                                                                             "confirmations",
                                                                             "createdAt"
                                                                         ]
                                                        },
                                       "PaginatedSwapsResponse":  {
                                                                      "type":  "object",
                                                                      "properties":  {
                                                                                         "data":  {
                                                                                                      "description":  "Array of swap records",
                                                                                                      "type":  "array",
                                                                                                      "items":  {
                                                                                                                    "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                }
                                                                                                  },
                                                                                         "total":  {
                                                                                                       "type":  "number",
                                                                                                       "description":  "Total number of swaps matching the query",
                                                                                                       "example":  150
                                                                                                   },
                                                                                         "page":  {
                                                                                                      "type":  "number",
                                                                                                      "description":  "Current page number",
                                                                                                      "example":  1
                                                                                                  },
                                                                                         "limit":  {
                                                                                                       "type":  "number",
                                                                                                       "description":  "Number of items per page",
                                                                                                       "example":  10
                                                                                                   },
                                                                                         "totalPages":  {
                                                                                                            "type":  "number",
                                                                                                            "description":  "Total number of pages available",
                                                                                                            "example":  15
                                                                                                        }
                                                                                     },
                                                                      "required":  [
                                                                                       "data",
                                                                                       "total",
                                                                                       "page",
                                                                                       "limit",
                                                                                       "totalPages"
                                                                                   ]
                                                                  },
                                       "ConfirmationRole":  {
                                                                "type":  "string",
                                                                "description":  "Role of the party confirming the payment (USER or AGENT)",
                                                                "enum":  [
                                                                             "user",
                                                                             "agent"
                                                                         ]
                                                            },
                                       "ConfirmSwapDto":  {
                                                              "type":  "object",
                                                              "properties":  {
                                                                                 "role":  {
                                                                                              "example":  "user",
                                                                                              "$ref":  "#/components/schemas/ConfirmationRole"
                                                                                          }
                                                                             },
                                                              "required":  [
                                                                               "role"
                                                                           ]
                                                          },
                                       "DisputeSwapDto":  {
                                                              "type":  "object",
                                                              "properties":  {
                                                                                 "reason":  {
                                                                                                "type":  "string",
                                                                                                "description":  "Detailed reason for disputing the swap",
                                                                                                "example":  "Payment was not received after 48 hours",
                                                                                                "minLength":  10,
                                                                                                "maxLength":  1000
                                                                                            },
                                                                                 "evidence":  {
                                                                                                  "type":  "object",
                                                                                                  "description":  "Supporting evidence for the dispute (screenshots, transaction IDs, etc.)",
                                                                                                  "example":  {
                                                                                                                  "screenshots":  [
                                                                                                                                      "base64_encoded_image_1",
                                                                                                                                      "base64_encoded_image_2"
                                                                                                                                  ],
                                                                                                                  "transactionReference":  "TXN123456",
                                                                                                                  "additionalNotes":  "Contacted support multiple times"
                                                                                                              }
                                                                                              }
                                                                             },
                                                              "required":  [
                                                                               "reason"
                                                                           ]
                                                          },
                                       "SubmitPaymentProofDto":  {
                                                                     "type":  "object",
                                                                     "properties":  {
                                                                                        "proof":  {
                                                                                                      "type":  "string",
                                                                                                      "description":  "Payment proof (transaction ID, receipt number, confirmation code, etc.)",
                                                                                                      "example":  "TXN-2024-001234-CONFIRMED",
                                                                                                      "minLength":  5,
                                                                                                      "maxLength":  500
                                                                                                  },
                                                                                        "evidence":  {
                                                                                                         "type":  "object",
                                                                                                         "description":  "Additional evidence or metadata supporting the payment proof",
                                                                                                         "example":  {
                                                                                                                         "bankStatement":  "base64_encoded_pdf",
                                                                                                                         "timestamp":  "2024-01-15T10:30:00Z",
                                                                                                                         "paymentMethod":  "wire_transfer"
                                                                                                                     }
                                                                                                     }
                                                                                    },
                                                                     "required":  [
                                                                                      "proof"
                                                                                  ]
                                                                 },
                                       "SubmitDisputeEvidenceDto":  {
                                                                        "type":  "object",
                                                                        "properties":  {
                                                                                           "evidence":  {
                                                                                                            "type":  "object",
                                                                                                            "description":  "Additional evidence for the dispute including screenshots, logs, or communication records",
                                                                                                            "example":  {
                                                                                                                            "communicationLogs":  [
                                                                                                                                                      "email1.txt",
                                                                                                                                                      "chat_transcript.txt"
                                                                                                                                                  ],
                                                                                                                            "bankConfirmation":  "CONF-123456",
                                                                                                                            "timeline":  "Payment sent at 10:00 AM, confirmed by bank at 10:15 AM"
                                                                                                                        }
                                                                                                        },
                                                                                           "documentProof":  {
                                                                                                                 "type":  "string",
                                                                                                                 "description":  "Bank statements, transaction records, or other documents (base64 encoded)",
                                                                                                                 "example":  "JVBERi0xLjQKJeLjz9MKNCAwIG9iago...",
                                                                                                                 "maxLength":  10485760
                                                                                                             }
                                                                                       },
                                                                        "required":  [
                                                                                         "evidence"
                                                                                     ]
                                                                    },
                                       "WebhookEventType":  {
                                                                "type":  "string",
                                                                "description":  "Type of webhook event being reported",
                                                                "enum":  [
                                                                             "payment_received",
                                                                             "payment_sent",
                                                                             "payment_failed"
                                                                         ]
                                                            },
                                       "AgentWebhookDto":  {
                                                               "type":  "object",
                                                               "properties":  {
                                                                                  "reference":  {
                                                                                                    "type":  "string",
                                                                                                    "description":  "Swap reference ID that this webhook relates to",
                                                                                                    "example":  "SWAP-2024-001234",
                                                                                                    "pattern":  "^[A-Z0-9-]+$"
                                                                                                },
                                                                                  "event":  {
                                                                                                "example":  "payment_received",
                                                                                                "$ref":  "#/components/schemas/WebhookEventType"
                                                                                            },
                                                                                  "transactionId":  {
                                                                                                        "type":  "string",
                                                                                                        "description":  "Transaction ID from the payment provider",
                                                                                                        "example":  "PAY-2024-ABC123"
                                                                                                    },
                                                                                  "data":  {
                                                                                               "type":  "object",
                                                                                               "description":  "Additional webhook payload data from the payment provider",
                                                                                               "example":  {
                                                                                                               "provider":  "stripe",
                                                                                                               "amount":  10000,
                                                                                                               "currency":  "USD",
                                                                                                               "status":  "succeeded"
                                                                                                           }
                                                                                           }
                                                                              },
                                                               "required":  [
                                                                                "reference",
                                                                                "event"
                                                                            ]
                                                           },
                                       "DisputeResolution":  {
                                                                 "type":  "string",
                                                                 "description":  "Resolution type for the dispute",
                                                                 "enum":  [
                                                                              "release_to_user",
                                                                              "release_to_agent",
                                                                              "partial_settlement",
                                                                              "full_refund"
                                                                          ]
                                                             },
                                       "ResolveDisputeDto":  {
                                                                 "type":  "object",
                                                                 "properties":  {
                                                                                    "resolution":  {
                                                                                                       "example":  "release_to_user",
                                                                                                       "$ref":  "#/components/schemas/DisputeResolution"
                                                                                                   },
                                                                                    "partialPercentage":  {
                                                                                                              "type":  "number",
                                                                                                              "description":  "Percentage for partial settlement (0-100). Only applicable when resolution is PARTIAL_SETTLEMENT",
                                                                                                              "example":  50,
                                                                                                              "minimum":  0,
                                                                                                              "maximum":  100
                                                                                                          },
                                                                                    "reason":  {
                                                                                                   "type":  "string",
                                                                                                   "description":  "Detailed reason for the resolution decision",
                                                                                                   "example":  "After reviewing the evidence, payment confirmation was verified from the user\u0027s bank",
                                                                                                   "minLength":  20,
                                                                                                   "maxLength":  2000
                                                                                               },
                                                                                    "reviewTeamId":  {
                                                                                                         "type":  "string",
                                                                                                         "description":  "Review team member or arbitrator ID who resolved the dispute",
                                                                                                         "example":  "ADMIN-001",
                                                                                                         "pattern":  "^[A-Z0-9-]+$"
                                                                                                     }
                                                                                },
                                                                 "required":  [
                                                                                  "resolution",
                                                                                  "reason"
                                                                              ]
                                                             },
                                       "TransferSwapDto":  {
                                                               "type":  "object",
                                                               "properties":  {
                                                                                  "newAgentId":  {
                                                                                                     "type":  "string",
                                                                                                     "description":  "UUID of the new agent to transfer the swap to",
                                                                                                     "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                     "format":  "uuid"
                                                                                                 },
                                                                                  "reason":  {
                                                                                                 "type":  "string",
                                                                                                 "description":  "Detailed reason for transferring the swap to another agent",
                                                                                                 "example":  "Original agent unavailable due to technical issues",
                                                                                                 "minLength":  10,
                                                                                                 "maxLength":  500
                                                                                             }
                                                                              },
                                                               "required":  [
                                                                                "newAgentId",
                                                                                "reason"
                                                                            ]
                                                           },
                                       "LightningInfoResponse":  {
                                                                     "type":  "object",
                                                                     "properties":  {
                                                                                        "provider":  {
                                                                                                         "type":  "string",
                                                                                                         "description":  "Provider name",
                                                                                                         "example":  "Phoenix"
                                                                                                     },
                                                                                        "info":  {
                                                                                                     "type":  "object",
                                                                                                     "description":  "Provider information"
                                                                                                 }
                                                                                    },
                                                                     "required":  [
                                                                                      "provider",
                                                                                      "info"
                                                                                  ]
                                                                 },
                                       "LightningBalanceResponse":  {
                                                                        "type":  "object",
                                                                        "properties":  {
                                                                                           "balance_sats":  {
                                                                                                                "type":  "number",
                                                                                                                "description":  "Balance in satoshis",
                                                                                                                "example":  1000000
                                                                                                            },
                                                                                           "inbound_capacity_msats":  {
                                                                                                                          "type":  "number",
                                                                                                                          "description":  "Inbound capacity in millisatoshis",
                                                                                                                          "example":  500000000
                                                                                                                      },
                                                                                           "outbound_capacity_msats":  {
                                                                                                                           "type":  "number",
                                                                                                                           "description":  "Outbound capacity in millisatoshis",
                                                                                                                           "example":  500000000
                                                                                                                       }
                                                                                       },
                                                                        "required":  [
                                                                                         "balance_sats"
                                                                                     ]
                                                                    },
                                       "LightningHealthResponse":  {
                                                                       "type":  "object",
                                                                       "properties":  {
                                                                                          "status":  {
                                                                                                         "type":  "string",
                                                                                                         "description":  "Health status",
                                                                                                         "enum":  [
                                                                                                                      "healthy",
                                                                                                                      "unhealthy"
                                                                                                                  ]
                                                                                                     },
                                                                                          "provider":  {
                                                                                                           "type":  "string",
                                                                                                           "description":  "Provider name",
                                                                                                           "example":  "Phoenix"
                                                                                                       },
                                                                                          "balance_sats":  {
                                                                                                               "type":  "number",
                                                                                                               "description":  "Balance in satoshis",
                                                                                                               "example":  1000000
                                                                                                           },
                                                                                          "error":  {
                                                                                                        "type":  "string",
                                                                                                        "description":  "Error message"
                                                                                                    },
                                                                                          "timestamp":  {
                                                                                                            "type":  "string",
                                                                                                            "description":  "Timestamp",
                                                                                                            "example":  "2024-01-01T00:00:00.000Z"
                                                                                                        }
                                                                                      },
                                                                       "required":  [
                                                                                        "status",
                                                                                        "provider",
                                                                                        "timestamp"
                                                                                    ]
                                                                   },
                                       "GenerateInvoiceDto":  {
                                                                  "type":  "object",
                                                                  "properties":  {
                                                                                     "amount_sats":  {
                                                                                                         "type":  "number",
                                                                                                         "description":  "Amount in satoshis",
                                                                                                         "example":  100000
                                                                                                     },
                                                                                     "description":  {
                                                                                                         "type":  "string",
                                                                                                         "description":  "Invoice description",
                                                                                                         "example":  "Payment for services"
                                                                                                     },
                                                                                     "expiry_secs":  {
                                                                                                         "type":  "number",
                                                                                                         "description":  "Invoice expiry in seconds",
                                                                                                         "example":  3600
                                                                                                     }
                                                                                 },
                                                                  "required":  [
                                                                                   "amount_sats"
                                                                               ]
                                                              },
                                       "LightningInvoiceResponse":  {
                                                                        "type":  "object",
                                                                        "properties":  {
                                                                                           "invoice":  {
                                                                                                           "type":  "string",
                                                                                                           "description":  "Lightning invoice",
                                                                                                           "example":  "lnbc1..."
                                                                                                       },
                                                                                           "amount_sats":  {
                                                                                                               "type":  "number",
                                                                                                               "description":  "Amount in satoshis",
                                                                                                               "example":  100000
                                                                                                           },
                                                                                           "description":  {
                                                                                                               "type":  "string",
                                                                                                               "description":  "Invoice description",
                                                                                                               "example":  "Payment for services"
                                                                                                           },
                                                                                           "expiry":  {
                                                                                                          "type":  "number",
                                                                                                          "description":  "Invoice expiry in seconds",
                                                                                                          "example":  3600
                                                                                                      },
                                                                                           "payment_hash":  {
                                                                                                                "type":  "string",
                                                                                                                "description":  "Payment hash",
                                                                                                                "example":  "abc123..."
                                                                                                            }
                                                                                       },
                                                                        "required":  [
                                                                                         "invoice",
                                                                                         "amount_sats",
                                                                                         "payment_hash"
                                                                                     ]
                                                                    },
                                       "ValidateInvoiceDto":  {
                                                                  "type":  "object",
                                                                  "properties":  {
                                                                                     "invoice":  {
                                                                                                     "type":  "string",
                                                                                                     "description":  "Lightning invoice to validate",
                                                                                                     "example":  "lnbc1..."
                                                                                                 }
                                                                                 },
                                                                  "required":  [
                                                                                   "invoice"
                                                                               ]
                                                              },
                                       "PayInvoiceDto":  {
                                                             "type":  "object",
                                                             "properties":  {
                                                                                "invoice":  {
                                                                                                "type":  "string",
                                                                                                "description":  "Lightning invoice or Lightning address to pay",
                                                                                                "example":  "lnbc1... or user@domain.com"
                                                                                            },
                                                                                "amount_sats":  {
                                                                                                    "type":  "number",
                                                                                                    "description":  "Amount in satoshis (required for Lightning addresses)",
                                                                                                    "example":  100000
                                                                                                },
                                                                                "description":  {
                                                                                                    "type":  "string",
                                                                                                    "description":  "Payment description",
                                                                                                    "example":  "Payment description"
                                                                                                }
                                                                            },
                                                             "required":  [
                                                                              "invoice"
                                                                          ]
                                                         },
                                       "GenerateAddressDto":  {
                                                                  "type":  "object",
                                                                  "properties":  {
                                                                                     "description":  {
                                                                                                         "type":  "string",
                                                                                                         "description":  "Address description",
                                                                                                         "example":  "Funding address for liquidity"
                                                                                                     }
                                                                                 }
                                                              },
                                       "LightningAddressResponse":  {
                                                                        "type":  "object",
                                                                        "properties":  {
                                                                                           "address":  {
                                                                                                           "type":  "string",
                                                                                                           "description":  "Bitcoin address",
                                                                                                           "example":  "bc1q..."
                                                                                                       },
                                                                                           "description":  {
                                                                                                               "type":  "string",
                                                                                                               "description":  "Address description",
                                                                                                               "example":  "Funding address for liquidity"
                                                                                                           }
                                                                                       },
                                                                        "required":  [
                                                                                         "address"
                                                                                     ]
                                                                    },
                                       "BitcoinFundingResponse":  {
                                                                      "type":  "object",
                                                                      "properties":  {
                                                                                         "address":  {
                                                                                                         "type":  "string",
                                                                                                         "description":  "Bitcoin address",
                                                                                                         "example":  "bc1q..."
                                                                                                     },
                                                                                         "amount_sats":  {
                                                                                                             "type":  "number",
                                                                                                             "description":  "Amount in satoshis",
                                                                                                             "example":  500000
                                                                                                         },
                                                                                         "status":  {
                                                                                                        "type":  "string",
                                                                                                        "description":  "Funding status",
                                                                                                        "enum":  [
                                                                                                                     "pending",
                                                                                                                     "confirmed",
                                                                                                                     "failed"
                                                                                                                 ]
                                                                                                    },
                                                                                         "txid":  {
                                                                                                      "type":  "string",
                                                                                                      "description":  "Transaction ID",
                                                                                                      "example":  "abc123..."
                                                                                                  },
                                                                                         "confirmations":  {
                                                                                                               "type":  "number",
                                                                                                               "description":  "Number of confirmations",
                                                                                                               "example":  6
                                                                                                           },
                                                                                         "required_confirmations":  {
                                                                                                                        "type":  "number",
                                                                                                                        "description":  "Required confirmations",
                                                                                                                        "example":  6
                                                                                                                    }
                                                                                     },
                                                                      "required":  [
                                                                                       "address",
                                                                                       "amount_sats",
                                                                                       "status"
                                                                                   ]
                                                                  },
                                       "WithdrawDto":  {
                                                           "type":  "object",
                                                           "properties":  {
                                                                              "address":  {
                                                                                              "type":  "string",
                                                                                              "description":  "Bitcoin address to withdraw to",
                                                                                              "example":  "bc1q..."
                                                                                          },
                                                                              "amount_sats":  {
                                                                                                  "type":  "number",
                                                                                                  "description":  "Amount in satoshis",
                                                                                                  "example":  100000
                                                                                              },
                                                                              "fee_rate_sats_per_vbyte":  {
                                                                                                              "type":  "number",
                                                                                                              "description":  "Fee rate in sats per vbyte",
                                                                                                              "example":  5
                                                                                                          },
                                                                              "description":  {
                                                                                                  "type":  "string",
                                                                                                  "description":  "Withdrawal description",
                                                                                                  "example":  "Withdrawal to cold storage"
                                                                                              }
                                                                          },
                                                           "required":  [
                                                                            "address",
                                                                            "amount_sats"
                                                                        ]
                                                       },
                                       "LightningWithdrawalResponse":  {
                                                                           "type":  "object",
                                                                           "properties":  {
                                                                                              "txid":  {
                                                                                                           "type":  "string",
                                                                                                           "description":  "Transaction ID",
                                                                                                           "example":  "def456..."
                                                                                                       },
                                                                                              "amount_sats":  {
                                                                                                                  "type":  "number",
                                                                                                                  "description":  "Amount in satoshis",
                                                                                                                  "example":  100000
                                                                                                              },
                                                                                              "fee_sats":  {
                                                                                                               "type":  "number",
                                                                                                               "description":  "Fee in satoshis",
                                                                                                               "example":  500
                                                                                                           },
                                                                                              "status":  {
                                                                                                             "type":  "string",
                                                                                                             "description":  "Withdrawal status",
                                                                                                             "example":  "PENDING"
                                                                                                         },
                                                                                              "address":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "Bitcoin address",
                                                                                                              "example":  "bc1q..."
                                                                                                          }
                                                                                          },
                                                                           "required":  [
                                                                                            "txid",
                                                                                            "amount_sats",
                                                                                            "fee_sats",
                                                                                            "status",
                                                                                            "address"
                                                                                        ]
                                                                       },
                                       "LightningChannelResponse":  {
                                                                        "type":  "object",
                                                                        "properties":  {
                                                                                           "channel_id":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "Channel ID",
                                                                                                              "example":  "1234567890abcdef"
                                                                                                          },
                                                                                           "peer_id":  {
                                                                                                           "type":  "string",
                                                                                                           "description":  "Peer node ID",
                                                                                                           "example":  "03abc..."
                                                                                                       },
                                                                                           "capacity_sats":  {
                                                                                                                 "type":  "number",
                                                                                                                 "description":  "Channel capacity in satoshis",
                                                                                                                 "example":  1000000
                                                                                                             },
                                                                                           "local_balance_sats":  {
                                                                                                                      "type":  "number",
                                                                                                                      "description":  "Local balance in satoshis",
                                                                                                                      "example":  500000
                                                                                                                  },
                                                                                           "remote_balance_sats":  {
                                                                                                                       "type":  "number",
                                                                                                                       "description":  "Remote balance in satoshis",
                                                                                                                       "example":  500000
                                                                                                                   },
                                                                                           "is_active":  {
                                                                                                             "type":  "boolean",
                                                                                                             "description":  "Channel is active",
                                                                                                             "example":  true
                                                                                                         },
                                                                                           "is_usable":  {
                                                                                                             "type":  "boolean",
                                                                                                             "description":  "Channel is usable",
                                                                                                             "example":  true
                                                                                                         },
                                                                                           "last_update":  {
                                                                                                               "type":  "string",
                                                                                                               "description":  "Last update timestamp",
                                                                                                               "example":  "2024-01-01T00:00:00.000Z"
                                                                                                           }
                                                                                       },
                                                                        "required":  [
                                                                                         "channel_id",
                                                                                         "peer_id",
                                                                                         "capacity_sats",
                                                                                         "local_balance_sats",
                                                                                         "remote_balance_sats",
                                                                                         "is_active",
                                                                                         "is_usable"
                                                                                     ]
                                                                    },
                                       "LightningPeerResponse":  {
                                                                     "type":  "object",
                                                                     "properties":  {
                                                                                        "peer_id":  {
                                                                                                        "type":  "string",
                                                                                                        "description":  "Peer node ID",
                                                                                                        "example":  "03abc..."
                                                                                                    },
                                                                                        "alias":  {
                                                                                                      "type":  "string",
                                                                                                      "description":  "Peer alias",
                                                                                                      "example":  "Lightning Node"
                                                                                                  },
                                                                                        "channels":  {
                                                                                                         "description":  "Peer channels",
                                                                                                         "type":  "array",
                                                                                                         "items":  {
                                                                                                                       "$ref":  "#/components/schemas/LightningChannelResponse"
                                                                                                                   }
                                                                                                     },
                                                                                        "total_capacity_sats":  {
                                                                                                                    "type":  "number",
                                                                                                                    "description":  "Total capacity in satoshis",
                                                                                                                    "example":  1000000
                                                                                                                },
                                                                                        "total_local_balance_sats":  {
                                                                                                                         "type":  "number",
                                                                                                                         "description":  "Total local balance in satoshis",
                                                                                                                         "example":  500000
                                                                                                                     },
                                                                                        "total_remote_balance_sats":  {
                                                                                                                          "type":  "number",
                                                                                                                          "description":  "Total remote balance in satoshis",
                                                                                                                          "example":  500000
                                                                                                                      }
                                                                                    },
                                                                     "required":  [
                                                                                      "peer_id",
                                                                                      "channels",
                                                                                      "total_capacity_sats",
                                                                                      "total_local_balance_sats",
                                                                                      "total_remote_balance_sats"
                                                                                  ]
                                                                 },
                                       "OpenChannelDto":  {
                                                              "type":  "object",
                                                              "properties":  {
                                                                                 "pubkey":  {
                                                                                                "type":  "string",
                                                                                                "description":  "Peer node public key",
                                                                                                "example":  "03abc..."
                                                                                            },
                                                                                 "amount_sats":  {
                                                                                                     "type":  "number",
                                                                                                     "description":  "Channel capacity in satoshis",
                                                                                                     "example":  1000000
                                                                                                 },
                                                                                 "push_sats":  {
                                                                                                   "type":  "number",
                                                                                                   "description":  "Amount to push to the other side in satoshis",
                                                                                                   "example":  10000
                                                                                               },
                                                                                 "fee_rate_sats_per_vbyte":  {
                                                                                                                 "type":  "number",
                                                                                                                 "description":  "Fee rate in sats per vbyte",
                                                                                                                 "example":  5
                                                                                                             }
                                                                             },
                                                              "required":  [
                                                                               "pubkey",
                                                                               "amount_sats"
                                                                           ]
                                                          },
                                       "LightningLiquidityResponse":  {
                                                                          "type":  "object",
                                                                          "properties":  {
                                                                                             "channel_id":  {
                                                                                                                "type":  "string",
                                                                                                                "description":  "Channel ID",
                                                                                                                "example":  "1234567890abcdef"
                                                                                                            },
                                                                                             "peer_id":  {
                                                                                                             "type":  "string",
                                                                                                             "description":  "Peer node ID",
                                                                                                             "example":  "03abc..."
                                                                                                         },
                                                                                             "amount_sats":  {
                                                                                                                 "type":  "number",
                                                                                                                 "description":  "Amount in satoshis",
                                                                                                                 "example":  100000
                                                                                                             },
                                                                                             "fee_sats":  {
                                                                                                              "type":  "number",
                                                                                                              "description":  "Fee in satoshis",
                                                                                                              "example":  50
                                                                                                          },
                                                                                             "status":  {
                                                                                                            "type":  "string",
                                                                                                            "description":  "Operation status",
                                                                                                            "example":  "PENDING"
                                                                                                        },
                                                                                             "txid":  {
                                                                                                          "type":  "string",
                                                                                                          "description":  "Transaction ID",
                                                                                                          "example":  "abc123..."
                                                                                                      }
                                                                                         },
                                                                          "required":  [
                                                                                           "channel_id",
                                                                                           "peer_id",
                                                                                           "amount_sats",
                                                                                           "fee_sats",
                                                                                           "status"
                                                                                       ]
                                                                      },
                                       "CloseChannelDto":  {
                                                               "type":  "object",
                                                               "properties":  {
                                                                                  "force_close":  {
                                                                                                      "type":  "boolean",
                                                                                                      "description":  "Force close the channel",
                                                                                                      "example":  false
                                                                                                  },
                                                                                  "fee_rate_sats_per_vbyte":  {
                                                                                                                  "type":  "number",
                                                                                                                  "description":  "Fee rate in sats per vbyte",
                                                                                                                  "example":  5
                                                                                                              }
                                                                              }
                                                           },
                                       "AddLiquidityDto":  {
                                                               "type":  "object",
                                                               "properties":  {
                                                                                  "amount_sats":  {
                                                                                                      "type":  "number",
                                                                                                      "description":  "Amount in satoshis",
                                                                                                      "example":  100000
                                                                                                  },
                                                                                  "fee_rate_sats_per_vbyte":  {
                                                                                                                  "type":  "number",
                                                                                                                  "description":  "Fee rate in sats per vbyte",
                                                                                                                  "example":  5
                                                                                                              },
                                                                                  "description":  {
                                                                                                      "type":  "string",
                                                                                                      "description":  "Liquidity description",
                                                                                                      "example":  "Add liquidity for swaps"
                                                                                                  }
                                                                              },
                                                               "required":  [
                                                                                "amount_sats"
                                                                            ]
                                                           },
                                       "RemoveLiquidityDto":  {
                                                                  "type":  "object",
                                                                  "properties":  {
                                                                                     "amount_sats":  {
                                                                                                         "type":  "number",
                                                                                                         "description":  "Amount in satoshis",
                                                                                                         "example":  100000
                                                                                                     },
                                                                                     "fee_rate_sats_per_vbyte":  {
                                                                                                                     "type":  "number",
                                                                                                                     "description":  "Fee rate in sats per vbyte",
                                                                                                                     "example":  5
                                                                                                                 },
                                                                                     "description":  {
                                                                                                         "type":  "string",
                                                                                                         "description":  "Liquidity description",
                                                                                                         "example":  "Add liquidity for swaps"
                                                                                                     }
                                                                                 },
                                                                  "required":  [
                                                                                   "amount_sats"
                                                                               ]
                                                              },
                                       "LightningNetworkInfoResponse":  {
                                                                            "type":  "object",
                                                                            "properties":  {
                                                                                               "total_channels":  {
                                                                                                                      "type":  "number",
                                                                                                                      "description":  "Total channels",
                                                                                                                      "example":  1000
                                                                                                                  },
                                                                                               "total_capacity_sats":  {
                                                                                                                           "type":  "number",
                                                                                                                           "description":  "Total capacity in satoshis",
                                                                                                                           "example":  1000000000
                                                                                                                       },
                                                                                               "average_channel_size_sats":  {
                                                                                                                                 "type":  "number",
                                                                                                                                 "description":  "Average channel size in satoshis",
                                                                                                                                 "example":  1000000
                                                                                                                             },
                                                                                               "network_fee_rate_sats_per_vbyte":  {
                                                                                                                                       "type":  "number",
                                                                                                                                       "description":  "Network fee rate in sats per vbyte",
                                                                                                                                       "example":  5
                                                                                                                                   },
                                                                                               "mempool_fee_rate_sats_per_vbyte":  {
                                                                                                                                       "type":  "number",
                                                                                                                                       "description":  "Mempool fee rate in sats per vbyte",
                                                                                                                                       "example":  10
                                                                                                                                   }
                                                                                           },
                                                                            "required":  [
                                                                                             "total_channels",
                                                                                             "total_capacity_sats",
                                                                                             "average_channel_size_sats",
                                                                                             "network_fee_rate_sats_per_vbyte",
                                                                                             "mempool_fee_rate_sats_per_vbyte"
                                                                                         ]
                                                                        },
                                       "LightningFeeEstimatesResponse":  {
                                                                             "type":  "object",
                                                                             "properties":  {
                                                                                                "slow_sats_per_vbyte":  {
                                                                                                                            "type":  "number",
                                                                                                                            "description":  "Slow fee rate in sats per vbyte",
                                                                                                                            "example":  1
                                                                                                                        },
                                                                                                "normal_sats_per_vbyte":  {
                                                                                                                              "type":  "number",
                                                                                                                              "description":  "Normal fee rate in sats per vbyte",
                                                                                                                              "example":  5
                                                                                                                          },
                                                                                                "fast_sats_per_vbyte":  {
                                                                                                                            "type":  "number",
                                                                                                                            "description":  "Fast fee rate in sats per vbyte",
                                                                                                                            "example":  10
                                                                                                                        }
                                                                                            },
                                                                             "required":  [
                                                                                              "slow_sats_per_vbyte",
                                                                                              "normal_sats_per_vbyte",
                                                                                              "fast_sats_per_vbyte"
                                                                                          ]
                                                                         },
                                       "LightningWalletStatsResponse":  {
                                                                            "type":  "object",
                                                                            "properties":  {
                                                                                               "total_balance_sats":  {
                                                                                                                          "type":  "number",
                                                                                                                          "description":  "Total balance in satoshis",
                                                                                                                          "example":  1000000
                                                                                                                      },
                                                                                               "lightning_balance_sats":  {
                                                                                                                              "type":  "number",
                                                                                                                              "description":  "Lightning balance in satoshis",
                                                                                                                              "example":  1000000
                                                                                                                          },
                                                                                               "onchain_balance_sats":  {
                                                                                                                            "type":  "number",
                                                                                                                            "description":  "On-chain balance in satoshis",
                                                                                                                            "example":  0
                                                                                                                        },
                                                                                               "total_channels":  {
                                                                                                                      "type":  "number",
                                                                                                                      "description":  "Total channels",
                                                                                                                      "example":  5
                                                                                                                  },
                                                                                               "active_channels":  {
                                                                                                                       "type":  "number",
                                                                                                                       "description":  "Active channels",
                                                                                                                       "example":  5
                                                                                                                   },
                                                                                               "total_capacity_sats":  {
                                                                                                                           "type":  "number",
                                                                                                                           "description":  "Total capacity in satoshis",
                                                                                                                           "example":  5000000
                                                                                                                       },
                                                                                               "inbound_capacity_sats":  {
                                                                                                                             "type":  "number",
                                                                                                                             "description":  "Inbound capacity in satoshis",
                                                                                                                             "example":  2500000
                                                                                                                         },
                                                                                               "outbound_capacity_sats":  {
                                                                                                                              "type":  "number",
                                                                                                                              "description":  "Outbound capacity in satoshis",
                                                                                                                              "example":  2500000
                                                                                                                          },
                                                                                               "last_updated":  {
                                                                                                                    "type":  "string",
                                                                                                                    "description":  "Last update timestamp",
                                                                                                                    "example":  "2024-01-01T00:00:00.000Z"
                                                                                                                }
                                                                                           },
                                                                            "required":  [
                                                                                             "total_balance_sats",
                                                                                             "lightning_balance_sats",
                                                                                             "onchain_balance_sats",
                                                                                             "total_channels",
                                                                                             "active_channels",
                                                                                             "total_capacity_sats",
                                                                                             "inbound_capacity_sats",
                                                                                             "outbound_capacity_sats",
                                                                                             "last_updated"
                                                                                         ]
                                                                        },
                                       "BitcoinTransactionResponse":  {
                                                                          "type":  "object",
                                                                          "properties":  {
                                                                                             "id":  {
                                                                                                        "type":  "string",
                                                                                                        "description":  "Transaction ID",
                                                                                                        "example":  "tx_123"
                                                                                                    },
                                                                                             "type":  {
                                                                                                          "type":  "string",
                                                                                                          "description":  "Transaction type",
                                                                                                          "enum":  [
                                                                                                                       "lightning",
                                                                                                                       "onchain"
                                                                                                                   ]
                                                                                                      },
                                                                                             "amount_sats":  {
                                                                                                                 "type":  "number",
                                                                                                                 "description":  "Amount in satoshis",
                                                                                                                 "example":  100000
                                                                                                             },
                                                                                             "fee_sats":  {
                                                                                                              "type":  "number",
                                                                                                              "description":  "Fee in satoshis",
                                                                                                              "example":  10
                                                                                                          },
                                                                                             "status":  {
                                                                                                            "type":  "string",
                                                                                                            "description":  "Transaction status",
                                                                                                            "example":  "COMPLETE"
                                                                                                        },
                                                                                             "timestamp":  {
                                                                                                               "type":  "string",
                                                                                                               "description":  "Transaction timestamp",
                                                                                                               "example":  "2024-01-01T00:00:00.000Z"
                                                                                                           },
                                                                                             "description":  {
                                                                                                                 "type":  "string",
                                                                                                                 "description":  "Transaction description",
                                                                                                                 "example":  "Lightning payment"
                                                                                                             },
                                                                                             "txid":  {
                                                                                                          "type":  "string",
                                                                                                          "description":  "Transaction hash",
                                                                                                          "example":  "abc123..."
                                                                                                      },
                                                                                             "payment_hash":  {
                                                                                                                  "type":  "string",
                                                                                                                  "description":  "Payment hash",
                                                                                                                  "example":  "def456..."
                                                                                                              }
                                                                                         },
                                                                          "required":  [
                                                                                           "id",
                                                                                           "type",
                                                                                           "amount_sats",
                                                                                           "status",
                                                                                           "timestamp"
                                                                                       ]
                                                                      },
                                       "BitcoinTransactionHistoryResponse":  {
                                                                                 "type":  "object",
                                                                                 "properties":  {
                                                                                                    "transactions":  {
                                                                                                                         "description":  "Transactions",
                                                                                                                         "type":  "array",
                                                                                                                         "items":  {
                                                                                                                                       "$ref":  "#/components/schemas/BitcoinTransactionResponse"
                                                                                                                                   }
                                                                                                                     },
                                                                                                    "total":  {
                                                                                                                  "type":  "number",
                                                                                                                  "description":  "Total number of transactions",
                                                                                                                  "example":  100
                                                                                                              },
                                                                                                    "has_more":  {
                                                                                                                     "type":  "boolean",
                                                                                                                     "description":  "Has more transactions",
                                                                                                                     "example":  true
                                                                                                                 }
                                                                                                },
                                                                                 "required":  [
                                                                                                  "transactions",
                                                                                                  "total",
                                                                                                  "has_more"
                                                                                              ]
                                                                             },
                                       "GatewayType":  {
                                                           "type":  "string",
                                                           "description":  "Type of payment gateway for automated agent operations",
                                                           "enum":  [
                                                                        "intasend"
                                                                    ]
                                                       },
                                       "IntasendGatewayConfigDto":  {
                                                                        "type":  "object",
                                                                        "properties":  {
                                                                                           "publicKey":  {
                                                                                                             "type":  "string",
                                                                                                             "description":  "IntaSend public key"
                                                                                                         },
                                                                                           "privateKey":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "IntaSend private key"
                                                                                                          },
                                                                                           "webhookChallenge":  {
                                                                                                                    "type":  "string",
                                                                                                                    "description":  "IntaSend webhook challenge string"
                                                                                                                }
                                                                                       },
                                                                        "required":  [
                                                                                         "publicKey",
                                                                                         "privateKey",
                                                                                         "webhookChallenge"
                                                                                     ]
                                                                    },
                                       "GatewayConfigDto":  {
                                                                "type":  "object",
                                                                "properties":  {
                                                                                   "gatewayType":  {
                                                                                                       "example":  "intasend",
                                                                                                       "$ref":  "#/components/schemas/GatewayType"
                                                                                                   },
                                                                                   "intasendConfig":  {
                                                                                                          "description":  "IntaSend configuration (required when gatewayType is \u0027intasend\u0027)",
                                                                                                          "allOf":  [
                                                                                                                        {
                                                                                                                            "$ref":  "#/components/schemas/IntasendGatewayConfigDto"
                                                                                                                        }
                                                                                                                    ]
                                                                                                      }
                                                                               },
                                                                "required":  [
                                                                                 "gatewayType"
                                                                             ]
                                                            },
                                       "RegisterAgentDto":  {
                                                                "type":  "object",
                                                                "properties":  {
                                                                                   "userId":  {
                                                                                                  "type":  "string",
                                                                                                  "description":  "User ID to create agent for (admin only). If not provided, uses the authenticated user\u0027s ID",
                                                                                                  "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                  "format":  "uuid"
                                                                                              },
                                                                                   "supportedCurrencies":  {
                                                                                                               "type":  "array",
                                                                                                               "description":  "List of currencies the agent supports for trading",
                                                                                                               "example":  [
                                                                                                                               "USD",
                                                                                                                               "KES"
                                                                                                                           ],
                                                                                                               "minItems":  1,
                                                                                                               "items":  {
                                                                                                                             "type":  "string",
                                                                                                                             "enum":  [
                                                                                                                                          "BTC",
                                                                                                                                          "KES",
                                                                                                                                          "USDT",
                                                                                                                                          "USD",
                                                                                                                                          "UNRECOGNIZED"
                                                                                                                                      ]
                                                                                                                         }
                                                                                                           },
                                                                                   "supportedChannels":  {
                                                                                                             "type":  "array",
                                                                                                             "description":  "Payment channels the agent can use for transactions",
                                                                                                             "example":  [
                                                                                                                             "bank_transfer",
                                                                                                                             "mpesa_phone"
                                                                                                                         ],
                                                                                                             "minItems":  1,
                                                                                                             "items":  {
                                                                                                                           "type":  "string",
                                                                                                                           "enum":  [
                                                                                                                                        "mpesa_phone",
                                                                                                                                        "mpesa_till",
                                                                                                                                        "mpesa_paybill",
                                                                                                                                        "bank_transfer",
                                                                                                                                        "card"
                                                                                                                                    ]
                                                                                                                       }
                                                                                                         },
                                                                                   "minTransactionAmount":  {
                                                                                                                "type":  "string",
                                                                                                                "description":  "Minimum transaction amount in smallest units (e.g., cents for USD)",
                                                                                                                "example":  "1000",
                                                                                                                "pattern":  "^[0-9]+$"
                                                                                                            },
                                                                                   "maxTransactionAmount":  {
                                                                                                                "type":  "string",
                                                                                                                "description":  "Maximum transaction amount in smallest units (e.g., cents for USD)",
                                                                                                                "example":  "1000000",
                                                                                                                "pattern":  "^[0-9]+$"
                                                                                                            },
                                                                                   "dailyVolumeLimit":  {
                                                                                                            "type":  "string",
                                                                                                            "description":  "Daily volume limit in smallest units (e.g., cents for USD)",
                                                                                                            "example":  "10000000",
                                                                                                            "pattern":  "^[0-9]+$"
                                                                                                        },
                                                                                   "onrampMarginBp":  {
                                                                                                          "type":  "number",
                                                                                                          "description":  "Onramp margin in basis points (100 basis points = 1%). Applied when users buy Bitcoin",
                                                                                                          "example":  250,
                                                                                                          "minimum":  0,
                                                                                                          "maximum":  10000
                                                                                                      },
                                                                                   "offrampMarginBp":  {
                                                                                                           "type":  "number",
                                                                                                           "description":  "Offramp margin in basis points (100 basis points = 1%). Applied when users sell Bitcoin",
                                                                                                           "example":  300,
                                                                                                           "minimum":  0,
                                                                                                           "maximum":  10000
                                                                                                       },
                                                                                   "operatingHours":  {
                                                                                                          "type":  "object",
                                                                                                          "description":  "Operating hours configuration for the agent",
                                                                                                          "example":  {
                                                                                                                          "monday":  {
                                                                                                                                         "start":  "09:00",
                                                                                                                                         "end":  "17:00"
                                                                                                                                     },
                                                                                                                          "tuesday":  {
                                                                                                                                          "start":  "09:00",
                                                                                                                                          "end":  "17:00"
                                                                                                                                      },
                                                                                                                          "timezone":  "UTC"
                                                                                                                      }
                                                                                                      },
                                                                                   "settings":  {
                                                                                                    "type":  "object",
                                                                                                    "description":  "Additional agent settings and preferences",
                                                                                                    "example":  {
                                                                                                                    "autoAccept":  true,
                                                                                                                    "notificationPreferences":  {
                                                                                                                                                    "email":  true,
                                                                                                                                                    "sms":  false
                                                                                                                                                },
                                                                                                                    "maxConcurrentSwaps":  10
                                                                                                                }
                                                                                                },
                                                                                   "gatewayConfig":  {
                                                                                                         "description":  "Gateway configuration for automated agents",
                                                                                                         "allOf":  [
                                                                                                                       {
                                                                                                                           "$ref":  "#/components/schemas/GatewayConfigDto"
                                                                                                                       }
                                                                                                                   ]
                                                                                                     }
                                                                               },
                                                                "required":  [
                                                                                 "supportedCurrencies",
                                                                                 "supportedChannels",
                                                                                 "minTransactionAmount",
                                                                                 "maxTransactionAmount",
                                                                                 "dailyVolumeLimit",
                                                                                 "onrampMarginBp",
                                                                                 "offrampMarginBp"
                                                                             ]
                                                            },
                                       "AgentStatus":  {
                                                           "type":  "string",
                                                           "description":  "Current status of the agent",
                                                           "enum":  [
                                                                        "active",
                                                                        "inactive",
                                                                        "suspended"
                                                                    ]
                                                       },
                                       "AgentLimitsResponse":  {
                                                                   "type":  "object",
                                                                   "properties":  {
                                                                                      "min":  {
                                                                                                  "type":  "string",
                                                                                                  "description":  "Minimum transaction amount in smallest units",
                                                                                                  "example":  "1000"
                                                                                              },
                                                                                      "max":  {
                                                                                                  "type":  "string",
                                                                                                  "description":  "Maximum transaction amount in smallest units",
                                                                                                  "example":  "1000000"
                                                                                              },
                                                                                      "daily":  {
                                                                                                    "type":  "string",
                                                                                                    "description":  "Daily volume limit in smallest units",
                                                                                                    "example":  "10000000"
                                                                                                }
                                                                                  },
                                                                   "required":  [
                                                                                    "min",
                                                                                    "max",
                                                                                    "daily"
                                                                                ]
                                                               },
                                       "AgentMarginsResponse":  {
                                                                    "type":  "object",
                                                                    "properties":  {
                                                                                       "onrampBp":  {
                                                                                                        "type":  "number",
                                                                                                        "description":  "Onramp margin in basis points",
                                                                                                        "example":  250
                                                                                                    },
                                                                                       "offrampBp":  {
                                                                                                         "type":  "number",
                                                                                                         "description":  "Offramp margin in basis points",
                                                                                                         "example":  300
                                                                                                     }
                                                                                   },
                                                                    "required":  [
                                                                                     "onrampBp",
                                                                                     "offrampBp"
                                                                                 ]
                                                                },
                                       "AgentMetricsResponse":  {
                                                                    "type":  "object",
                                                                    "properties":  {
                                                                                       "rating":  {
                                                                                                      "type":  "number",
                                                                                                      "description":  "Agent\u0027s average rating (1.0 to 5.0)",
                                                                                                      "example":  4.5,
                                                                                                      "minimum":  1,
                                                                                                      "maximum":  5
                                                                                                  },
                                                                                       "completedSwaps":  {
                                                                                                              "type":  "number",
                                                                                                              "description":  "Total number of completed swaps",
                                                                                                              "example":  150
                                                                                                          },
                                                                                       "responseTime":  {
                                                                                                            "type":  "number",
                                                                                                            "description":  "Average response time in seconds",
                                                                                                            "example":  120
                                                                                                        }
                                                                                   },
                                                                    "required":  [
                                                                                     "rating",
                                                                                     "completedSwaps",
                                                                                     "responseTime"
                                                                                 ]
                                                                },
                                       "AgentUserResponse":  {
                                                                 "type":  "object",
                                                                 "properties":  {
                                                                                    "id":  {
                                                                                               "type":  "string",
                                                                                               "description":  "User ID associated with the agent",
                                                                                               "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                               "format":  "uuid"
                                                                                           },
                                                                                    "email":  {
                                                                                                  "type":  "string",
                                                                                                  "description":  "Email address of the agent user",
                                                                                                  "example":  "agent@example.com",
                                                                                                  "format":  "email"
                                                                                              },
                                                                                    "status":  {
                                                                                                   "type":  "string",
                                                                                                   "description":  "User account status",
                                                                                                   "example":  "active"
                                                                                               },
                                                                                    "metadata":  {
                                                                                                     "type":  "object",
                                                                                                     "description":  "Additional user metadata",
                                                                                                     "example":  {
                                                                                                                     "verified":  true,
                                                                                                                     "kycLevel":  2
                                                                                                                 }
                                                                                                 }
                                                                                },
                                                                 "required":  [
                                                                                  "id",
                                                                                  "email",
                                                                                  "status"
                                                                              ]
                                                             },
                                       "AgentResponse":  {
                                                             "type":  "object",
                                                             "properties":  {
                                                                                "id":  {
                                                                                           "type":  "string",
                                                                                           "description":  "Unique identifier of the agent",
                                                                                           "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                           "format":  "uuid"
                                                                                       },
                                                                                "isAutomated":  {
                                                                                                    "type":  "boolean",
                                                                                                    "description":  "Whether the agent uses automated payment gateways",
                                                                                                    "example":  false
                                                                                                },
                                                                                "status":  {
                                                                                               "example":  "active",
                                                                                               "$ref":  "#/components/schemas/AgentStatus"
                                                                                           },
                                                                                "supportedCurrencies":  {
                                                                                                            "type":  "array",
                                                                                                            "description":  "List of currencies the agent supports",
                                                                                                            "example":  [
                                                                                                                            "USD",
                                                                                                                            "KES"
                                                                                                                        ],
                                                                                                            "items":  {
                                                                                                                          "type":  "string",
                                                                                                                          "enum":  [
                                                                                                                                       "BTC",
                                                                                                                                       "KES",
                                                                                                                                       "USDT",
                                                                                                                                       "USD",
                                                                                                                                       "UNRECOGNIZED"
                                                                                                                                   ]
                                                                                                                      }
                                                                                                        },
                                                                                "supportedChannels":  {
                                                                                                          "type":  "array",
                                                                                                          "description":  "List of payment channels the agent supports",
                                                                                                          "example":  [
                                                                                                                          "bank_transfer",
                                                                                                                          "mpesa_phone"
                                                                                                                      ],
                                                                                                          "items":  {
                                                                                                                        "type":  "string",
                                                                                                                        "enum":  [
                                                                                                                                     "mpesa_phone",
                                                                                                                                     "mpesa_till",
                                                                                                                                     "mpesa_paybill",
                                                                                                                                     "bank_transfer",
                                                                                                                                     "card"
                                                                                                                                 ]
                                                                                                                    }
                                                                                                      },
                                                                                "limits":  {
                                                                                               "description":  "Transaction limits for the agent",
                                                                                               "allOf":  [
                                                                                                             {
                                                                                                                 "$ref":  "#/components/schemas/AgentLimitsResponse"
                                                                                                             }
                                                                                                         ]
                                                                                           },
                                                                                "margins":  {
                                                                                                "description":  "Margin rates for different swap types",
                                                                                                "allOf":  [
                                                                                                              {
                                                                                                                  "$ref":  "#/components/schemas/AgentMarginsResponse"
                                                                                                              }
                                                                                                          ]
                                                                                            },
                                                                                "metrics":  {
                                                                                                "description":  "Performance metrics for the agent",
                                                                                                "allOf":  [
                                                                                                              {
                                                                                                                  "$ref":  "#/components/schemas/AgentMetricsResponse"
                                                                                                              }
                                                                                                          ]
                                                                                            },
                                                                                "operatingHours":  {
                                                                                                       "type":  "object",
                                                                                                       "description":  "Operating hours configuration",
                                                                                                       "example":  {
                                                                                                                       "monday":  {
                                                                                                                                      "start":  "09:00",
                                                                                                                                      "end":  "17:00"
                                                                                                                                  },
                                                                                                                       "timezone":  "UTC"
                                                                                                                   }
                                                                                                   },
                                                                                "liquidity":  {
                                                                                                  "description":  "Liquidity information per currency",
                                                                                                  "type":  "array",
                                                                                                  "items":  {
                                                                                                                "type":  "object"
                                                                                                            }
                                                                                              },
                                                                                "user":  {
                                                                                             "$ref":  "#/components/schemas/AgentUserResponse"
                                                                                         }
                                                                            },
                                                             "required":  [
                                                                              "id",
                                                                              "isAutomated",
                                                                              "status",
                                                                              "supportedCurrencies",
                                                                              "supportedChannels",
                                                                              "limits",
                                                                              "margins"
                                                                          ]
                                                         },
                                       "PaginatedAgentsResponse":  {
                                                                       "type":  "object",
                                                                       "properties":  {
                                                                                          "agents":  {
                                                                                                         "description":  "Array of agent records",
                                                                                                         "type":  "array",
                                                                                                         "items":  {
                                                                                                                       "$ref":  "#/components/schemas/AgentResponse"
                                                                                                                   }
                                                                                                     },
                                                                                          "total":  {
                                                                                                        "type":  "number",
                                                                                                        "description":  "Total number of agents matching the query",
                                                                                                        "example":  50
                                                                                                    },
                                                                                          "page":  {
                                                                                                       "type":  "number",
                                                                                                       "description":  "Current page number",
                                                                                                       "example":  1
                                                                                                   },
                                                                                          "limit":  {
                                                                                                        "type":  "number",
                                                                                                        "description":  "Number of items per page",
                                                                                                        "example":  20
                                                                                                    }
                                                                                      },
                                                                       "required":  [
                                                                                        "agents",
                                                                                        "total",
                                                                                        "page",
                                                                                        "limit"
                                                                                    ]
                                                                   },
                                       "ValidateAgentDto":  {
                                                                "type":  "object",
                                                                "properties":  {
                                                                                   "amount":  {
                                                                                                  "type":  "string",
                                                                                                  "description":  "Transaction amount to validate in smallest units (e.g., cents for USD)",
                                                                                                  "example":  "10000",
                                                                                                  "pattern":  "^[0-9]+$"
                                                                                              },
                                                                                   "currency":  {
                                                                                                    "example":  "USD",
                                                                                                    "$ref":  "#/components/schemas/Currency"
                                                                                                },
                                                                                   "paymentChannel":  {
                                                                                                          "example":  "bank_transfer",
                                                                                                          "$ref":  "#/components/schemas/PaymentChannel"
                                                                                                      }
                                                                               },
                                                                "required":  [
                                                                                 "amount",
                                                                                 "currency",
                                                                                 "paymentChannel"
                                                                             ]
                                                            },
                                       "UpdateAgentDto":  {
                                                              "type":  "object",
                                                              "properties":  {
                                                                                 "supportedCurrencies":  {
                                                                                                             "type":  "array",
                                                                                                             "description":  "Updated list of supported currencies",
                                                                                                             "example":  [
                                                                                                                             "USD",
                                                                                                                             "KES"
                                                                                                                         ],
                                                                                                             "items":  {
                                                                                                                           "type":  "string",
                                                                                                                           "enum":  [
                                                                                                                                        "BTC",
                                                                                                                                        "KES",
                                                                                                                                        "USDT",
                                                                                                                                        "USD",
                                                                                                                                        "UNRECOGNIZED"
                                                                                                                                    ]
                                                                                                                       }
                                                                                                         },
                                                                                 "supportedChannels":  {
                                                                                                           "type":  "array",
                                                                                                           "description":  "Updated list of supported payment channels",
                                                                                                           "example":  [
                                                                                                                           "bank_transfer",
                                                                                                                           "mpesa_phone"
                                                                                                                       ],
                                                                                                           "items":  {
                                                                                                                         "type":  "string",
                                                                                                                         "enum":  [
                                                                                                                                      "mpesa_phone",
                                                                                                                                      "mpesa_till",
                                                                                                                                      "mpesa_paybill",
                                                                                                                                      "bank_transfer",
                                                                                                                                      "card"
                                                                                                                                  ]
                                                                                                                     }
                                                                                                       },
                                                                                 "minTransactionAmount":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "Updated minimum transaction amount in smallest units",
                                                                                                              "example":  "5000",
                                                                                                              "pattern":  "^[0-9]+$"
                                                                                                          },
                                                                                 "maxTransactionAmount":  {
                                                                                                              "type":  "string",
                                                                                                              "description":  "Updated maximum transaction amount in smallest units",
                                                                                                              "example":  "5000000",
                                                                                                              "pattern":  "^[0-9]+$"
                                                                                                          },
                                                                                 "dailyVolumeLimit":  {
                                                                                                          "type":  "string",
                                                                                                          "description":  "Updated daily volume limit in smallest units",
                                                                                                          "example":  "50000000",
                                                                                                          "pattern":  "^[0-9]+$"
                                                                                                      },
                                                                                 "onrampMarginBp":  {
                                                                                                        "type":  "number",
                                                                                                        "description":  "Updated onramp margin in basis points",
                                                                                                        "example":  200,
                                                                                                        "minimum":  0,
                                                                                                        "maximum":  10000
                                                                                                    },
                                                                                 "offrampMarginBp":  {
                                                                                                         "type":  "number",
                                                                                                         "description":  "Updated offramp margin in basis points",
                                                                                                         "example":  250,
                                                                                                         "minimum":  0,
                                                                                                         "maximum":  10000
                                                                                                     },
                                                                                 "operatingHours":  {
                                                                                                        "type":  "object",
                                                                                                        "description":  "Updated operating hours configuration",
                                                                                                        "example":  {
                                                                                                                        "monday":  {
                                                                                                                                       "start":  "09:00",
                                                                                                                                       "end":  "17:00"
                                                                                                                                   },
                                                                                                                        "timezone":  "UTC"
                                                                                                                    }
                                                                                                    },
                                                                                 "settings":  {
                                                                                                  "type":  "object",
                                                                                                  "description":  "Updated agent settings and preferences",
                                                                                                  "example":  {
                                                                                                                  "autoAccept":  true,
                                                                                                                  "maxConcurrentSwaps":  10
                                                                                                              }
                                                                                              }
                                                                             }
                                                          },
                                       "AgentSwapHistoryResponse":  {
                                                                        "type":  "object",
                                                                        "properties":  {
                                                                                           "swaps":  {
                                                                                                         "description":  "Array of swap records handled by the agent",
                                                                                                         "type":  "array",
                                                                                                         "items":  {
                                                                                                                       "$ref":  "#/components/schemas/SwapResponse"
                                                                                                                   }
                                                                                                     },
                                                                                           "total":  {
                                                                                                         "type":  "number",
                                                                                                         "description":  "Total number of swaps",
                                                                                                         "example":  100
                                                                                                     },
                                                                                           "page":  {
                                                                                                        "type":  "number",
                                                                                                        "description":  "Current page number",
                                                                                                        "example":  1
                                                                                                    },
                                                                                           "limit":  {
                                                                                                         "type":  "number",
                                                                                                         "description":  "Number of items per page",
                                                                                                         "example":  20
                                                                                                     }
                                                                                       },
                                                                        "required":  [
                                                                                         "swaps",
                                                                                         "total",
                                                                                         "page",
                                                                                         "limit"
                                                                                     ]
                                                                    },
                                       "DeclareLiquidityDto":  {
                                                                   "type":  "object",
                                                                   "properties":  {
                                                                                      "currency":  {
                                                                                                       "example":  "USD",
                                                                                                       "$ref":  "#/components/schemas/Currency"
                                                                                                   },
                                                                                      "amount":  {
                                                                                                     "type":  "string",
                                                                                                     "description":  "Amount of liquidity in smallest units (e.g., cents for USD)",
                                                                                                     "example":  "100000",
                                                                                                     "pattern":  "^[0-9]+$"
                                                                                                 },
                                                                                      "isCustodial":  {
                                                                                                          "type":  "boolean",
                                                                                                          "description":  "Whether this is custodial liquidity (funds held by Minmo)",
                                                                                                          "example":  false,
                                                                                                          "default":  false
                                                                                                      }
                                                                                  },
                                                                   "required":  [
                                                                                    "currency",
                                                                                    "amount"
                                                                                ]
                                                               },
                                       "BulkDeclareLiquidityDto":  {
                                                                       "type":  "object",
                                                                       "properties":  {
                                                                                          "declarations":  {
                                                                                                               "description":  "List of liquidity declarations for multiple currencies",
                                                                                                               "example":  [
                                                                                                                               {
                                                                                                                                   "currency":  "USD",
                                                                                                                                   "amount":  "100000",
                                                                                                                                   "isCustodial":  false
                                                                                                                               },
                                                                                                                               {
                                                                                                                                   "currency":  "KES",
                                                                                                                                   "amount":  "500000",
                                                                                                                                   "isCustodial":  false
                                                                                                                               }
                                                                                                                           ],
                                                                                                               "type":  "array",
                                                                                                               "items":  {
                                                                                                                             "$ref":  "#/components/schemas/DeclareLiquidityDto"
                                                                                                                         }
                                                                                                           }
                                                                                      },
                                                                       "required":  [
                                                                                        "declarations"
                                                                                    ]
                                                                   },
                                       "ValidateLiquidityDto":  {
                                                                    "type":  "object",
                                                                    "properties":  {
                                                                                       "agentId":  {
                                                                                                       "type":  "string",
                                                                                                       "description":  "Agent ID to validate liquidity for",
                                                                                                       "example":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                       "format":  "uuid"
                                                                                                   },
                                                                                       "currency":  {
                                                                                                        "example":  "USD",
                                                                                                        "$ref":  "#/components/schemas/Currency"
                                                                                                    },
                                                                                       "amount":  {
                                                                                                      "type":  "string",
                                                                                                      "description":  "Amount to validate in smallest units (e.g., cents for USD)",
                                                                                                      "example":  "50000",
                                                                                                      "pattern":  "^[0-9]+$"
                                                                                                  }
                                                                                   },
                                                                    "required":  [
                                                                                     "agentId",
                                                                                     "currency",
                                                                                     "amount"
                                                                                 ]
                                                                }
                                   }
                   }
}
